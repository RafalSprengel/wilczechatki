This file is a merged representation of a subset of the codebase, containing specifically included files, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of a subset of the repository's contents that is considered the most important context.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Only files matching these patterns are included: src
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
src/actions/adminBookingActions.ts
src/actions/adminConfigActions.ts
src/actions/createBooking.ts
src/actions/getCalendarData.ts
src/actions/searchActions.ts
src/actions/seed.ts
src/app/_components/About/About.module.css
src/app/_components/About/About.tsx
src/app/_components/Attractions/Attractions.module.css
src/app/_components/Attractions/Attractions.tsx
src/app/_components/CalendarPicker/CalendarPicker.tsx
src/app/_components/CalendarPicker/ClendarPicker.css
src/app/_components/Contact/Contact.module.css
src/app/_components/Contact/Contact.tsx
src/app/_components/Contact/ContactForm.module.css
src/app/_components/Contact/ContactForm.tsx
src/app/_components/Footer/Footer.module.css
src/app/_components/Footer/Footer.tsx
src/app/_components/GallerySection/GalerrySection.tsx
src/app/_components/GallerySection/GallerySection.module.css
src/app/_components/Header/Header.module.css
src/app/_components/Header/Header.tsx
src/app/_components/Hero/Hero.module.css
src/app/_components/Hero/Hero.tsx
src/app/_components/Hero/HeroSlider.module.css
src/app/_components/Hero/HeroSlider.tsx
src/app/_components/LightBoxGallery/LightBoxGallery.module.css
src/app/_components/LightBoxGallery/LightBoxGallery.tsx
src/app/_components/Navbar/HamburgerButton.module.css
src/app/_components/Navbar/HamburgerButton.tsx
src/app/_components/Navbar/Navbar.module.css
src/app/_components/Navbar/Navbar.tsx
src/app/_components/Navbar/TopBar.module.css
src/app/_components/Navbar/TopBar.tsx
src/app/_components/QuantityPicker/QuantityPicker.module.css
src/app/_components/QuantityPicker/QuantityPicker.tsx
src/app/_components/QuantitySelector/QuantityPicker.module.css
src/app/_components/QuantitySelector/QuantityPicker.tsx
src/app/_components/Services/Services.module.css
src/app/_components/Services/Services.tsx
src/app/(root)/booking/page.module.css
src/app/(root)/booking/page.tsx
src/app/(root)/gallery/page.module.css
src/app/(root)/gallery/page.tsx
src/app/(root)/layout.tsx
src/app/(root)/page.module.css
src/app/(root)/page.tsx
src/app/admin/admin.module.css
src/app/admin/bookings/add/page.module.css
src/app/admin/bookings/add/page.tsx
src/app/admin/bookings/calendar/page.module.css
src/app/admin/bookings/calendar/page.tsx
src/app/admin/bookings/list/[id]/EditBookingForm.tsx
src/app/admin/bookings/list/[id]/page.module.css
src/app/admin/bookings/list/[id]/page.tsx
src/app/admin/bookings/list/page.module.css
src/app/admin/bookings/list/page.tsx
src/app/admin/dev/page.module.css
src/app/admin/dev/page.tsx
src/app/admin/layout.tsx
src/app/admin/page.tsx
src/app/admin/settings/ConfigToggleClient.tsx
src/app/admin/settings/page.tsx
src/app/admin/settings/settings.css
src/app/favicon_2.ico
src/app/favicon_old.ico
src/app/favicon.ico
src/app/globals.css
src/app/layout.tsx
src/db/connection.ts
src/db/models/Booking.ts
src/db/models/PriceConfig.ts
src/db/models/Property.ts
src/db/models/SystemConfig.ts
src/hooks/useClickOutside.ts
src/utils/calculatePrice.ts
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="src/actions/adminConfigActions.ts">
'use server'

import dbConnect from '@/db/connection';
import SystemConfig from '@/db/models/SystemConfig';
import { revalidatePath } from 'next/cache';

async function ensureSystemConfigExists() {
  await dbConnect();

  const defaultConfig = {
    _id: 'main',
    autoBlockOtherCabins: true,
    maxGuestsPerCabin: 6,
    childrenFreeAgeLimit: 13,
    highSeasonStart: undefined,
    highSeasonEnd: undefined,
  };

  try {
    const existingConfig = await SystemConfig.findById('main');

    if (!existingConfig) {
      await SystemConfig.create(defaultConfig);
      return;
    }

    let needsUpdate = false;
    const updates: any = {};

    if (typeof existingConfig.autoBlockOtherCabins !== 'boolean') {
      updates.autoBlockOtherCabins = defaultConfig.autoBlockOtherCabins;
      needsUpdate = true;
    }
    if (!existingConfig.maxGuestsPerCabin) {
      updates.maxGuestsPerCabin = defaultConfig.maxGuestsPerCabin;
      needsUpdate = true;
    }
    if (!existingConfig.childrenFreeAgeLimit) {
      updates.childrenFreeAgeLimit = defaultConfig.childrenFreeAgeLimit;
      needsUpdate = true;
    }

    if (needsUpdate) {
      await SystemConfig.findByIdAndUpdate('main', updates, { runValidators: false });
    }

  } catch (error) {
    console.error(error);
  }
}

export async function getSystemConfig() {
  await ensureSystemConfigExists();

  try {
    await dbConnect();
    const config = await SystemConfig.findById('main');
    
    if (!config) {
      return {
        autoBlockOtherCabins: true,
        highSeasonStart: null,
        highSeasonEnd: null,
        maxGuestsPerCabin: 6,
        childrenFreeAgeLimit: 13
      };
    }

    return {
      autoBlockOtherCabins: config.autoBlockOtherCabins,
      highSeasonStart: config.highSeasonStart,
      highSeasonEnd: config.highSeasonEnd,
      maxGuestsPerCabin: config.maxGuestsPerCabin,
      childrenFreeAgeLimit: config.childrenFreeAgeLimit
    };
  } catch (error) {
    console.error(error);
    return {
      autoBlockOtherCabins: true,
      highSeasonStart: null,
      highSeasonEnd: null,
      maxGuestsPerCabin: 6,
      childrenFreeAgeLimit: 13
    };
  }
}

export async function updateAutoBlockSetting(enabled: boolean): Promise<{ success: boolean; currentValue?: boolean; message: string }> {
  try {
    await dbConnect();
    const config = await SystemConfig.findByIdAndUpdate(
      'main',
      { autoBlockOtherCabins: enabled },
      { upsert: true, new: true, runValidators: true }
    );
    revalidatePath('/admin/settings');
    return { 
      success: true, 
      currentValue: config.autoBlockOtherCabins,
      message: enabled ? "W≈ÇƒÖczono blokadƒô." : "Wy≈ÇƒÖczono blokadƒô."
    };
  } catch (error) {
    console.error(error);
    return { success: false, message: "B≈ÇƒÖd zapisu." };
  }
}
</file>

<file path="src/app/_components/About/About.module.css">
.wrapper {
    max-width: 1000px;
    margin: 0 auto;
}

.title {
    margin-bottom: 30px;
    text-align: center;
    color: var(--text-main);
}
.title:after{
    content: '';
    display: block;
    width: 60px;
    height: 3px;
    background-color: var(--accent-color);
    margin: 15px auto 0;
}

.content p {
    margin-bottom: 20px;
    text-align: center;
}

.content strong {
    color: var(--accent-color);
}

.links {
    margin-top: 40px;
    border-top: 1px solid #eee;
    padding-top: 20px;
}

.link {
    display: block;
    color: var(--accent-color);
    text-decoration: none;
    font-weight: 600;
    transition: color 0.3s ease;
}

.link:hover {
    color: #1e8449;
    text-decoration: underline;
}

@media (min-width: 769px) {
    .title {
        margin-bottom: 50px;
    }

    .content p {
        text-align: justify;
    }
}
</file>

<file path="src/app/_components/About/About.tsx">
import Link from 'next/link';
import styles from './About.module.css';

export default function About() {
    return (
        <section id="about-us" className={styles.section}>
            <div className={styles.wrapper}>
                <h2 className={styles.title}>Serdecznie witamy w Wilczych Chatkach!</h2>
                
                <div className={styles.content}>
                    <p>
                        Szukasz miejsca, gdzie odpoczniesz od miejskiego zgie≈Çku, nacieszysz siƒô ciszƒÖ i spokojem,
                        a jednocze≈õnie bƒôdziesz blisko najwiƒôkszych atrakcji Pomorza?
                        Nasze dwa przytulne domki w <strong>Szumlesiu Kr√≥lewskim</strong>,
                        malowniczej wsi po≈Ço≈ºonej miƒôdzy <strong>Gda≈Ñskiem a Ko≈õcierzynƒÖ</strong>,
                        to idealne miejsce na rodzinny wypoczynek, urlop w gronie przyjaci√≥≈Ç czy romantyczny weekend we dwoje.
                    </p>
                    
                    <p>
                        Nasz obiekt po≈Ço≈ºony jest w spokojnej, zielonej okolicy, kt√≥ra gwarantuje wytchnienie 
                        od codziennego po≈õpiechu i bliski kontakt z naturƒÖ. Jest to fantastyczne miejsce dla rodzin 
                        z dzieƒámi, mi≈Ço≈õnik√≥w wycieczek rowerowych, spacerowicz√≥w oraz ka≈ºdego, kto pragnie 
                        na≈Çadowaƒá baterie w otoczeniu kaszubskich las√≥w i jezior.
                    </p>

                    <p>
                        Obiekt zlokalizowany jest w miejscowo≈õci Szumle≈õ Kr√≥lewski. 
                        Dziƒôki tej lokalizacji nasi Go≈õcie mogƒÖ cieszyƒá siƒô absolutnƒÖ ciszƒÖ i prywatno≈õciƒÖ, 
                        majƒÖc jednocze≈õnie szybki dostƒôp do regionalnych pere≈Çek, 
                        takich jak Kaszubski Park Krajobrazowy, szczyt Wie≈ºyca czy s≈Çynny dom do g√≥ry nogami w Szymbarku.
                    </p>

                    <p>
                        Po dniu pe≈Çnym wra≈ºe≈Ñ, do Pa≈Ñstwa dyspozycji oddajemy strefƒô relaksu z 
                        <strong> saunƒÖ infrared</strong> oraz klimatycznym <strong>jacuzzi ogrzewanym drewnem</strong>. 
                        W przypadku pyta≈Ñ prosimy o kontakt mailowy, telefoniczny lub poprzez formularz.
                    </p>
                </div>

                <div className={styles.links}>
                    <Link href="/#attractions" className={styles.link}>Przeczytaj wiƒôcej o atrakcjach w regionie &raquo;</Link>
                </div>
            </div>
        </section>
    );
}
</file>

<file path="src/app/_components/Attractions/Attractions.module.css">
.container {
    max-width: 1100px;
    margin: 0 auto;
}

.title {
    text-align: center;
    margin-bottom: 15px;
}
.title:after{
    content: '';
    display: block;
    width: 60px;
    height: 3px;
    background-color: var(--accent-color);
    margin: 15px auto 0;
}

.subtitle {
    text-align: center;
    color: #666;
    margin-bottom: 40px;
    font-size: 1rem;
    line-height: 1.5;
}

.grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 20px;
}

.card {
    background: #ffffff;
    padding: 24px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    display: flex;
    flex-direction: column;
    border: 1px solid #edf2ed;
}

.header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 12px;
}

.dot {
    width: 8px;
    height: 8px;
    background-color: var(--accent-color);
    border-radius: 50%;
    flex-shrink: 0;
}

.cardTitle {
    font-size: 1rem;
    color: var(--text-main);
    margin: 0;
    font-weight: bold;
}

.description {
    color: #555;
    line-height: 1.5;
    font-size: 0.95rem;
    margin: 0 0 20px 0;
    flex-grow: 1;
}
.distanceInfo {
    font-size: 0.9rem;
    color: #555; /* Twoja oliwkowa ziele≈Ñ */
    font-weight: 600;
    margin: 10px 0;
    display: block;
}

.link {
    color: var(--accent-color);
    text-decoration: none;
    font-weight: 600;
    font-size: 0.9rem;
    display: inline-block;
    transition: color 0.2s ease;
}

.link:hover {
    color: #1e8449;
    text-decoration: underline;
}

@media (min-width: 768px) {

    .grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (min-width: 1024px) {
    .grid {
        grid-template-columns: repeat(3, 1fr);
    }
    
    .card {
        transition: transform 0.3s ease;
    }
    
    .card:hover {
        transform: translateY(-8px);
    }
}
</file>

<file path="src/app/_components/GallerySection/GalerrySection.tsx">
import styles from './GallerySection.module.css';
import LightBoxGallery from '@components/LightBoxGallery/LightBoxGallery';


export default function GallerySection() {

    const images = [
        { full: '/gallery/wnetrze1.webp', thumb: '/gallery/wnetrze1-thumb.webp', description: 'Wnƒôtrze' },
        { full: '/gallery/wnetrze2.webp', thumb: '/gallery/wnetrze2-thumb.webp', description: 'Wnƒôtrze' },
        { full: '/gallery/wnetrze3.webp', thumb: '/gallery/wnetrze3-thumb.webp', description: 'Wnƒôtrze' },
        { full: '/gallery/wnetrze4.webp', thumb: '/gallery/wnetrze4-thumb.webp', description: 'Wnƒôtrze' },
        { full: '/gallery/wnetrze5.webp', thumb: '/gallery/wnetrze5-thumb.webp', description: 'Wnƒôtrze' },
        { full: '/gallery/wnetrze6.webp', thumb: '/gallery/wnetrze6-thumb.webp', description: 'Wnƒôtrze' },
        { full: '/gallery/wnetrze7.webp', thumb: '/gallery/wnetrze7-thumb.webp', description: 'Wnƒôtrze' },
        { full: '/gallery/sypialnia1.webp', thumb: '/gallery/sypialnia1-thumb.webp', description: 'Sypialnia' },
    ];

    return (
        <section id='gallery-section'>
            <div className={styles.title}>
                <h2>Galeria zdjƒôƒá</h2>
            </div>
            <div className={styles.galleryWrap}>
                <LightBoxGallery images={images} />
            </div>
            <a href="/gallery" className={styles.link}>Zobacz wiƒôcej &raquo;</a>
        </section>
    );
}
</file>

<file path="src/app/_components/GallerySection/GallerySection.module.css">
.title h2 {
    text-align: center;
}
.title:after{
    content: '';
    display: block;
    width: 60px;
    height: 3px;
    background-color: var(--accent-color);
    margin: 15px auto 0;
}
.galleryWrap {
    display: flex;
    justify-content: center;
}

.link {
    display: block;
    color: var(--accent-color);
    text-decoration: none;
    font-weight: 600;
    transition: color 0.3s ease;
    width: 100%;
    text-align: center;
}

.link:hover {
    color: #1e8449;
    text-decoration: underline;
}
</file>

<file path="src/app/_components/Header/Header.tsx">
'use client'
import { useState, useEffect, use } from 'react';
import TopBar from '@components/Navbar/TopBar';
import Navbar from '@components/Navbar/Navbar';
import styles from './Header.module.css';

export default function Header() {
    const [isScrolled, setIsScrolled] = useState(false);

    useEffect(() => {
        const scrollY = () => {
            if (window.scrollY > 100) {
                setIsScrolled(true);
            } else {
                setIsScrolled(false);
            }
        }
        window.addEventListener('scroll', scrollY);
        return ()=> window.removeEventListener('scroll', scrollY);
    }, [])

    return (
        <header className={styles.container + (isScrolled ? ' ' + styles.scrolled : '')}>
            <TopBar />
            <Navbar isSmaller={isScrolled} />
        </header>

    )

}
</file>

<file path="src/app/_components/Hero/Hero.module.css">
.hero {
    height: 100vh;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.content {
    text-align: center;
    color: var(--text-light);
    padding: 0 20px;
}

.content h1 {
    margin-bottom: 20px;
    text-transform: uppercase;
    letter-spacing: 2px;
}

.cta {
    display: inline-block;
    background-color: var(--accent-color);
    color: var(--text-light);
    padding: 15px 40px;
    text-transform: uppercase;
    font-weight: 600;
    border-radius: 4px;
    margin-top: 20px;
    transition: background var(--transition);
}
</file>

<file path="src/app/_components/Hero/Hero.tsx">
import Link from 'next/link';
import styles from './Hero.module.css';

export default function Hero() {
    return (
        <section className={styles.hero}>
            <div className={styles.overlay}>
                <div className={styles.content}>
                    <h1>Wilcze Chatki</h1>
                    <p>Odkryj spok√≥j w sercu Kaszub ‚Äì Szumle≈õ Kr√≥lewski</p>
                    <Link href="#services" className={styles.cta}>
                        Sprawd≈∫ ofertƒô
                    </Link>
                </div>
            </div>
        </section>
    );
}
</file>

<file path="src/app/_components/Hero/HeroSlider.module.css">
.heroSlider {
  position: relative;
  width: 100dvw;
  height: 80vh;
  background: #000;
  overflow: hidden;
  opacity: 0;
  animation: fadeInSlider 1s ease-out forwards;
}

.sliderMain,
.slide {
  position: absolute;
  inset: 0;
}

.slide {
  opacity: 0;
  visibility: hidden;
  transition: opacity 1.2s ease-in-out;
  z-index: 1;
}

.slide.active {
  opacity: 1;
  visibility: visible;
  z-index: 2;
}

.overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(to bottom, #74747454, #000000e6);
  z-index: 2;
}

.slideImg {
  width: 100%;
  height: 100%;
  object-fit: cover;
  animation: kenBurns 20s linear infinite alternate;
  filter: blur(1px);
}

.slideContent {
  position: absolute;
  top: 30dvh;
  left: 20px;
  right: 20px;
  color: #fff;
  z-index: 10;
}

.slideSubtitle,
.slideTitle,
.slideTopic,
.slideDesc,
.slideActions {
  opacity: 0;
  transform: translateY(30px);
  text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.7);
  transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.slide.active .slideSubtitle,
.slide.active .slideTitle,
.slide.active .slideTopic,
.slide.active .slideDesc,
.slide.active .slideActions {
  opacity: 1;
  transform: translateY(0);
}

.slide.active .slideSubtitle {
  transition-delay: 0.4s;
}

.slide.active .slideTitle {
  transition-delay: 0.6s;
}

.slide.active .slideTopic {
  transition-delay: 0.8s;
}

.slide.active .slideDesc {
  transition-delay: 1.0s;
}

.slide.active .slideActions {
  transition-delay: 1.2s;
}

.slideTitle {
  font-size: 2.3rem;
}

.slideSubtitle {
  display: block;
  font-size: 1rem;
  margin-bottom: 5px;
}


.slideTopic {
  font-size: 1.5rem;
  color: var(--accent-color);
  margin: 5px 0 10px;
}

.slideDesc {
  font-size: 1rem;
  line-height: 1.4;
  margin-bottom: 20px;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
   color: #fff;
}

.slideActions {
  display: flex;
  gap: 10px;
}

.btnPrimary,
.btnOutline {
  padding: 10px 18px;
  font-size: 0.75rem;
  font-weight: 700;
  text-transform: uppercase;
  border: none;
  cursor: pointer;
  transition: 0.3s;
}

.btnPrimary {
  background: var(--accent-color);
  color: #fff;
}

.btnOutline {
  background: transparent;
  border: 1px solid #fff;
  color: #fff;
}

.btnPrimary:hover {
  background: var(--bg-white);
  color: var(--text-main);
}

.btnOutline:hover {
  background: #fff;
  color: #000;
}

.sliderControls {
  position: absolute;
  bottom: 20px;
  left: 0;
  width: 100%;
  z-index: 100;
  padding: 0 20px;
  box-sizing: border-box;
}

.thumbnailsContainer {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-bottom: 15px;
  padding-bottom: 5px;
  scrollbar-width: none;
}

.thumbnailsContainer::-webkit-scrollbar {
  display: none;
}

.thumbItem {
  width: 70px;
  height: 90px;
  flex-shrink: 0;
  border-radius: 8px;
  overflow: hidden;
  position: relative;
  opacity: 0.5;
  transition: 0.4s;
  border: 2px solid rgba(255, 255, 255, 0.2);
  cursor: pointer;
}

.activeThumb {
  opacity: 1;
  border-color: var(--accent-color);
  transform: translateY(-5px);
}

.thumbItem img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.thumbProgress {
  position: absolute;
  bottom: 0;
  left: 0;
  height: 4px;
  background: var(--accent-color);
  width: 0;
  animation: progress 7.5s linear forwards;
}

.bottomNav {
  display: flex;
  flex-direction: column;
  gap: 15px;
  justify-content: space-between;
  align-items: center;
  display: none;
}

.paginationDots {
  display: flex;
  gap: 5px;
}

.dot {
  width: 15px;
  height: 2px;
  background: rgba(255, 255, 255, 0.2);
}

.activeDot {
  background: #8da242;
  width: 30px;
}

.arrows {
  display: flex;
  gap: 15px;
}

.arrow {
  background: none;
  border: 1px solid rgba(255, 255, 255, 0.4);
  color: #fff;
  width: 35px;
  height: 35px;
  border-radius: 50%;
  cursor: pointer;
  transition: 0.3s;
}

.arrow:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: #fff;
}

@keyframes fadeInSlider {
  to {
    opacity: 1;
  }
}

@keyframes kenBurns {
  from {
    transform: scale(1);
  }

  to {
    transform: scale(1.15);
  }
}

@keyframes progress {
  to {
    width: 100%;
  }
}

@media (min-width: 500px) {
  .slideTitle {
    font-size: 3rem;
  }

  .slideTopic {
    font-size: 1.8rem;
  }

  .slideSubtitle {
    font-size: 1.6rem;
  }

}

@media (max-height: 1000px) {
  .slideContent {
    top: 25%;
  }
}

@media (min-width: 1024px) {
  .overlay {
    background: linear-gradient(to right, rgba(0, 0, 0, 0.8) 0%, transparent 60%);
  }

  .slideContent {
    bottom: unset;
    top: 50%;
    transform: translateY(-50%);
    left: 8%;
    max-width: 600px;
  }

  .slideTitle {
    margin: 1rem 0;
    letter-spacing: 1.1px;
  }

  .slideTopic {
    font-size: 2.5rem;
  }

  .slideDesc {
    font-size: 1.2rem;
    -webkit-line-clamp: unset;
  }

  .sliderControls {
    bottom: 50px;
    padding: 0 8%;
    display: flex;
    flex-direction: row-reverse;
    justify-content: space-between;
    align-items: center;
  }

  .thumbnailsContainer {
    margin-bottom: 0;
    gap: 20px;
  }

  .thumbItem {
    width: 100px;
    height: 150px;
  }

  .bottomNav {
    flex-direction: column;
    align-items: flex-start;
    gap: 30px;
    display: flex;
  }

  .paginationDots {
    display: none;
  }
}

@media (max-height: 700px) {
  .slideContent {
    top: 10%;
  }
}
</file>

<file path="src/app/_components/LightBoxGallery/LightBoxGallery.tsx">
'use client'

import { useEffect, useRef } from 'react';
import styles from './LightBoxGallery.module.css';
import 'glightbox/dist/css/glightbox.min.css';

interface ImageProps {
  full: string;
  thumb: string;
  description?: string;
}

interface LightBoxGalleryProps {
  images: ImageProps[];
}

export default function LightBoxGallery({ images }: LightBoxGalleryProps) {
  const lightboxRef = useRef<any>(null);

  useEffect(() => {
    let lightboxInstance: any = null;

    const initLightbox = async () => {
      const GLightboxModule = (await import('glightbox')).default;

      // Inicjalizujemy lightbox
      lightboxInstance = GLightboxModule({
        touchNavigation: true,
        loop: true,
        selector: '.glightbox',
        openEffect: 'zoom',
        closeEffect: 'fade',
      });

      lightboxRef.current = lightboxInstance;
    };

    initLightbox();

    return () => {
      if (lightboxInstance) {
        lightboxInstance.destroy();
      }
    };
  }, [images]);

  return (
    <div className={styles.galleryWrapper}>
      <div className={styles.gallery}>
        {images.map((img, index) => (
          <a
            href={img.full}
            className={`glightbox ${styles.imageLink}`}
            data-gallery="my-gallery"
            key={`${img.full}-${index}`}
          >
            <img
              src={img.thumb}
              alt={img.description || `Gallery item ${index + 1}`}
              className={styles.image}
            />
            <div className={styles.caption}>
              <span>{img.description}</span>
            </div>
          </a>
        ))}
      </div>
    </div>
  );
}
</file>

<file path="src/app/_components/Navbar/TopBar.module.css">
.container {
    height: 31px;
    background-color: var(--primary-color);
    padding: 2px 0;
    width: 100%;
}

.inner {
    max-width: 1200px;
    margin: 0 auto;
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 20px;
}

.contactInfo {
    display: flex;
    align-items: center;
}

.contactInfo a {
    color: var(--text-light);
    font-size: 12px;
    margin-right: 20px;
    opacity: 0.9;
    transition: color var(--transition);
    text-decoration: none;
}

.socialIcons {
    display: flex;
    align-items: center;
}

.socialIcons a {
    color: var(--text-light);
    font-size: 18px;
    opacity: 0.9;
    transition: color var(--transition), transform var(--transition);
    text-decoration: none;
}

.socialIcons a:hover {
    color: #1877F2;
    opacity: 1;
    transform: scale(1.1);
}
</file>

<file path="src/app/_components/Navbar/TopBar.tsx">
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';
import { faFacebook } from '@fortawesome/free-brands-svg-icons';
import styles from './TopBar.module.css';

export default function TopBar() {
    return (
        <div className={styles.container}>
            <div className={styles.inner}>
                <div className={styles.contactInfo}>
                    <a href="tel:+48668388570">+48 668 388 570</a>
                    <a href="mailto:kontakt@wilczechatki.pl">kontakt@wilczechatki.pl</a>
                </div>
                <div className={styles.socialIcons}>
                    <a 
                        href="https://facebook.com/profile.php?id=61584455637648"
                        target="_blank" 
                        rel="noopener noreferrer"
                        aria-label="Facebook"
                    >
                        <FontAwesomeIcon 
                            icon={faFacebook} 
                            style={{ width: '20px', height: '20px' }} 
                        />
                    </a>
                </div>
            </div>
        </div>
    );
}
</file>

<file path="src/app/_components/QuantitySelector/QuantityPicker.tsx">
'use client';

import styles from './QuantityPicker.module.css';

interface QuantityPickerProps {
    value: number;
    onIncrement: () => void;
    onDecrement: () => void;
    min?: number;
    max?: number;
}

export default function QuantityPicker({
    value,
    onIncrement,
    onDecrement,
    min = 0,
    max = 10
}: QuantityPickerProps) {
    return (
        <div className={styles.container}>
            <div className={styles.controls}>
                <button
                    type="button"
                    className={styles.button}
                    onClick={onDecrement}
                    disabled={value <= min}
                >
                    -
                </button>
                <span className={styles.value}>{value}</span>
                <button
                    type="button"
                    className={styles.button}
                    onClick={onIncrement}
                    disabled={value >= max}
                >
                    +
                </button>
            </div>
        </div>
    );
}
</file>

<file path="src/app/(root)/gallery/page.module.css">
.gallerySection_container {
    padding: 50px 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    background-color: var(--secondary-color);
}

.gallerySection_title h2 {
    position: relative;
    display: inline-block;
    margin-bottom: 30px;
}

.gallerySection_title h2:before,
.gallerySection_title h2:after {
    content: '';
    background: linear-gradient(to left, #0000009c, #8a8a8a, #d3343400);
    position: absolute;
    width: 50%;
    height: 2px;
    top: 50%;
    border-radius: 10px;
}

.gallerySection_title h2:before {
    right: 115%;
}

.gallerySection_title h2:after {
    left: 115%;
    background: linear-gradient(to right, #0000009c, #8a8a8a, #d3343400);
}

.gallerySection_galleryWrap {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    padding: 0 20px;
}

.backButton_wrapper {
    display: flex;
    justify-content: center;
    width: 100%;
    margin: 40px auto;
}

.backButton {
    display: flex; 
    align-items: center; 
    align-items: center;
    gap: 8px;              
    color: var(--accent-color);
    text-decoration: none;
    font-weight: 600;
    transition: color var(--transition);
}

.backButton:hover {
    color: #1e8449; 
    text-decoration: underline;
}

.icon {
    display: inline-block;  /* Dodane: niezbƒôdne, aby transform (translateX) zadzia≈Ça≈Ç na spanie */
    transition: transform var(--transition);
    line-height: 1; 
    font-size: 18px; 
    text-decoration: none;       /* Poprawia pozycjonowanie optyczne encji HTML */
}

.backButton:hover .icon {
    transform: translateX(-8px); 
}
</file>

<file path="src/app/(root)/gallery/page.tsx">
'use client'

import Link from 'next/link';
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';
import { faArrowLeft } from '@fortawesome/free-solid-svg-icons';
import styles from './page.module.css';
import LightBoxGallery from '@components/LightBoxGallery/LightBoxGallery';

const images = [
    { full: '/gallery/wnetrze1.webp', thumb: '/gallery/wnetrze1-thumb.webp', description: 'Wnƒôtrze' },
    { full: '/gallery/wnetrze2.webp', thumb: '/gallery/wnetrze2-thumb.webp', description: 'Wnƒôtrze' },
    { full: '/gallery/wnetrze3.webp', thumb: '/gallery/wnetrze3-thumb.webp', description: 'Wnƒôtrze' },
    { full: '/gallery/wnetrze4.webp', thumb: '/gallery/wnetrze4-thumb.webp', description: 'Wnƒôtrze' },
    { full: '/gallery/wnetrze5.webp', thumb: '/gallery/wnetrze5-thumb.webp', description: 'Wnƒôtrze' },
    { full: '/gallery/wnetrze6.webp', thumb: '/gallery/wnetrze6-thumb.webp', description: 'Wnƒôtrze' },
    { full: '/gallery/wnetrze7.webp', thumb: '/gallery/wnetrze7-thumb.webp', description: 'Wnƒôtrze' },
    { full: '/gallery/sypialnia1.webp', thumb: '/gallery/sypialnia1-thumb.webp', description: 'Sypialnia' },
    { full: '/gallery/sypialnia2.webp', thumb: '/gallery/sypialnia2-thumb.webp', description: 'Sypialnia' },
    { full: '/gallery/sypialnia3.webp', thumb: '/gallery/sypialnia3-thumb.webp', description: 'Sypialnia' },
    { full: '/gallery/sypialnia4.webp', thumb: '/gallery/sypialnia4-thumb.webp', description: 'Sypialnia' },
    { full: '/gallery/lazienka1.webp', thumb: '/gallery/lazienka1-thumb.webp', description: '≈Åazienka' },
    { full: '/gallery/kuchnia1.webp', thumb: '/gallery/kuchnia1-thumb.webp', description: 'Kuchnia' },
    { full: '/gallery/kuchnia2.webp', thumb: '/gallery/kuchnia2-thumb.webp', description: 'Kuchnia' },
    { full: '/gallery/kuchnia3.webp', thumb: '/gallery/kuchnia3-thumb.webp', description: 'Kuchnia' },
    { full: '/gallery/zagroda1.webp', thumb: '/gallery/zagroda1-thumb.webp', description: 'Zagroda' },
    { full: '/gallery/zagroda2.webp', thumb: '/gallery/zagroda2-thumb.webp', description: 'Zagroda' },
    { full: '/gallery/zagroda3.webp', thumb: '/gallery/zagroda3-thumb.webp', description: 'Zagroda' },
    { full: '/gallery/zwierzeta1.webp', thumb: '/gallery/zwierzeta1-thumb.webp', description: 'Zwierzƒôta' },
    { full: '/gallery/zwierzeta2.webp', thumb: '/gallery/zwierzeta2-thumb.webp', description: 'Zwierzƒôta' },
    { full: '/gallery/zwierzeta3.webp', thumb: '/gallery/zwierzeta3-thumb.webp', description: 'Zwierzƒôta' },
    { full: '/gallery/zwierzeta4.webp', thumb: '/gallery/zwierzeta4-thumb.webp', description: 'Zwierzƒôta' },
    { full: '/gallery/zwierzeta5.webp', thumb: '/gallery/zwierzeta5-thumb.webp', description: 'Zwierzƒôta' },
    { full: '/gallery/okolica1.webp', thumb: '/gallery/okolica1-thumb.webp', description: 'Okolica' },
    { full: '/gallery/okolica2.webp', thumb: '/gallery/okolica2-thumb.webp', description: 'Okolica' },
    { full: '/gallery/okolica3.webp', thumb: '/gallery/okolica3-thumb.webp', description: 'Okolica' },
    { full: '/gallery/okolica4.webp', thumb: '/gallery/okolica4-thumb.webp', description: 'Okolica' },
    { full: '/gallery/okolica5.webp', thumb: '/gallery/okolica5-thumb.webp', description: 'Okolica' }
];

export default function Gallery() {
    return (
        <div className={styles.gallerySection_container}>
            <div className={styles.gallerySection_title}>
                <h2>Galeria zdjƒôƒá</h2>
            </div>
            <div className={styles.gallerySection_galleryWrap}>
                <LightBoxGallery images={images} />
            </div>

            <div className={styles.backButton_wrapper}>
                <Link href="/#gallery-section" className={styles.backButton}>
                   <span className={styles.icon}>&laquo;</span> Powr√≥t
                </Link>
            </div>
        </div>
    );
}
</file>

<file path="src/app/(root)/layout.tsx">
import Header from '@components/Header/Header';
import Footer from '@components/Footer/Footer';

export default function ClientLayout({
    children,
}: {
    children: React.ReactNode;
}) {
    return (
        <>
            <Header />
            <main>{children}</main>
            <Footer />
        </>
    );
}
</file>

<file path="src/app/(root)/page.module.css">
.main {
  margin-top: 65px;
}
</file>

<file path="src/app/(root)/page.tsx">
import HeroSlider from "@components/Hero/HeroSlider";
import About from "@components/About/About";
import Services from "@components/Services/Services";
import GallerySection from "@components/GallerySection/GalerrySection";
import Attractions from "@components/Attractions/Attractions";
import Contact from "@components/Contact/Contact";
import styles from "./page.module.css";

export default function Home() {
    return (
        <main className={styles.main}>
            <HeroSlider />
            <About />
            <Services />
            <GallerySection />
            <Attractions />
            <Contact />
        </main>
    );
}
</file>

<file path="src/app/admin/admin.module.css">
:global(body) {
  margin-top: 0px;
}

:global(body.mobile-menu-open) {
  overflow: hidden;
}

.adminLayout {
  display: flex;
  min-height: 100vh;
  background-color: #f4f6f9;
}

.mobileOverlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.6);
  z-index: 45;
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
}

.mobileOverlay.visible {
  opacity: 1;
  pointer-events: auto;
}

.adminSidebar {
  width: 280px;
  background-color: #1e293b;
  color: #cbd5e1;
  display: flex;
  flex-direction: column;
  position: fixed;
  height: 100vh;
  overflow-y: auto;
  z-index: 50;
  transition: transform 0.3s ease;
  left: auto;
  right: 0;
  transform: translateX(100%);
}

.adminSidebar.mobileOpen {
  transform: translateX(0);
  box-shadow: -5px 0 15px rgba(0, 0, 0, 0.2);
}

.sidebarHeader {
  padding: 24px 20px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  background-color: #0f172a;
}

.sidebarHeader h2 {
  margin: 0;
  font-size: 1.25rem;
  font-weight: 700;
  color: #fff;
  letter-spacing: 0.5px;
}

.sidebarNav {
  flex: 1;
  padding: 20px 0;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.navGroupTitle {
  padding: 12px 24px 8px;
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: #64748b;
  font-weight: 700;
  margin-top: 10px;
}

.navLink, .navLinkStatic {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 24px;
  color: #cbd5e1;
  text-decoration: none;
  font-size: 0.95rem;
  transition: all 0.2s ease;
  border-left: 3px solid transparent;
  cursor: pointer;
  width: 100%;
  box-sizing: border-box;
}

.navLink:hover, .navLinkStatic:hover {
  background-color: rgba(255, 255, 255, 0.05);
  color: #fff;
}

.navLink.active, .navLinkStatic.active {
  background-color: rgba(59, 130, 246, 0.15);
  color: #60a5fa;
  border-left-color: #60a5fa;
  font-weight: 600;
}

.navIcon {
  font-size: 1.2rem;
  width: 24px;
  text-align: center;
  flex-shrink: 0;
}

.submenu {
  background-color: #0f172a;
  overflow: hidden;
  max-height: 0;
  transition: max-height 0.3s ease-out;
  display: flex;
  flex-direction: column;
}

.submenu.open {
  max-height: 300px;
}

.subLink {
  padding: 10px 24px 10px 50px;
  font-size: 0.9rem;
  color: #94a3b8;
  text-decoration: none;
  display: block;
  width: 100%;
  box-sizing: border-box;
}

.subLink:hover {
  color: #fff;
  background-color: rgba(255, 255, 255, 0.02);
}

.subLink.active {
  color: #fff;
  font-weight: 600;
}

.sidebarFooter {
  padding: 20px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.btnLogout {
  width: 100%;
  padding: 10px;
  background: rgba(239, 68, 68, 0.1);
  color: #ef4444;
  border: 1px solid rgba(239, 68, 68, 0.2);
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.9rem;
  transition: all 0.2s;
}

.btnLogout:hover {
  background: rgba(239, 68, 68, 0.2);
}

.adminContent {
  flex: 1;
  margin-left: 0;
  width: 100%;
  padding: 20px 15px;
  box-sizing: border-box;
  transition: filter 0.3s ease;
}

.mobileToggle {
  display: block;
  position: fixed;
  top: 15px;
  right: 15px;
  left: auto;
  z-index: 60;
  background: #1e293b;
  color: white;
  border: none;
  padding: 8px 12px;
  border-radius: 6px;
  cursor: pointer;
}

@media (min-width: 769px) {
  .adminSidebar {
    left: 0;
    right: auto;
    transform: translateX(0);
    width: 260px;
  }

  .adminSidebar.mobileOpen {
    box-shadow: none;
  }

  .adminContent {
    margin-left: 260px;
    width: calc(100% - 260px);
    padding: 30px;
  }

  .mobileToggle {
    display: none;
  }
}
</file>

<file path="src/app/admin/bookings/add/page.module.css">
.container {
  max-width: 900px;
  margin: 0 auto;
}

.header {
  margin-bottom: 30px;
}

.header h1 {
  font-size: 1.8rem;
  color: #1e293b;
  margin: 0 0 8px 0;
}

.header p {
  color: #64748b;
  margin: 0;
}

.formCard {
  background: white;
  padding: 30px;
  border-radius: 12px;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

.sectionTitle {
  font-size: 1.1rem;
  font-weight: 700;
  color: #334155;
  margin: 25px 0 15px 0;
  padding-bottom: 8px;
  border-bottom: 2px solid #f1f5f9;
}

.sectionTitle:first-child {
  margin-top: 0;
}

.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
}

.inputGroup {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.inputGroup label {
  font-size: 0.9rem;
  font-weight: 600;
  color: #475569;
}

.inputGroup input,
.inputGroup select,
.inputGroup textarea {
  padding: 10px 12px;
  border: 1px solid #cbd5e1;
  border-radius: 6px;
  font-size: 1rem;
  font-family: inherit;
  transition: border-color 0.2s;
}

.inputGroup input:focus,
.inputGroup select:focus,
.inputGroup textarea:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.actions {
  display: flex;
  justify-content: flex-end;
  gap: 15px;
  margin-top: 30px;
  padding-top: 20px;
  border-top: 1px solid #f1f5f9;
}

.btnCancel {
  padding: 10px 20px;
  background: #f1f5f9;
  color: #475569;
  border: none;
  border-radius: 6px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s;
}

.btnCancel:hover {
  background: #e2e8f0;
}

.btnSubmit {
  padding: 10px 24px;
  background: #22c55e;
  color: white;
  border: none;
  border-radius: 6px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s;
}

.btnSubmit:hover:not(:disabled) {
  background: #16a34a;
}

.btnSubmit:disabled {
  opacity: 0.7;
  cursor: not-allowed;
}

@media (max-width: 600px) {
  .formCard {
    padding: 20px;
  }
  .actions {
    flex-direction: column-reverse;
  }
  .btnCancel, .btnSubmit {
    width: 100%;
  }
}
</file>

<file path="src/app/admin/bookings/calendar/page.tsx">
'use client'

import { useEffect, useState } from 'react';
import { getCalendarData, CalendarDay, BookingDetails } from '@/actions/getCalendarData';
import styles from './page.module.css';

const WEEK_DAY_NAMES = {
  pl: ['Nd', 'Pn', 'Wt', '≈ör', 'Cz', 'Pt', 'So'],
  en: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']
};

const CURRENT_LANG = 'pl';

const MONTH_NAMES = [
  'Stycze≈Ñ', 'Luty', 'Marzec', 'Kwiecie≈Ñ', 'Maj', 'Czerwiec',
  'Lipiec', 'Sierpie≈Ñ', 'Wrzesie≈Ñ', 'Pa≈∫dziernik', 'Listopad', 'Grudzie≈Ñ'
];

const BookingTooltip = ({ details }: { details: BookingDetails }) => {
  if (!details) return null;

  return (
    <div className={styles.tooltip}>
      <div className={styles.tooltipHeader}>
        <h4 className={styles.guestNameText}>{details.guestName}</h4>
        <span className={styles.badge}>{details.status === 'confirmed' ? 'Potwierdzona' : 'Zablokowana'}</span>
      </div>

      <div className={styles.tooltipRow}>
        <span className={styles.label}>üìÖ Termin:</span>
        <span className={styles.valueText}>{details.startDate} do {details.endDate} <br /><small>({details.durationDays} dni)</small></span>
      </div>

      <div className={styles.tooltipRow}>
        <span className={styles.label}>üë• Go≈õcie:</span>
        <span className={styles.valueText}>{details.numberOfGuests} os√≥b</span>
      </div>

      <div className={styles.tooltipRow}>
        <span className={styles.label}>üí∞ Cena:</span>
        <span className={`${styles.valueText} ${styles.priceValue}`}>{details.totalPrice.toFixed(2)} PLN</span>
      </div>

      <div className={styles.tooltipSection}>
        <div className={styles.tooltipRow}>
          <span className={styles.label}>üìß Email:</span>
          <a href={`mailto:${details.guestEmail}`} className={`${styles.valueText} ${styles.contactValue} ${styles.clickableLink}`}>
            {details.guestEmail}
          </a>
        </div>
        <div className={styles.tooltipRow}>
          <span className={styles.label}>üìû Telefon:</span>
          <a href={`tel:${details.guestPhone}`} className={`${styles.valueText} ${styles.contactValue} ${styles.clickableLink}`}>
            {details.guestPhone}
          </a>
        </div>
      </div>
    </div>
  );
};

export default function Calendar() {
  const [data, setData] = useState<CalendarDay[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  const currentDate = new Date();
  const [selectedYear, setSelectedYear] = useState(currentDate.getFullYear());
  const [selectedMonth, setSelectedMonth] = useState(currentDate.getMonth());

  useEffect(() => {
    const loadData = async () => {
      try {
        setLoading(true);
        setError(null);
        const daysInMonth = new Date(selectedYear, selectedMonth + 1, 0).getDate();
        const startDate = new Date(selectedYear, selectedMonth, 1);
        const startDateStr = startDate.toISOString().split('T')[0];

        const calendarData = await getCalendarData(daysInMonth, startDateStr);
        setData(calendarData);
      } catch (err) {
        console.error(err);
        setError('Nie uda≈Ço siƒô za≈Çadowaƒá kalendarza.');
      } finally {
        setLoading(false);
      }
    };
    loadData();
  }, [selectedYear, selectedMonth]);

  const currentYear = new Date().getFullYear();
  const years = Array.from({ length: 10 }, (_, i) => currentYear - 2 + i);

  const handlePrevMonth = () => {
    if (selectedMonth === 0) {
      setSelectedMonth(11);
      setSelectedYear(selectedYear - 1);
    } else {
      setSelectedMonth(selectedMonth - 1);
    }
  };

  const handleNextMonth = () => {
    if (selectedMonth === 11) {
      setSelectedMonth(0);
      setSelectedYear(selectedYear + 1);
    } else {
      setSelectedMonth(selectedMonth + 1);
    }
  };

  if (error) return <div className={styles.container}>{error}</div>;

  const cabinIds = data.length > 0 ? Object.keys(data[0].cabins) : [];

  const getDayInfo = (dateStr: string) => {
    const date = new Date(dateStr + 'T00:00:00');
    const dayIndex = date.getDay();
    const dayName = WEEK_DAY_NAMES[CURRENT_LANG][dayIndex];

    let dayClass = '';
    if (dayIndex === 0 || dayIndex === 6) {
      dayClass = styles.weekendCell;
    }

    return { dayName, dayClass, dayIndex };
  };

  return (
    <div className={styles.container}>
      <div className={styles.headerControls}>
        <button onClick={handlePrevMonth} className={styles.navButton} title="Poprzedni miesiƒÖc">
          &#8249;
        </button>

        <select
          value={selectedMonth}
          onChange={(e) => setSelectedMonth(Number(e.target.value))}
          className={styles.selectInput}
          aria-label="Wybierz miesiƒÖc"
          disabled={loading}
        >
          {MONTH_NAMES.map((name, index) => (
            <option key={name} value={index}>{name}</option>
          ))}
        </select>

        <select
          value={selectedYear}
          onChange={(e) => setSelectedYear(Number(e.target.value))}
          className={styles.selectInput}
          aria-label="Wybierz rok"
          disabled={loading}
        >
          {years.map((year) => (
            <option key={year} value={year}>{year}</option>
          ))}
        </select>

        <button onClick={handleNextMonth} className={styles.navButton} title="Nastƒôpny miesiƒÖc">
          &#8250;
        </button>
      </div>

      <div className={styles.tableWrapper}>
        <table className={styles.calendarTable}>
          <thead>
            <tr>
              <th className={styles.stickyCol}>Data</th>
              {cabinIds.map((id, idx) => (
                <th key={id}>Domek {idx + 1}</th>
              ))}
            </tr>
          </thead>
          <tbody>
            {loading ? (
              <tr>
                <td colSpan={cabinIds.length + 1} className={styles.loadingCell}>
                  ≈Åadowanie...
                </td>
              </tr>
            ) : data.length === 0 ? (
              <tr>
                <td colSpan={cabinIds.length + 1} className={styles.emptyCell}>
                  Brak danych do wy≈õwietlenia.
                </td>
              </tr>
            ) : (
              data.map((row) => {
                const { dayName, dayClass } = getDayInfo(row.date);

                return (
                  <tr key={row.date}>
                    <td className={`${styles.stickyCol} ${styles.dateCell} ${dayClass}`}>
                      <div className={styles.dateContent}>
                        <span className={styles.dateDay}>{row.datePL}</span>
                        <span className={styles.dateWeekday}>({dayName})</span>
                      </div>
                    </td>
                    {cabinIds.map((id) => {
                      const cellData = row.cabins[id];

                      if (!cellData) {
                        return (
                          <td key={id} className={`${styles.cell} ${styles.free}`}>
                            <span>Wolny</span>
                          </td>
                        );
                      }

                      const hasDetails = cellData.status === 'booked' || cellData.status === 'cleaning';

                      let statusText = '';
                      let cellClass = styles.cell;

                      switch (cellData.status) {
                        case 'booked': statusText = 'Zajƒôty'; cellClass += ` ${styles.booked}`; break;
                        case 'cleaning': statusText = 'SprzƒÖtanie'; cellClass += ` ${styles.cleaning}`; break;
                        case 'blocked_sys': statusText = 'Zabl.'; cellClass += ` ${styles.blockedSys}`; break;
                        default: statusText = 'Wolny'; cellClass += ` ${styles.free}`;
                      }

                      return (
                        <td
                          key={id}
                          className={cellClass}
                          style={{ position: hasDetails ? 'relative' : 'static' }}
                        >
                          <span className={styles.statusText}>{statusText}</span>

                          {hasDetails && cellData.details && (
                            <div className={styles.tooltipContainer}>
                              <BookingTooltip details={cellData.details} />
                            </div>
                          )}
                        </td>
                      );
                    })}
                  </tr>
                );
              })
            )}
          </tbody>
        </table>
      </div>

      {!loading && data.length > 0 && (
        <div className={styles.legend}>
          <span><span className={`${styles.dot} ${styles.bookedDot}`}></span> Zajƒôty</span>
          <span><span className={`${styles.dot} ${styles.cleaningDot}`}></span> SprzƒÖtanie</span>
          <span><span className={`${styles.dot} ${styles.blockedSysDot}`}></span> Zabl. (Auto)</span>
          <span><span className={`${styles.dot} ${styles.freeDot}`}></span> Wolny</span>
        </div>
      )}
    </div>
  );
}
</file>

<file path="src/app/admin/bookings/list/[id]/EditBookingForm.tsx">
'use client';

import { useState } from 'react';
import { updateBooking } from '@/actions/adminBookingActions';
import { useRouter } from 'next/navigation';
import styles from './page.module.css';
import { IBooking } from '@/db/models/Booking';

interface FormData {
  guestName: string;
  guestEmail: string;
  guestPhone: string;
  numberOfGuests: number;
  totalPrice: number;
  status: string;
  startDate: string;
  endDate: string;
}

export default function EditBookingForm({ initialData }: { initialData: any }) {
  const router = useRouter();
  const [loading, setLoading] = useState(false);
  const [message, setMessage] = useState<{type: 'success'|'error', text: string} | null>(null);

  // Formatowanie dat do input type="date" (YYYY-MM-DD)
  const formatDate = (date: Date) => new Date(date).toISOString().split('T')[0];

  const [form, setForm] = useState<FormData>({
    guestName: initialData.guestName || '',
    guestEmail: initialData.guestEmail || '',
    guestPhone: initialData.guestPhone || '',
    numberOfGuests: initialData.numberOfGuests || 0,
    totalPrice: initialData.totalPrice || 0,
    status: initialData.status,
    startDate: formatDate(initialData.startDate),
    endDate: formatDate(initialData.endDate),
  });

  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {
    const { name, value } = e.target;
    setForm(prev => ({
      ...prev,
      [name]: name === 'numberOfGuests' || name === 'totalPrice' ? Number(value) : value
    }));
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setLoading(true);
    setMessage(null);

    const result = await updateBooking(initialData._id, form);

    if (result.success) {
      setMessage({ type: 'success', text: 'Zapisano zmiany pomy≈õlnie!' });
      router.refresh();
    } else {
      setMessage({ type: 'error', text: result.message || 'WystƒÖpi≈Ç b≈ÇƒÖd.' });
    }
    setLoading(false);
  };

  return (
    <form onSubmit={handleSubmit} className={styles.form}>
      {message && (
        <div className={`${styles.alert} ${message.type === 'success' ? styles.alertSuccess : styles.alertError}`}>
          {message.text}
        </div>
      )}

      <div className={styles.formGrid}>
        <div className={styles.inputGroup}>
          <label>Imiƒô i Nazwisko</label>
          <input name="guestName" value={form.guestName} onChange={handleChange} required />
        </div>
        <div className={styles.inputGroup}>
          <label>Email</label>
          <input name="guestEmail" type="email" value={form.guestEmail} onChange={handleChange} required />
        </div>
        <div className={styles.inputGroup}>
          <label>Telefon</label>
          <input name="guestPhone" type="tel" value={form.guestPhone} onChange={handleChange} required />
        </div>
        <div className={styles.inputGroup}>
          <label>Liczba Go≈õci</label>
          <input name="numberOfGuests" type="number" min="1" value={form.numberOfGuests} onChange={handleChange} />
        </div>
        <div className={styles.inputGroup}>
          <label>Data Przyjazdu</label>
          <input name="startDate" type="date" value={form.startDate} onChange={handleChange} required />
        </div>
        <div className={styles.inputGroup}>
          <label>Data Wyjazdu</label>
          <input name="endDate" type="date" value={form.endDate} onChange={handleChange} required />
        </div>
        <div className={styles.inputGroup}>
          <label>Cena Ca≈Çkowita (PLN)</label>
          <input name="totalPrice" type="number" step="0.01" value={form.totalPrice} onChange={handleChange} required />
        </div>
        <div className={styles.inputGroup}>
          <label>Status</label>
          <select name="status" value={form.status} onChange={handleChange}>
            <option value="pending">OczekujƒÖca</option>
            <option value="confirmed">Potwierdzona</option>
            <option value="blocked">Zablokowana</option>
            <option value="cancelled">Anulowana</option>
          </select>
        </div>
      </div>

      <div className={styles.formActions}>
        <button type="submit" className={styles.saveBtn} disabled={loading}>
          {loading ? 'Zapisywanie...' : 'üíæ Zapisz Zmiany'}
        </button>
      </div>
    </form>
  );
}
</file>

<file path="src/app/admin/bookings/list/[id]/page.module.css">
.grid {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 30px;
}

.mainCard, .sideCard {
  background: white;
  padding: 30px;
  border-radius: 12px;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  border: 1px solid #e2e8f0;
}

.cardTitle {
  margin-top: 0;
  margin-bottom: 20px;
  color: #1e293b;
  font-size: 1.4rem;
  border-bottom: 2px solid #f1f5f9;
  padding-bottom: 10px;
}

.formGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
}

.inputGroup {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.inputGroup label {
  font-size: 0.9rem;
  font-weight: 600;
  color: #475569;
}

.inputGroup input,
.inputGroup select {
  padding: 10px;
  border: 1px solid #cbd5e1;
  border-radius: 6px;
  font-size: 1rem;
}

.formActions {
  margin-top: 30px;
  display: flex;
  justify-content: flex-end;
}

.saveBtn {
  background: #2563eb;
  color: white;
  border: none;
  padding: 12px 24px;
  border-radius: 6px;
  font-weight: 600;
  cursor: pointer;
  font-size: 1rem;
  transition: background 0.2s;
}

.saveBtn:hover:not(:disabled) {
  background: #1d4ed8;
}

.saveBtn:disabled {
  opacity: 0.7;
  cursor: not-allowed;
}

.infoBlock h3, .actionsBlock h3 {
  margin-top: 0;
  color: #334155;
  font-size: 1.1rem;
  margin-bottom: 15px;
}

.infoRow {
  display: flex;
  justify-content: space-between;
  padding: 8px 0;
  border-bottom: 1px solid #f1f5f9;
  font-size: 0.9rem;
}

.infoRow code {
  background: #f1f5f9;
  padding: 2px 6px;
  border-radius: 4px;
  font-family: monospace;
  font-size: 0.8rem;
}

.warningBox {
  margin-top: 15px;
  background: #fffbeb;
  border: 1px solid #fcd34d;
  color: #92400e;
  padding: 10px;
  border-radius: 6px;
  font-size: 0.9rem;
}

.deleteBtn {
  width: 100%;
  background: #ef4444;
  color: white;
  border: none;
  padding: 12px;
  border-radius: 6px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s;
  font-size: 0.95rem;
}

.deleteBtn:hover {
  background: #dc2626;
}

.deleteHint {
  font-size: 0.8rem;
  color: #64748b;
  margin-top: 10px;
  text-align: center;
}

.alert {
  padding: 12px;
  border-radius: 6px;
  margin-bottom: 20px;
  font-weight: 500;
}
.alertSuccess { background: #dcfce7; color: #166534; border: 1px solid #bbf7d0; }
.alertError { background: #fee2e2; color: #991b1b; border: 1px solid #fecaca; }

@media (max-width: 768px) {
  .grid { grid-template-columns: 1fr; }
}
</file>

<file path="src/app/admin/bookings/list/page.tsx">
import { getAdminBookingsList } from '@/actions/adminBookingActions';
import Link from 'next/link';
import styles from './page.module.css';

export default async function BookingsListPage() {
  const bookings = await getAdminBookingsList();

  return (
    <div className={styles.container}>
      <header className={styles.header}>
        <div className={styles.headerTop}>
          <Link href="/admin" className={styles.backButton}>
            ‚Üê Powr√≥t do Dashboardu
          </Link>
          <h1>Lista Rezerwacji</h1>
        </div>
        <p>PrzeglƒÖdaj, edytuj lub usuwaj istniejƒÖce rezerwacje.</p>
      </header>

      {bookings.length === 0 ? (
        <div className={styles.emptyState}>
          <p>Brak rezerwacji w systemie.</p>
        </div>
      ) : (
        <div className={styles.tableWrapper}>
          <table className={styles.bookingsTable}>
            <thead>
              <tr>
                <th>Data dodania</th>
                <th>Go≈õƒá</th>
                <th>Obiekt</th>
                <th>Termin</th>
                <th>Nocy</th>
                <th>Cena</th>
                <th>Status</th>
                <th>Akcje</th>
              </tr>
            </thead>
            <tbody>
              {bookings.map((booking) => {
                const start = new Date(booking.startDate);
                const end = new Date(booking.endDate);
                const nights = Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24));
                
              
                const statusKey = booking.status.charAt(0).toUpperCase() + booking.status.slice(1);
                const statusLabel = 
                  booking.status === 'confirmed' ? 'Potwierdzona' : 
                  booking.status === 'blocked' ? 'Zablokowana' : 
                  booking.status === 'cancelled' ? 'Anulowana' : 'OczekujƒÖca';

                return (
                  <tr key={booking._id} className={styles.rowLink}>
                    <td>{new Date(booking.createdAt).toLocaleDateString('pl-PL')}</td>
                    
                    <td className={styles.guestCell}>
                      <div className={styles.guestName}>{booking.guestName || 'Go≈õƒá'}</div>
                      <div className={styles.guestContact}>{booking.guestEmail || '-'}</div>
                    </td>
                    
                    <td>{booking.propertyName || 'Domek'}</td>
                    
                    <td>
                      {start.toLocaleDateString('pl-PL')} - {end.toLocaleDateString('pl-PL')}
                    </td>
                    
                    <td className={styles.centerCell}>{nights}</td>
                    
                    <td className={styles.priceCell}>{booking.totalPrice.toFixed(2)} z≈Ç</td>
                    
                    <td>
                      <span className={`${styles.badge} ${styles[`badge${statusKey}`]}`}>
                        {statusLabel}
                      </span>
                    </td>
                    
                    <td>
                      <Link 
                        href={`/admin/bookings/list/${booking._id}`} 
                        className={styles.editBtn}
                      >
                        Edytuj
                      </Link>
                    </td>
                  </tr>
                );
              })}
            </tbody>
          </table>
        </div>
      )}
    </div>
  );
}
</file>

<file path="src/app/admin/dev/page.module.css">
.wrapper {
    background-color: #0f1115;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 10px;
}

.devContainer {
    background-color: #1a1d23;
    width: 100%;
    max-width: 1100px;
    min-height: 85vh;
    border-radius: 12px;
    border: 1px solid #2d333b;
    display: flex;
    flex-direction: column;
    padding: 20px;
    color: #adbac7;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    margin: 10px 0;
}

.header {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #2d333b;
    padding-bottom: 15px;
    margin-bottom: 20px;
    gap: 10px;
}

.header h1 {
    margin: 0;
    font-size: 1.2rem;
    color: #539bf5;
}

.status {
    background: #22272e;
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 0.7rem;
    border: 1px solid #444c56;
    white-space: nowrap;
}

.grid {
    display: grid;
    grid-template-columns: 1fr 2fr;
    gap: 20px;
    flex-grow: 1;
}

.actions {
    display: flex;
    flex-direction: column;
}

.actions h3, .console h3 {
    margin-top: 0;
    margin-bottom: 15px;
    font-size: 1rem;
    color: #cdd9e5;
}

.buttonGroup {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.btnPrimary {
    background-color: #347d39;
    color: white;
    border: none;
    padding: 14px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
    transition: 0.2s;
    font-size: 0.9rem;
    text-align: left;
}

.btnPrimary:hover {
    background-color: #2c6830;
}

.btnSecondary {
    background-color: #2d333b;
    color: #cdd9e5;
    border: 1px solid #444c56;
    padding: 12px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 500;
    transition: 0.2s;
    font-size: 0.85rem;
    text-align: left;
}

.btnSecondary:hover {
    background-color: #373e47;
    border-color: #539bf5;
    color: #ffffff;
}

.btnDanger {
    background-color: #ae2c2c;
    color: white;
    border: none;
    padding: 14px;
    border-radius: 6px;
    cursor: pointer;
    transition: 0.2s;
    font-size: 0.9rem;
    text-align: left;
    font-weight: 600;
}

.btnDanger:hover {
    background-color: #912525;
}

.divider {
    border: 0;
    border-top: 1px solid #2d333b;
    margin: 10px 0;
}

.console {
    display: flex;
    flex-direction: column;
    min-height: 300px;
}

.logWindow {
    background-color: #0d1117;
    flex-grow: 1;
    border-radius: 8px;
    padding: 12px;
    font-family: 'Courier New', Courier, monospace;
    font-size: 0.85rem;
    overflow-y: auto;
    border: 1px solid #2d333b;
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.empty {
    color: #444c56;
    font-style: italic;
    text-align: center;
    margin-top: 20px;
}

.logEntry {
    color: #cdd9e5;
    word-break: break-all;
    padding: 4px 0;
    border-bottom: 1px solid #161b22;
}

.logEntry:last-child {
    border-bottom: none;
    color: #ffffff;
    font-weight: 500;
}

@media (max-width: 768px) {
    .wrapper {
        padding: 0;
        align-items: flex-start;
    }

    .devContainer {
        border-radius: 0;
        border: none;
        min-height: 100vh;
        margin: 0;
        padding: 15px;
    }

    .grid {
        grid-template-columns: 1fr;
    }

    .header h1 {
        font-size: 1.1rem;
    }

    .logWindow {
        max-height: 40vh;
    }
    
    .btnPrimary, .btnSecondary, .btnDanger {
        text-align: center;
    }
}
</file>

<file path="src/app/admin/dev/page.tsx">
'use client'

import { useState } from 'react';
import { 
    seedAllData, 
    seedProperties, 
    seedBookings, 
    seedSystemConfig, 
    seedPriceConfig,
    clearAllData 
} from '@/actions/seed';
import styles from './page.module.css';

export default function DevPage() {
    const [logs, setLogs] = useState<string[]>([]);

    const addLog = (msg: string) => {
        setLogs(prev => [...prev, `[${new Date().toLocaleTimeString()}] ${msg}`].slice(-10));
    };

    const runAction = async (name: string, actionFn: () => Promise<any>) => {
        addLog(`Uruchamiam: ${name}...`);
        const res = await actionFn();
        if (res.success) {
            addLog(`‚úÖ SUCCESS: ${res.message}`);
        } else {
            addLog(`‚ùå ERROR: ${res.error || res.message}`);
        }
    };

    return (
        <div className={styles.wrapper}>
            <div className={styles.devContainer}>
                <header className={styles.header}>
                    <h1>Developer Console</h1>
                    <span className={styles.status}>Environment: Development</span>
                </header>

                <div className={styles.grid}>
                    <section className={styles.actions}>
                        <h3>Database Actions</h3>
                        <div className={styles.buttonGroup}>
                            <button className={styles.btnPrimary} onClick={() => runAction('Seed All (Reset)', seedAllData)}>
                                Seed All Data (Full Reset)
                            </button>
                            
                            <hr className={styles.divider} />
                            
                            <button className={styles.btnSecondary} onClick={() => runAction('Seed Properties', seedProperties)}>
                                Seed Properties Only
                            </button>
                            <button className={styles.btnSecondary} onClick={() => runAction('Seed Price Config', seedPriceConfig)}>
                                Seed Price Config
                            </button>
                            <button className={styles.btnSecondary} onClick={() => runAction('Seed System Config', seedSystemConfig)}>
                                Seed System Config
                            </button>
                            <button className={styles.btnSecondary} onClick={() => runAction('Seed Bookings', seedBookings)}>
                                Seed Bookings Only
                            </button>
                            
                            <hr className={styles.divider} />
                            
                            {/* 2. Podpiƒôcie prawdziwej funkcji */}
                            <button className={styles.btnDanger} onClick={() => runAction('Clear Database', clearAllData)}>
                                Clear All Collections
                            </button>
                        </div>
                    </section>

                    <section className={styles.console}>
                        <h3>Output Logs</h3>
                        <div className={styles.logWindow}>
                            {logs.length === 0 && <span className={styles.empty}>Waiting for actions...</span>}
                            {logs.map((log, i) => (
                                <div key={i} className={styles.logEntry}>{log}</div>
                            ))}
                        </div>
                    </section>
                </div>
            </div>
        </div>
    );
}
</file>

<file path="src/app/admin/page.tsx">
import Link from 'next/link';

export default function AdminDashboard() {
  return (
    <div style={{ padding: '20px' }}>
      <header style={{ marginBottom: '30px' }}>
        <h1 style={{ fontSize: '2rem', color: '#1e293b', marginBottom: '10px' }}>
          Panel Administratora
        </h1>
        <p style={{ color: '#64748b' }}>
          Witaj w panelu zarzƒÖdzania Wilcze Chatki. Wybierz opcjƒô z menu po lewej stronie.
        </p>
      </header>

      <div style={{ 
        display: 'grid', 
        gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', 
        gap: '20px' 
      }}>
        <Link href="/admin/bookings/calendar" style={{ textDecoration: 'none' }}>
          <div style={{
            background: 'white',
            padding: '24px',
            borderRadius: '12px',
            boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',
            border: '1px solid #e2e8f0',
            transition: 'transform 0.2s',
            height: '100%'
          }}>
            <div style={{ fontSize: '2rem', marginBottom: '10px' }}>üìÖ</div>
            <h3 style={{ margin: '0 0 8px 0', color: '#1e293b' }}>Kalendarz Rezerwacji</h3>
            <p style={{ margin: 0, color: '#64748b', fontSize: '0.9rem' }}>
              Zobacz occupancy i nadchodzƒÖce terminy.
            </p>
          </div>
        </Link>
        <Link href="/admin/bookings/add" style={{ textDecoration: 'none' }}>
          <div style={{
            background: 'white',
            padding: '24px',
            borderRadius: '12px',
            boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',
            border: '1px solid #e2e8f0',
            transition: 'transform 0.2s',
            height: '100%'
          }}>
            <div style={{ fontSize: '2rem', marginBottom: '10px' }}>‚ûï</div>
            <h3 style={{ margin: '0 0 8px 0', color: '#1e293b' }}>Dodaj Rezerwacjƒô</h3>
            <p style={{ margin: 0, color: '#64748b', fontSize: '0.9rem' }}>
              Rƒôczne dodawanie rezerwacji telefonicznych.
            </p>
          </div>
        </Link>

        <Link href="/admin/settings" style={{ textDecoration: 'none' }}>
          <div style={{
            background: 'white',
            padding: '24px',
            borderRadius: '12px',
            boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',
            border: '1px solid #e2e8f0',
            transition: 'transform 0.2s',
            height: '100%'
          }}>
            <div style={{ fontSize: '2rem', marginBottom: '10px' }}>‚öôÔ∏è</div>
            <h3 style={{ margin: '0 0 8px 0', color: '#1e293b' }}>Ustawienia</h3>
            <p style={{ margin: 0, color: '#64748b', fontSize: '0.9rem' }}>
              ZarzƒÖdzaj konfiguracjƒÖ systemu i cenami.
            </p>
          </div>
        </Link>
      </div>
    </div>
  );
}
</file>

<file path="src/app/admin/settings/ConfigToggleClient.tsx">
'use client';

import { useState, useTransition } from 'react';
import { updateAutoBlockSetting } from '@/actions/adminConfigActions';

interface ConfigToggleProps {
  initialEnabled: boolean;
}

export default function ConfigToggle({ initialEnabled }: ConfigToggleProps) {
  const [enabled, setEnabled] = useState(initialEnabled);
  const [isPending, startTransition] = useTransition();
  const [statusMessage, setStatusMessage] = useState<string | null>(null);

  const handleToggle = async () => {
    const newState = !enabled;
    setEnabled(newState);
    
    startTransition(async () => {
      const result = await updateAutoBlockSetting(newState);
      
      if (result.success) {
        setStatusMessage(result.message);
        // Ukryj komunikat po 3 sekundach
        setTimeout(() => setStatusMessage(null), 3000);
      } else {
        // Przywr√≥ƒá poprzedni stan w razie b≈Çƒôdu
        setEnabled(!newState);
        setStatusMessage(result.message);
        setTimeout(() => setStatusMessage(null), 3000);
      }
    });
  };

  return (
    <div className="toggle-wrapper">
      <button
        type="button"
        onClick={handleToggle}
        disabled={isPending}
        className={`toggle-switch ${enabled ? 'toggle-on' : 'toggle-off'} ${isPending ? 'toggle-disabled' : ''}`}
        aria-pressed={enabled}
        aria-label="Prze≈ÇƒÖcz automatycznƒÖ blokadƒô"
      >
        <span className="toggle-knob" />
      </button>
      
      <span className={`toggle-status-label ${enabled ? 'status-active' : 'status-inactive'}`}>
        {enabled ? 'W≈ÅƒÑCZONE' : 'WY≈ÅƒÑCZONE'}
      </span>

      {statusMessage && (
        <div className={`status-message ${statusMessage.includes('W≈ÇƒÖczono') ? 'msg-success' : 'msg-error'}`}>
          {statusMessage}
        </div>
      )}
      
      {isPending && (
        <span className="loading-spinner">Zapisywanie...</span>
      )}
    </div>
  );
}
</file>

<file path="src/app/admin/settings/page.tsx">
import { getSystemConfig } from '@/actions/adminConfigActions';
import ConfigToggle from './ConfigToggleClient';
import './settings.css';

export default async function SettingsPage() {
  const config = await getSystemConfig();

  return (
    <div className="admin-settings-container">
      <header className="admin-header">
        <h1 className="admin-title">Ustawienia Systemu</h1>
        <p className="admin-subtitle">ZarzƒÖdzaj globalnƒÖ politykƒÖ wynajmu obiektu</p>
      </header>
      
      <section className="settings-card">
        <div className="card-header">
          <h2 className="card-title">Polityka Wynajmu</h2>
          <span className="card-badge">Globalne</span>
        </div>
        
        <div className="setting-row">
          <div className="setting-content">
            <label className="setting-label" htmlFor="auto-block-toggle">
              Automatyczna blokada drugiego domku
            </label>
            <p className="setting-description">
              Gdy ta opcja jest <strong>w≈ÇƒÖczona</strong>, rezerwacja jednego domku 
              automatycznie blokuje wszystkie pozosta≈Çe na te same daty 
              (zasada &quot;jedna grupa na terenie&quot;).
              <br />
              Gdy <strong>wy≈ÇƒÖczona</strong>, klienci mogƒÖ rezerwowaƒá domek niezale≈ºnie, mino ≈ºe drugi jest juz zarezerwowany przez innego klienta.
            </p>
          </div>
          
          <div className="setting-control">
            <ConfigToggle 
              initialEnabled={config.autoBlockOtherCabins} 
            />
          </div>
        </div>
      </section>

      <section className="settings-card">
        <div className="card-header">
          <h2 className="card-title">Limity i Zasady</h2>
        </div>
        <div className="setting-row">
          <div className="setting-content">
            <p className="setting-info-text">
              Maksymalna liczba go≈õci na domek: <strong>{config.maxGuestsPerCabin}</strong> os√≥b
            </p>
            <p className="setting-info-text">
              Dzieci bezp≈Çatne do lat: <strong>{config.childrenFreeAgeLimit}</strong>
            </p>
            <button className="btn-secondary" disabled>Edytuj limity (wkr√≥tce)</button>
          </div>
        </div>
      </section>
    </div>
  );
}
</file>

<file path="src/app/admin/settings/settings.css">
:root {
  --color-primary: #2c3e50;
  --color-secondary: #7f8c8d;
  --color-accent: #3498db;
  --color-success: #2ecc71;
  --color-danger: #e74c3c;
  --color-bg-light: #f8f9fa;
  --color-border: #eee;
  --shadow-card: 0 2px 10px rgba(0, 0, 0, 0.05);
}

.admin-settings-container {
  max-width: 900px;
  margin: 0 auto;
  padding: 40px 20px;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color: #333;
  width: 100%;
  box-sizing: border-box;
}

.admin-header {
  margin-bottom: 30px;
  border-bottom: 2px solid var(--color-border);
  padding-bottom: 20px;
}

.admin-title {
  font-size: 2rem;
  color: var(--color-primary);
  margin: 0 0 10px 0;
  line-height: 1.2;
}

.admin-subtitle {
  font-size: 1rem;
  color: var(--color-secondary);
  margin: 0;
}

.settings-card {
  background: #ffffff;
  border-radius: 8px;
  box-shadow: var(--shadow-card);
  margin-bottom: 25px;
  border: 1px solid var(--color-border);
  overflow: hidden;
  transition: transform 0.2s ease;
}

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 25px;
  background-color: var(--color-bg-light);
  border-bottom: 1px solid var(--color-border);
  flex-wrap: wrap;
  gap: 10px;
}

.card-title {
  font-size: 1.25rem;
  margin: 0;
  color: var(--color-primary);
  font-weight: 700;
}

.card-badge {
  background-color: var(--color-accent);
  color: white;
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: bold;
  text-transform: uppercase;
  white-space: nowrap;
}

.setting-row {
  padding: 25px;
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 20px;
}

.setting-content {
  flex: 1;
  min-width: 0;
}

.setting-label {
  display: block;
  font-size: 1.1rem;
  font-weight: 600;
  margin-bottom: 10px;
  color: var(--color-primary);
  word-wrap: break-word;
}

.setting-description {
  font-size: 0.95rem;
  line-height: 1.6;
  color: #555;
  margin: 0 0 15px 0;
}

.setting-info-text {
  font-size: 1rem;
  margin: 10px 0;
  color: #444;
}

.setting-control {
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-width: 180px;
  padding-left: 20px;
  border-left: 1px solid transparent;
}

@media (min-width: 769px) {
  .setting-control {
    border-left-color: var(--color-border);
  }
}

.toggle-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  width: 100%;
}

.toggle-switch {
  position: relative;
  display: inline-block;
  width: 60px;
  height: 34px;
  border: none;
  border-radius: 34px;
  cursor: pointer;
  transition: background-color 0.3s ease, transform 0.1s;
  padding: 0;
  outline: none;
  flex-shrink: 0;
}

.toggle-switch:active {
  transform: scale(0.98);
}

.toggle-switch:focus-visible {
  box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.4);
}

.toggle-on {
  background-color: var(--color-success);
}

.toggle-off {
  background-color: #bdc3c7;
}

.toggle-disabled {
  opacity: 0.6;
  cursor: not-allowed;
  pointer-events: none;
}

.toggle-knob {
  position: absolute;
  content: "";
  top: 4px;
  left: 4px;
  width: 26px;
  height: 26px;
  background-color: white;
  border-radius: 50%;
  transition: transform 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

.toggle-on .toggle-knob {
  transform: translateX(26px);
}

.toggle-status-label {
  font-size: 0.85rem;
  font-weight: bold;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  min-height: 1.2em;
}

.status-active {
  color: var(--color-success);
}

.status-inactive {
  color: var(--color-secondary);
}

.status-message {
  font-size: 0.85rem;
  margin-top: 8px;
  padding: 8px 12px;
  border-radius: 4px;
  text-align: center;
  animation: fadeIn 0.3s ease-in-out;
  width: 100%;
  box-sizing: border-box;
}

.msg-success {
  background-color: #d4edda;
  color: #155724;
  border: 1px solid #c3e6cb;
}

.msg-error {
  background-color: #f8d7da;
  color: #721c24;
  border: 1px solid #f5c6cb;
}

.loading-spinner {
  font-size: 0.8rem;
  color: var(--color-accent);
  font-style: italic;
  display: block;
  margin-top: 5px;
}

.btn-secondary {
  background-color: #ecf0f1;
  color: var(--color-primary);
  border: 1px solid #bdc3c7;
  padding: 10px 20px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.9rem;
  transition: all 0.2s;
  margin-top: 10px;
  width: auto;
}

.btn-secondary:hover:not(:disabled) {
  background-color: #bdc3c7;
}

.btn-secondary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-5px); }
  to { opacity: 1; transform: translateY(0); }
}

@media (max-width: 768px) {
  .admin-settings-container {
    padding: 20px 15px;
  }

  .admin-title {
    font-size: 1.75rem;
  }

  .card-header {
    padding: 15px 20px;
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }
  
  .card-badge {
    align-self: flex-start;
  }

  .setting-row {
    padding: 20px;
    flex-direction: column;
    gap: 25px;
  }

  .setting-control {
    width: 100%;
    padding-left: 0;
    border-left: none;
    border-top: 1px solid var(--color-border);
    padding-top: 20px;
    align-items: flex-start;
  }
  
  .toggle-wrapper {
    align-items: flex-start;
    flex-direction: row;
    justify-content: space-between;
    width: 100%;
  }
}

@media (max-width: 480px) {
  .admin-title {
    font-size: 1.5rem;
  }

  .admin-subtitle {
    font-size: 0.9rem;
  }

  .settings-card {
    border-radius: 6px;
    margin-bottom: 20px;
  }

  .card-header {
    padding: 15px;
  }

  .card-title {
    font-size: 1.1rem;
  }

  .setting-row {
    padding: 15px;
    gap: 20px;
  }

  .setting-label {
    font-size: 1rem;
  }

  .setting-description {
    font-size: 0.9rem;
  }

  .setting-control {
    align-items: center;
    padding-top: 15px;
  }

  .toggle-wrapper {
    flex-direction: column;
    align-items: center;
    gap: 8px;
  }

  .toggle-status-label {
    font-size: 0.75rem;
  }

  .btn-secondary {
    width: 100%;
    text-align: center;
  }
  
  .status-message {
    font-size: 0.8rem;
    padding: 6px 10px;
  }
}
</file>

<file path="src/db/models/SystemConfig.ts">
import mongoose, { Schema, Document, Types } from 'mongoose';

interface ISystemConfigDoc extends Omit<Document, '_id'> {
  _id: string;
  autoBlockOtherCabins: boolean;
  highSeasonStart?: Date;
  highSeasonEnd?: Date;
  maxGuestsPerCabin: number;
  childrenFreeAgeLimit: number;
}

export type ISystemConfig = ISystemConfigDoc;

const SystemConfigSchema = new Schema<ISystemConfig>(
  {
    _id: { 
      type: String, 
      default: 'main' 
    },
    autoBlockOtherCabins: { type: Boolean, default: true },
    highSeasonStart: { type: Date },
    highSeasonEnd: { type: Date },
    maxGuestsPerCabin: { type: Number, default: 6 },
    childrenFreeAgeLimit: { type: Number, default: 13 }
  },
  {
    versionKey: false
  }
);

const SystemConfig = mongoose.models.SystemConfig || mongoose.model<ISystemConfig>('SystemConfig', SystemConfigSchema);

export default SystemConfig;
</file>

<file path="src/actions/adminBookingActions.ts">
'use server';

import { revalidatePath } from 'next/cache';
import dbConnect from '@/db/connection';
import Booking from '@/db/models/Booking';
import Property from '@/db/models/Property';

export async function createManualBooking(formData: FormData) {
  try {
    await dbConnect();

    const startDateStr = formData.get('startDate') as string;
    const endDateStr = formData.get('endDate') as string;
    const propertyId = formData.get('propertyId') as string;
    const numGuests = parseInt(formData.get('numGuests') as string, 10);
    const guestName = formData.get('guestName') as string;
    const guestEmail = formData.get('guestEmail') as string;
    const guestPhone = formData.get('guestPhone') as string;
    const totalPriceStr = formData.get('totalPrice') as string;
    const internalNotes = formData.get('internalNotes') as string;

    const startDate = new Date(startDateStr);
    const endDate = new Date(endDateStr);
    const totalPrice = parseFloat(totalPriceStr);

    if (isNaN(startDate.getTime()) || isNaN(endDate.getTime())) {
      throw new Error('Nieprawid≈Çowy format daty.');
    }

    if (startDate >= endDate) {
      throw new Error('Data wyjazdu musi byƒá p√≥≈∫niejsza ni≈º data przyjazdu.');
    }

    if (!propertyId || !guestName || !guestEmail) {
      throw new Error('Brak wymaganych danych go≈õcia lub property.');
    }

    const newBooking = await Booking.create({
      startDate,
      endDate,
      propertyId,
      numGuests,
      guestName,
      guestEmail,
      guestPhone,
      totalPrice,
      status: 'CONFIRMED',
      paymentStatus: 'PAID',
      internalNotes: internalNotes || '',
      source: 'admin',
    });

    revalidatePath('/admin/bookings/calendar');
    revalidatePath('/admin/bookings/list');
    revalidatePath('/admin/bookings/add');

    return {
      success: true,
      message: `Pomy≈õlnie dodano rezerwacjƒô (ID: ${newBooking._id})`,
    };

  } catch (error) {
    console.error('B≈ÇƒÖd podczas tworzenia rezerwacji:', error);
    return {
      success: false,
      message: error instanceof Error ? error.message : 'WystƒÖpi≈Ç nieznany b≈ÇƒÖd.',
    };
  }
}

export async function getAdminBookingsList() {
  try {
    await dbConnect();

    const bookings = await Booking.find()
      .sort({ createdAt: -1 })
      .lean();

    const bookingsWithDetails = await Promise.all(
      bookings.map(async (booking: any) => {
        let propertyName = 'Nieznany obiekt';
        
        if (booking.propertyId) {
          try {
            const property = await Property.findById(booking.propertyId).lean();
            if (property) {
              propertyName = property.name || propertyName;
            }
          } catch (err) {
            console.error(`B≈ÇƒÖd pobierania nazwy property dla ${booking._id}`, err);
          }
        }

        return {
          _id: booking._id.toString(),
          startDate: booking.startDate,
          endDate: booking.endDate,
          propertyId: booking.propertyId?.toString() || null,
          propertyName: propertyName,
          numGuests: booking.numGuests || 0,
          guestName: booking.guestName || '',
          guestEmail: booking.guestEmail || '',
          guestPhone: booking.guestPhone || '',
          totalPrice: booking.totalPrice || 0,
          status: booking.status || 'PENDING',
          paymentStatus: booking.paymentStatus || 'UNPAID',
          internalNotes: booking.internalNotes || '',
          source: booking.source || 'unknown',
          createdAt: booking.createdAt,
        };
      })
    );

    return bookingsWithDetails;
  } catch (error) {
    console.error('B≈ÇƒÖd podczas pobierania listy rezerwacji:', error);
    return [];
  }
}

export async function updateBookingStatus(bookingId: string, status: string) {
  try {
    await dbConnect();
    
    await Booking.findByIdAndUpdate(bookingId, { status });
    
    revalidatePath('/admin/bookings');
    revalidatePath('/admin/bookings/list');
    revalidatePath('/admin/bookings/calendar');

    return { success: true };
  } catch (error) {
    console.error('B≈ÇƒÖd aktualizacji statusu:', error);
    return { success: false, error: 'Nie uda≈Ço siƒô zaktualizowaƒá statusu' };
  }
}

export async function deleteBooking(bookingId: string) {
  try {
    await dbConnect();
    
    await Booking.findByIdAndDelete(bookingId);
    
    revalidatePath('/admin/bookings');
    revalidatePath('/admin/bookings/list');
    revalidatePath('/admin/bookings/calendar');

    return { success: true };
  } catch (error) {
    console.error('B≈ÇƒÖd usuwania rezerwacji:', error);
    return { success: false, error: 'Nie uda≈Ço siƒô usunƒÖƒá rezerwacji' };
  }
}
</file>

<file path="src/actions/createBooking.ts">
'use server'

import dbConnect from '@/db/connection';
import Booking from '@/db/models/Booking';
import Property from '@/db/models/Property';
import SystemConfig from '@/db/models/SystemConfig';
import mongoose from 'mongoose';

interface CreateBookingParams {
  propertyId: string;
  startDate: string;
  endDate: string;
  guestName: string;
  guestEmail: string;
  totalPrice: number;
  paymentId: string;
}

export async function createBookingWithConditionalBlock({
  propertyId,
  startDate,
  endDate,
  guestName,
  guestEmail,
  totalPrice,
  paymentId
}: CreateBookingParams) {
  
  const session = await mongoose.startSession();
  session.startTransaction();

  try {
    await dbConnect();

    const start = new Date(startDate);
    const end = new Date(endDate);
    const selectedPropId = new mongoose.Types.ObjectId(propertyId);

    let config = await SystemConfig.findById('main').session(session);
    
    if (!config) {
      config = await SystemConfig.create([{ 
        _id: 'main', 
        autoBlockOtherCabins: true 
      }], { session });
      config = config[0];
    }

    const shouldAutoBlock = config.autoBlockOtherCabins;

    const mainBooking = await Booking.create([{
      propertyId: selectedPropId,
      guestName,
      guestEmail,
      startDate: start,
      endDate: end,
      totalPrice,
      status: 'confirmed',
      bookingType: 'real',
      paymentId,
    }], { session });

    const mainBookingId = mainBooking[0]._id;

    if (shouldAutoBlock) {
      const otherProperties = await Property.find({ 
        isActive: true, 
        _id: { $ne: selectedPropId }
      }).session(session);

      if (otherProperties.length > 0) {
        const shadowBookingsData = otherProperties.map(otherProp => ({
          propertyId: otherProp._id,
          guestName: "SYSTEM BLOCK (Auto)",
          guestEmail: "system@wilczechatki.pl",
          startDate: start,
          endDate: end,
          totalPrice: 0,
          status: 'blocked',
          bookingType: 'shadow',
          linkedBookingId: mainBookingId,
          paymentId: null
        }));

        await Booking.create(shadowBookingsData, { session });
        console.log(`Utworzono ${otherProperties.length} blokad technicznych zgodnie z konfiguracjƒÖ.`);
      }
    } else {
      console.log("Auto-blokada wy≈ÇƒÖczona w konfiguracji. Rezerwacja tylko wybranego domku.");
    }

    await session.commitTransaction();
    
    return { 
      success: true, 
      bookingId: mainBookingId, 
      message: shouldAutoBlock 
        ? "Rezerwacja potwierdzona. Inne domki zosta≈Çy automatycznie zablokowane." 
        : "Rezerwacja potwierdzona. Inne domki pozosta≈Çy dostƒôpne." 
    };

  } catch (error) {
    await session.abortTransaction();
    console.error("B≈ÇƒÖd tworzenia rezerwacji:", error);
    return { success: false, message: "Nie uda≈Ço siƒô doko≈Ñczyƒá rezerwacji." };
  } finally {
    session.endSession();
  }
}
</file>

<file path="src/actions/getCalendarData.ts">
'use server'

import dbConnect from '@/db/connection';
import Booking from '@/db/models/Booking';
import Property from '@/db/models/Property';
import SystemConfig from '@/db/models/SystemConfig';
import { Types } from 'mongoose';

export interface BookingDetails {
  guestName: string;
  guestEmail: string;
  guestPhone: string;
  numberOfGuests: number;
  totalPrice: number;
  status: string;
  durationDays: number;
  startDate: string;
  endDate: string;
}

export interface CalendarDay {
  date: string;
  datePL: string;
  cabins: Record<string, { 
    status: 'free' | 'booked' | 'cleaning' | 'blocked_sys'; 
    details?: BookingDetails 
  }>;
  isFullyBlocked?: boolean;
}

export async function getCalendarData(daysToShow: number = 60, startDateString?: string): Promise<CalendarDay[]> {
  await dbConnect();

  const today = new Date();
  today.setHours(0, 0, 0, 0);

  const startDate = startDateString ? new Date(startDateString + 'T00:00:00') : today;
  startDate.setHours(0, 0, 0, 0);
  
 const endDate = new Date(startDate);
  endDate.setDate(endDate.getDate() + daysToShow - 1); 

  const sysConfig = await SystemConfig.findById('main');
  const isAutoBlockEnabled = sysConfig?.autoBlockOtherCabins ?? true;

  const properties = await Property.find({ isActive: true });
  if (properties.length === 0) return [];

  const propertyIds = properties.map(p => p._id);
  console.log(propertyIds);


  const bookings = await Booking.find({
    propertyId: { $in: propertyIds },
    status: { $in: ['confirmed', 'blocked'] },
    startDate: { $lte: endDate },
    endDate: { $gte: startDate }
  })
  .select('propertyId guestName guestEmail guestPhone numberOfGuests totalPrice status startDate endDate')
  .sort({ startDate: 1 });

  console.log(bookings?.length? bookings:'Tablica jest pusta');


  const result: CalendarDay[] = [];
  const seenDates = new Set<string>();
   const currentDay = new Date(startDate);

  while (currentDay <= endDate) {
    const dateStr = currentDay.toISOString().split('T')[0];

    if (seenDates.has(dateStr)) {
      currentDay.setDate(currentDay.getDate() + 1);
      continue;
    }
    seenDates.add(dateStr);

    const [year, month, day] = dateStr.split('-');
    const datePL = `${day}-${month}-${year}`;
    
    const dayTime = currentDay.getTime();
    const cabinsStatus: Record<string, any> = {};
    let bookedCount = 0;

    for (const prop of properties) {
      const propId = prop._id.toString();
      
      const activeBooking = bookings.find(b => 
        b.propertyId.toString() === propId &&
        new Date(b.startDate).getTime() <= dayTime &&
        new Date(b.endDate).getTime() > dayTime 
      );

      const checkOutBooking = bookings.find(b => 
        b.propertyId.toString() === propId &&
        new Date(b.endDate).getTime() === dayTime
      );

      const bookingToUse = activeBooking || checkOutBooking;
      const isCheckOutDay = !!checkOutBooking && !activeBooking;

      if (bookingToUse) {
        const start = new Date(bookingToUse.startDate);
        const end = new Date(bookingToUse.endDate);
        const duration = Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24));

        cabinsStatus[propId] = {
          status: isCheckOutDay ? 'cleaning' : 'booked',
          details: {
            guestName: bookingToUse.guestName || 'Go≈õƒá',
            guestEmail: bookingToUse.guestEmail || '-',
            guestPhone: bookingToUse.guestPhone || '-',
            numberOfGuests: bookingToUse.numberOfGuests || 0,
            totalPrice: bookingToUse.totalPrice || 0,
            status: bookingToUse.status,
            durationDays: duration,
            startDate: bookingToUse.startDate.toISOString().split('T')[0],
            endDate: bookingToUse.endDate.toISOString().split('T')[0],
          }
        };
        bookedCount++;
      } else {
        cabinsStatus[propId] = { status: 'free' };
      }
    }

    let isFullyBlocked = false;
    if (isAutoBlockEnabled && bookedCount > 0 && bookedCount < properties.length) {
      isFullyBlocked = true;
      for (const prop of properties) {
        const propId = prop._id.toString();
        if (cabinsStatus[propId].status === 'free') {
          cabinsStatus[propId] = { 
            status: 'blocked_sys',
            details: undefined 
          };
        }
      }
    }

    result.push({
      date: dateStr,
      datePL,
      cabins: cabinsStatus,
      isFullyBlocked
    });

    currentDay.setDate(currentDay.getDate() + 1);
  }

  return result;
}
</file>

<file path="src/app/_components/Attractions/Attractions.tsx">
import styles from './Attractions.module.css';

export default function Attractions() {
    const attractions = [
        {
            title: 'Trasy Rowerowe Nowa Karczma',
            description: 'Lokalne szlaki prowadzƒÖce przez najpiƒôkniejsze zakƒÖtki gminy.',
            distance: 'ok. 4 km',
            url: 'https://www.nowakarczma.pl/asp/walory-turystyczne,42,,1'
        },
        {
            title: 'Muzeum Hymnu Narodowego w Bƒôdominie',
            description: 'Jedyne na ≈õwiecie muzeum po≈õwiƒôcone "Mazurkowi DƒÖbrowskiego".',
            distance: 'ok. 5 km',
            url: 'https://muzeumhymnu.pl/'
        },
        {
            title: 'Stok narciarski Trzepowo',
            description: 'WyciƒÖgi narciarskie, trasy dla poczƒÖtkujƒÖcych oraz snowtubing.',
            distance: 'ok. 5 km',
            url: 'https://nartykaszuby.pl/'
        },
        {
            title: 'Farma Strusi w Garczynie',
            description: 'Najstarsza w Polsce hodowla strusi afryka≈Ñskich. Mo≈ºliwo≈õƒá zwiedzania.',
            distance: 'ok. 19 km',
            url: 'http://www.strusie-garczyn.pl/'
        },
        {
            title: 'Dom do g√≥ry nogami w Szymbarku',
            description: 'Centrum Edukacji i Promocji Regionu (CEPR) ze s≈Çynnym Domem do g√≥ry nogami, Najd≈Çu≈ºszƒÖ DeskƒÖ ≈öwiata i Domem Sybiraka.',
            distance: 'ok. 20 km',
            url: 'https://cepr.pl/'
        },
        {
            title: 'Basen Aqua Centrum',
            description: 'Nowoczesny park wodny w Ko≈õcierzynie z basenami i strefƒÖ saun.',
            distance: 'ok. 20 km',
            url: 'https://basenac.pl/'
        },
        {
            title: 'Wie≈ºyca ‚Äì Wie≈ºa Widokowa',
            description: 'Najwy≈ºszy szczyt Ni≈ºu Polskiego (329 m n.p.m.) z niesamowitym widokiem.',
            distance: 'ok. 24 km',
            url: 'https://szwajcariakaszubska.com/atrakcje/wieza-widokowa-na-wiezycy'
        },
        {
            title: 'Stok narciarski Wie≈ºyca',
            description: 'Najwiƒôkszy o≈õrodek narciarski na Kaszubach (Kosza≈Çkowo).',
            distance: 'ok. 25 km',
            url: 'https://www.wiezyca.pl/'
        },
        {
            title: 'Skansen we Wdzydzach',
            description: 'Najstarsze w Polsce muzeum na wolnym powietrzu nad "Kaszubskim Morzem".',
            distance: 'ok. 30 km',
            url: 'http://www.muzeum-wdzydze.gda.pl/'
        },
        {
            title: 'Kaszubski Park Krajobrazowy',
            description: 'Niezliczone jeziora i morenowe wzg√≥rza zwane "SzwajcariƒÖ KaszubskƒÖ".',
            distance: 'ok. 33 km',
            url: 'https://kpk.pomorskie.eu/'
        }
    ];
    return (
        <section id="attractions" className={styles.section}>
            <div className={styles.container}>
                <h2 className={styles.title}>Atrakcje w okolicy</h2>
                <p className={styles.subtitle}>
                    Odkryj uroki Szumlesia Kr√≥lewskiego i serca Kaszub.
                </p>

                <div className={styles.grid}>
                    {attractions.map((item, idx) => (
                        <div key={idx} className={styles.card}>
                            <div className={styles.header}>
                                <span className={styles.dot}></span>
                                <p className={styles.cardTitle}>{item.title}</p>
                            </div>
                            <p className={styles.description}>{item.description}</p>
                            <p className={styles.distanceInfo}>Odleg≈Ço≈õƒá: {item.distance}</p>
                            <a
                                href={item.url}
                                target="_blank"
                                rel="noopener noreferrer"
                                className={styles.link}
                            >
                                Dowiedz siƒô wiƒôcej &raquo;
                            </a>
                        </div>
                    ))}
                </div>
            </div>
        </section>
    );
}
</file>

<file path="src/app/_components/CalendarPicker/CalendarPicker.tsx">
"use client";
import { useState, useEffect } from 'react';
import './ClendarPicker.css';

interface UnavailableDate {
    date: string | null;
}

type UnavailableDates = UnavailableDate[];

interface BookingDates {
    start: string | null;
    end: string | null;
    count: number;
}

interface DayProps {
    currentDay: number;
    currentDate: string;
    isPast: boolean;
    isToday: boolean;
    isSelectedAsStart: boolean;
    isSelectedAsEnd: boolean;
    isSelectedBetween: boolean;
    isHovered: boolean;
    isReserved: boolean;
    isSunday: boolean;
    isSaturday: boolean;
    isWeekend: boolean;
    handleClickOnDay: (date: string) => void;
    handleMouseHoverDay: (date: string) => void;
}

const Day = ({
    currentDay,
    currentDate,
    isPast,
    isToday,
    isSelectedAsStart,
    isSelectedAsEnd,
    isSelectedBetween,
    isHovered,
    isReserved,
    isSunday,
    isSaturday,
    isWeekend,
    handleClickOnDay,
    handleMouseHoverDay,
}: DayProps) => {
    const dayClasses = [
        'day',
        isPast ? 'day__past' : '',
        isToday ? 'day__today' : '',
        isReserved ? 'day__reserved' : '',
        isSaturday ? 'day__saturday' : '',
        isSunday ? 'day__sunday' : '',
        isSelectedAsStart ? 'day__selected-as-start' : '',
        isSelectedAsEnd ? 'day__selected-as-end' : '',
        isSelectedBetween ? 'day__selected-between' : '',
        isHovered ? 'day__hovered' : '',
        isWeekend ? 'day__weekend' : '',
    ].filter(Boolean).join(' ');

    return (
        <div
            className={dayClasses}
            onClick={() => handleClickOnDay(currentDate)}
            onMouseEnter={() => handleMouseHoverDay(currentDate)}
        >
            {currentDay}
        </div>
    );
};

interface MonthProps {
    currentDate: Date;
    unavailableDates: UnavailableDates | null;
    selectedStart: string | null;
    selectedEnd: string | null;
    setSelectedStart: (date: string | null) => void;
    setSelectedEnd: (date: string | null) => void;
}

const Month = ({ currentDate, unavailableDates, selectedStart, selectedEnd, setSelectedStart, setSelectedEnd }: MonthProps) => {
    const [hoveredDate, setHoveredDate] = useState<string | null>(null);
    const res = [];
    let currentDay = 0;

    let firstDayOfTheMonth = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1).getDay();
    if (firstDayOfTheMonth === 0) firstDayOfTheMonth = 7;

    const numberOfDaysCurrentMonth = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0).getDate();

    for (let i = 1; i <= 42; i++) {
        if (i >= firstDayOfTheMonth && i < numberOfDaysCurrentMonth + firstDayOfTheMonth) {
            currentDay++;
            let isSelectedBetween = false;
            let isReserved = false;
            let dateObj = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDay);
            let currentDateFormatted = formatDate(dateObj);

            const todayFormatted = formatDate(new Date());

            const isToday = todayFormatted === currentDateFormatted;
            const isSunday = dateObj.getDay() === 0;
            const isSaturday = dateObj.getDay() === 6;
            const isPast = new Date(currentDateFormatted + 'T23:59:59') < new Date();
            const isWeekend = isSunday || isSaturday;

            let isSelectedAsStart = selectedStart === currentDateFormatted;
            let isSelectedAsEnd = selectedEnd === currentDateFormatted;

            if (unavailableDates) {
                isReserved = unavailableDates.some(el => el.date === currentDateFormatted);
            }

            let isHovered = Boolean(selectedStart && !selectedEnd && hoveredDate &&
                new Date(currentDateFormatted) > new Date(selectedStart) &&
                new Date(currentDateFormatted) < new Date(hoveredDate) &&
                !isReserved);

            if (selectedStart && selectedEnd) {
                isSelectedBetween = new Date(currentDateFormatted) > new Date(selectedStart) &&
                    new Date(currentDateFormatted) < new Date(selectedEnd) &&
                    !isReserved;
            }

            const handleClickOnDay = (date: string) => {
                if (isPast || isReserved) return;
                if (!selectedStart || (selectedStart && selectedEnd)) {
                    setSelectedStart(date);
                    setSelectedEnd(null);
                } else if (selectedStart && !selectedEnd) {
                    if (new Date(currentDateFormatted) < new Date(selectedStart)) {
                        setSelectedEnd(selectedStart);
                        setSelectedStart(date);
                    } else {
                        setSelectedEnd(date);
                    }
                }
            };

            const handleMouseHoverDay = (date: string ) => {
                if (selectedStart && !selectedEnd) setHoveredDate(date);
            };

            res.push(
                <Day
                    key={currentDateFormatted}
                    currentDay={currentDay}
                    currentDate={currentDateFormatted}
                    isPast={isPast}
                    isToday={isToday}
                    isSelectedAsStart={isSelectedAsStart}
                    isSelectedAsEnd={isSelectedAsEnd}
                    isSelectedBetween={isSelectedBetween}
                    isReserved={isReserved}
                    isSunday={isSunday}
                    isSaturday={isSaturday}
                    isWeekend={isWeekend}
                    handleClickOnDay={handleClickOnDay}
                    handleMouseHoverDay={handleMouseHoverDay}
                    isHovered={isHovered}
                />
            );
        } else {
            res.push(<div className="day__blank" key={`blank-${i}`}></div>);
        }
    }
    return <div className="month-container">{res}</div>;
};

function formatDate(dateObj: Date): string {
        let year = dateObj.getFullYear();
        let month = ((dateObj.getMonth() + 1)).toString().padStart(2, '0');
        let day = dateObj.getDate().toString().padStart(2, '0');
        return (year + "-" + month + '-' + day);
}

interface CalendarPickerProps {
    unavailableDates: UnavailableDates | null;
    onDateChange: (dates: BookingDates) => void;
}

export default function CalendarPicker({ unavailableDates, onDateChange }: CalendarPickerProps) { 
    const [currentDate, setDate] = useState<Date>(new Date());
    const [selectedStart, setSelectedStart] = useState<string | null>(null);
    const [selectedEnd, setSelectedEnd] = useState<string | null>(null);

    const weekDays: string[]= ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
    const monthsNames: string[] = [
        'January', 'February', 'March', 'April', 'May', 'June',
        'July', 'August', 'September', 'October', 'November', 'December'
    ];

    const getSelectedDaysCount = (): number => {
        if (!selectedStart) return 0;
        if (!selectedEnd) return 1;

        let count = 0;
        let start = new Date(selectedStart);
        let end = new Date(selectedEnd);

        if (start > end) [start, end] = [end, start];

        let tempDate = new Date(start);
        while (tempDate <= end) {
            const dayOfWeek = tempDate.getDay();
            const isWeekend = dayOfWeek === 0 || dayOfWeek === 6;
            const formatted = formatDate(tempDate);
            const isReserved = unavailableDates?.some(el => el.date === formatted);

            if (!isReserved) {
                count++;
            }
            tempDate.setDate(tempDate.getDate() + 1);
        }
        return count;
    };

    const totalSelected = getSelectedDaysCount();

    useEffect(() => {
        if (onDateChange) {
            onDateChange({ start: selectedStart, end: selectedEnd, count: totalSelected });
        }
    }, [selectedStart, selectedEnd, totalSelected, onDateChange]);

    const changeMonth = (offset: number) => {
        const newDate = new Date(currentDate);
        newDate.setMonth(newDate.getMonth() + offset);
        setDate(newDate);
    };

    const changeYear = (offset: number) => {
        const newDate = new Date(currentDate);
        newDate.setFullYear(newDate.getFullYear() + offset);
        setDate(newDate);
    };

    return (
        <div className="calendar">
            <div className="navigation">
                <div className="navigation__arrow material-symbols-outlined" onClick={() => changeYear(-1)}>keyboard_double_arrow_left</div>
                <div className="navigation__arrow material-symbols-outlined" onClick={() => changeMonth(-1)}>keyboard_arrow_left</div>
                <div className="navigation__current-month" onClick={() => setDate(new Date())}>
                    {monthsNames[currentDate.getMonth()]} {currentDate.getFullYear()}
                </div>
                <div className="navigation__arrow material-symbols-outlined" onClick={() => changeMonth(1)}>keyboard_arrow_right</div>
                <div className="navigation__arrow material-symbols-outlined" onClick={() => changeYear(1)}>keyboard_double_arrow_right</div>
            </div>

            <div className="week-days">
                {weekDays.map((day) => <span className="week-days__names" key={day}>{day}</span>)}
            </div>

            <Month
                currentDate={currentDate}
                unavailableDates={unavailableDates}
                selectedStart={selectedStart}
                selectedEnd={selectedEnd}
                setSelectedStart={setSelectedStart}
                setSelectedEnd={setSelectedEnd}
            />

        </div>
    );
}
</file>

<file path="src/app/_components/Contact/Contact.module.css">
.mainContainer {
  max-width: 1200px;
  margin: 0 auto;
}

.title {
  text-align: center;
  margin-bottom: 30px;
}

.title:after {
  content: '';
  display: block;
  width: 60px;
  height: 3px;
  background-color: var(--accent-color);
  margin: 15px auto 0;
}

.flexWrapper {
  display: flex;
  flex-direction: column;
  gap: 40px;
  width: 100%;
  margin-bottom: 30px;
}

.infoColumn {
  flex: 1;
  text-align: center;
  margin: 0 30px;
}

.formColumn {
  flex: 1;
  width: 100%;
}

.payment h3 {
  color: var(--accent-color);
  margin: 20px 0 10px;
}

.addressLink {
  text-decoration: none;
  color: inherit;
  display: block;
  margin-bottom: 20px;
  transition: color 0.3s ease;
}

.addressLink:hover {
  color: var(--accent-color);
}

.mapHintWrapper {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 5px;
  justify-content: center;
}

.mapIcon {
  font-size: 0.8rem;
  color: var(--accent-color);
}

.mapHint {
  font-size: 0.8rem;
  color: #888;
}

.contactItem {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  margin-bottom: 10px;
}

.detailIcon {
  color: var(--accent-color);
  width: 14px;
  height: 14px;
}

.contactLink {
  text-decoration: none;
  color: inherit;
  transition: color var(--transition);
}

.contactLink:hover {
  color: var(--accent-color);
}

@media (min-width: 768px) {
  .flexWrapper {
    flex-direction: row;
    align-items: flex-start;
  }

  .mapHintWrapper,
  .contactItem {
    justify-content: flex-start;
  }

  .infoColumn p,
  .infoColumn h3 {
    text-align: left;
  }
}
</file>

<file path="src/app/_components/Contact/Contact.tsx">
'use client'

import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';
import { faMapMarkerAlt, faPhone, faEnvelope } from '@fortawesome/free-solid-svg-icons';
import styles from './Contact.module.css';
import ContactForm from './ContactForm';

export default function Contact() {
  const lat = 54.157354;
  const lng = 18.241247;


  const mapsUrl = `https://www.google.com/maps/search/?api=1&query=${lat},${lng}`;

  return (
    <section id="contact" className={styles.section}>
      <div className={styles.mainContainer}>
        <h2 className={styles.title}>Kontakt</h2>
        <div className={styles.flexWrapper}>
          <div className={styles.infoColumn}>
            <div className={styles.details}>
              <p style={{ fontWeight: 700, marginBottom: '10px' }}>Wilcze Chatki</p>
              
              <a 
                href={mapsUrl}
                target="_blank" 
                rel="noopener noreferrer"
                className={styles.addressLink}
              >
                <p>83-424 Szumle≈õ Kr√≥lewski 9A</p>
                <p>Kaszuby, woj. pomorskie</p>
                <div className={styles.mapHintWrapper}>
                  <FontAwesomeIcon icon={faMapMarkerAlt} className={styles.mapIcon} />
                  <small className={styles.mapHint}>Kliknij, aby otworzyƒá mapƒô</small>
                </div>
              </a>

              <p className={styles.contactItem}>
                <FontAwesomeIcon icon={faPhone} className={styles.detailIcon} />
                <span>tel: <a href="tel:+48503420551" className={styles.contactLink}>+48 503 420 551</a></span>
              </p>
              
              {/* <p className={styles.contactItem}>
                <FontAwesomeIcon icon={faEnvelope} className={styles.detailIcon} />
                <span>e-mail: <a href="mailto:kontakt@wilczechatki.pl" className={styles.contactLink}>kontakt@wilczechatki.pl</a></span>
              </p> */}
            </div>

            <div className={styles.payment}>
              <h3>Dane do przelewu:</h3>
              <p>Numer konta (PKO BP):</p>
              <p style={{ fontWeight: 600 }}>20 1020 5226 0000 6702 0486 0336</p>
            </div>
          </div>

          <div className={styles.formColumn}>
            <ContactForm />
          </div>
        </div>
      </div>
    </section>
  );
}
</file>

<file path="src/app/_components/Contact/ContactForm.module.css">
.formContainer {
  background-color: var(--bg-white);
  padding: 30px;
  border-radius: var(--border-radius);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  color: var(--text-main);
  margin: 30px;
}

.group {
  margin-bottom: 20px;
}

.group label {
  display: block;
  font-weight: 600;
  margin-bottom: 8px;
  font-size: 14px;
}

.input, .textarea {
  width: 100%;
  padding: 12px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 16px;
  transition: border-color var(--transition);
}

.input:focus, .textarea:focus {
  outline: none;
  border-color: var(--accent-color);
}

.textarea {
  min-height: 120px;
  resize: vertical;
}

.submitBtn {
  width: 100%;
  background-color: var(--accent-color);
  color: var(--text-light);
  padding: 14px;
  border: none;
  border-radius: 4px;
  font-weight: 600;
  text-transform: uppercase;
  cursor: pointer;
  transition: background-color 0.2s ease-in-out;
}
.disabledBtn {
  background-color: #ccc !important; /* Szary kolor */
  cursor: not-allowed;
  opacity: 0.7;
  transform: none !important; /* Blokuje ewentualne efekty hover */
}

.disabledBtn:hover {
  background-color: #ccc !important;
}

.submitBtn:hover {
  background-color: var(--primary-color);
}

.errorMessage {
  color: #dc3545;
  background-color: #f8d7da;
  margin-top: 10px;
  padding: 10px;
  border-radius: 4px;
}

.successContainer{
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 20px;
  height: 200px;
  color: (--var-text-main);
}
</file>

<file path="src/app/_components/Contact/ContactForm.tsx">
'use client';
import { useState } from 'react';
import { useForm } from '@formspree/react';
import styles from './ContactForm.module.css';

export default function ContactForm() {
  const [state, handleSubmit] = useForm("mgokvlpj");
  
  const [formData, setFormData] = useState({ name: '', email: '', message: '' });
  const [touched, setTouched] = useState({ name: false, email: false, message: false });

  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

  const errors = {
    name: formData.name.length < 3 ? "Proszƒô podaƒá imiƒô i nazwisko." : '',
    email: !emailRegex.test(formData.email) ? "Proszƒô podaƒá poprawny adres e-mail." : '',
    message: formData.message.length < 10 ? "Wiadomo≈õƒá powinna mieƒá min. 10 znak√≥w." : ''
  };

  const isFormValid = !errors.name && !errors.email && !errors.message;

  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {
    const { name, value } = e.target;
    setFormData(prev => ({ ...prev, [name]: value }));
  };

  const handleBlur = (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => {
    const { name } = e.target;
    setTouched(prev => ({ ...prev, [name]: true }));
  };

  if (state.succeeded) {
    return (
      <div className={styles.successContainer}>
        <p className={styles.successMessage}>Wiadomo≈õƒá zosta≈Ça wys≈Çana!</p>
        <button onClick={() => window.location.reload()} className={styles.submitBtn}>
          Wy≈õlij kolejnƒÖ wiadomo≈õƒá
        </button>
      </div>
    );
  }

  return (
    <div className={styles.formContainer}>
      <form onSubmit={handleSubmit}>
        <div className={styles.group}>
          <label htmlFor="name">Imiƒô i Nazwisko</label>
          <input
            type="text"
            id="name"
            name="name"
            value={formData.name}
            onChange={handleChange}
            onBlur={handleBlur}
            className={styles.input}
          />
          {touched.name && errors.name && <div className={styles.errorMessage}>{errors.name}</div>}
        </div>

        <div className={styles.group}>
          <label htmlFor="email">Adres E-mail</label>
          <input
            id="email"
            name="email"
            type="email"
            value={formData.email}
            onChange={handleChange}
            onBlur={handleBlur}
            className={styles.input}
          />
          {touched.email && errors.email && <div className={styles.errorMessage}>{errors.email}</div>}
        </div>

        <div className={styles.group}>
          <label htmlFor="message">Wiadomo≈õƒá</label>
          <textarea
            id="message"
            name="message"
            value={formData.message}
            onChange={handleChange}
            onBlur={handleBlur}
            className={styles.textarea}
          ></textarea>
          {touched.message && errors.message && <div className={styles.errorMessage}>{errors.message}</div>}
        </div>

        <button
          type="submit"
          className={`${styles.submitBtn} ${!isFormValid ? styles.disabledBtn : ''}`}
          disabled={!isFormValid || state.submitting}
        >
          {state.submitting ? "Wysy≈Çanie..." : "Wy≈õlij wiadomo≈õƒá"}
        </button>
      </form>
    </div>
  );
}
</file>

<file path="src/app/_components/Footer/Footer.module.css">
.container {
  background-color: var(--primary-color);
  color: var(--text-light);
  padding: 40px 0 20px;
}

.inner {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
  display: flex;
  flex-direction: column;
  gap: 24px;
}

@media (min-width: 768px) {}

.info {
  margin: 0 auto;
  text-align: center;
}

.info h3 {
  font-size: 1.4rem;
  margin-top: 15px;
  margin-bottom: 12px;
  color: white;
}

.info p {
  color: #fff;
  margin: 4px 0;
  font-size: 1rem;
  opacity: 0.9;
}

.contact {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-top: 15px;
}

.contact p {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 0.95rem;
  margin: 6px 0;
}

.footerContactLink {
  color: var(--accent-color);
  text-decoration: none;
  font-weight: 500;
  transition: opacity 0.3s ease;
}

.social {
  text-align: center;
}

.social .facebook {
  display: inline-block;
  font-size: 1.8rem;
  color: var(--text-light);
  transition: color 0.3s ease;
}

.social .facebook:hover {
  color: #1877f2;
}

.copyright {
  text-align: center;
  margin-top: 30px;
  padding-top: 20px;
  border-top: 1px solid rgba(255, 255, 255, 0.15);
  font-size: 0.85rem;
  opacity: 0.8;
}

.creator {
  margin-top: 8px;
  font-size: 0.75rem;
  display: flex;
  justify-content: center;
  gap: 6px;
  opacity: 0.9;
}

.creatorLink {
  color: var(--accent-color);
  text-decoration: none;
  font-weight: 600;
  transition: opacity 0.3s ease;
}

.creatorLink:hover {
  opacity: 0.7;
  text-decoration: underline;
}

@media (max-width: 767px) {
  .social {
    text-align: center;
  }
}
</file>

<file path="src/app/_components/Footer/Footer.tsx">
import styles from './Footer.module.css';
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';
import { faPhone, faEnvelope } from '@fortawesome/free-solid-svg-icons';
import { faFacebook } from '@fortawesome/free-brands-svg-icons';   
import Image from 'next/image';
import Link from 'next/link';

export default function Footer() {
  return (
    <footer className={styles.container}>
      <div className={styles.inner}>
        <div className={styles.info}>
          <Image 
            src="/assets/logo-round.png" 
            alt="Logo Wilcze Chatki" 
            width={100} 
            height={100} 
          />
          <h3>Wilcze Chatki</h3>
          <p>83-424 Szumle≈õ Kr√≥lewski 9A</p>
          <p>Kaszuby, woj. pomorskie</p>
          
          <div className={styles.contact}>
            <p>
              <FontAwesomeIcon icon={faPhone} color={'#c9b363'}/> 
              <a href="tel:+48503420551" className={styles.footerContactLink}>+48 503 420 551</a>
            </p>
            {/* <p>
              <FontAwesomeIcon icon={faEnvelope} /> kontakt@wilczechatki.pl
            </p> 
            */}
          </div>
        </div>

        <div className={styles.social}>
          <a
            href="https://facebook.com/profile.php?id=61584455637648"
            target="_blank"
            rel="noopener noreferrer"
            aria-label="Facebook"
            className={styles.facebook}
          >
            <FontAwesomeIcon icon={faFacebook} />
          </a>
        </div>
      </div>

      <div className={styles.copyright}>
        <p>&copy; {new Date().getFullYear()} Wilcze Chatki. Wszelkie prawa zastrze≈ºone.</p>
        <div className={styles.creator}>
          Realizacja strony: 
          <a 
            href="https://rafalsprengel.com" 
            target="_blank" 
            rel="noopener noreferrer"
            className={styles.creatorLink}
          >
            Rafa≈Ç Sprengel
          </a>
        </div>
      </div>
    </footer>
  );
}
</file>

<file path="src/app/_components/Header/Header.module.css">
.container {
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 999;
    height: 100px;
    display: flex;
    flex-direction: column;
     transition: height 0.3s ease, top 0.3s ease, background-color 0.3s ease;
}

.scrolled {
    height: 80px;
    top: -31px;
}
</file>

<file path="src/app/_components/Hero/HeroSlider.tsx">
'use client';
import Link from 'next/link';
import { useState, useEffect, useCallback, useRef } from 'react';
import styles from './HeroSlider.module.css';

interface SliderItem {
  id: number;
  title: string;
  topic: string;
  description: string;
  image: string;
}

const items: SliderItem[] = [
  { 
    id: 1, 
    title: 'Wilcze Chatki', 
    topic: 'Kaszubska cisza', 
    description: 'Dwa przytulne domki w Szumlesiu Kr√≥lewskim, idealne na odpoczynek od miejskiego zgie≈Çku.', 
    image: '/images/img1.jpeg' 
  },
  { 
    id: 2, 
    title: 'Strefa relaksu', 
    topic: 'Sauna i jacuzzi', 
    description: 'Ca≈Çoroczna strefa relaksu w zamkniƒôtej altanie z saunƒÖ infrared i jacuzzi ogrzewanym drewnem.', 
    image: '/images/img2.jpeg' 
  },
  { 
    id: 3, 
    title: 'Natura na wyciƒÖgniƒôcie rƒôki', 
    topic: 'Serce Kaszub', 
    description: 'Blisko≈õƒá Kaszubskiego Parku Krajobrazowego, Wie≈ºycy i malowniczych jezior.', 
    image: '/images/img3.jpeg' 
  },
  { 
    id: 4, 
    title: 'Rodzinny wypoczynek', 
    topic: 'Plac zabaw i grill', 
    description: 'Prywatny taras z grillem oraz plac zabaw z trampolinƒÖ i hu≈õtawkami dla najm≈Çodszych.', 
    image: '/images/img4.jpeg' 
  },
  { 
    id: 5, 
    title: 'Komfortowe domki', 
    topic: 'Pe≈Çne wyposa≈ºenie', 
    description: 'Klimatyzowane wnƒôtrza, aneks kuchenny i przytulne sypialnie na poddaszu dla 6-8 os√≥b.', 
    image: '/images/img5.jpeg' 
  },
];



export default function HeroSlider() {
  const [activeIndex, setActiveIndex] = useState(0);
  const [isAnimating, setIsAnimating] = useState(false);
  const [isMounted, setIsMounted] = useState(false);
  const timerRef = useRef<NodeJS.Timeout | null>(null);

  const handleNext = useCallback(() => {
    if (isAnimating) return;
    setIsAnimating(true);
    setActiveIndex((prev) => (prev + 1) % items.length);
    setTimeout(() => setIsAnimating(false), 500);
  }, [isAnimating]);

  const handlePrev = useCallback(() => {
    if (isAnimating) return;
    setIsAnimating(true);
    setActiveIndex((prev) => (prev - 1 + items.length) % items.length);
    setTimeout(() => setIsAnimating(false), 500);
  }, [isAnimating]);

  const startTimer = useCallback(() => {
    if (timerRef.current) clearInterval(timerRef.current);
    timerRef.current = setInterval(() => {
      handleNext();
    }, 7000);
  }, [handleNext]);

  const changeSlide = useCallback((newIndex: number) => {
    if (isAnimating || newIndex === activeIndex) return;

    setIsAnimating(true);
    setActiveIndex(newIndex);
    startTimer();

    setTimeout(() => setIsAnimating(false), 500);
  }, [isAnimating, activeIndex, startTimer]);

  useEffect(() => {
    setIsMounted(true);
    startTimer();
    return () => {
      if (timerRef.current) clearInterval(timerRef.current);
    };
  }, [startTimer]);

  return (
    <section className={styles.heroSlider}>
      <div className={styles.sliderMain}>
        {items.map((item, index) => (
          <div
            key={item.id}
            className={`${styles.slide} ${isMounted && index === activeIndex ? styles.active : ''}`}
          >
            <div className={styles.overlay}></div>
            <img src={item.image} alt={item.title} className={styles.slideImg} />

            <div className={styles.slideContent}>
              <span className={styles.slideSubtitle}>SZUMLE≈ö KR√ìLEWSKI</span>
              <h1 className={styles.slideTitle}>{item.title}</h1>
              <h2 className={styles.slideTopic}>{item.topic}</h2>
              <p className={styles.slideDesc}>{item.description}</p>
              <div className={styles.slideActions}>
                <Link href="/booking" className={styles.btnPrimary}>ZAREZERWUJ</Link>
                <Link href="/gallery" className={styles.btnOutline}>GALERIA</Link>
              </div>
            </div>
          </div>
        ))}
      </div>

      <div className={styles.sliderControls}>
        <div className={styles.thumbnailsContainer}>
          {items.map((item, index) => (
            <div
              key={`thumb-${item.id}`}
              className={`${styles.thumbItem} ${index === activeIndex ? styles.activeThumb : ''}`}
              onClick={() => changeSlide(index)}
            >
              <img src={item.image} alt="" />
              {index === activeIndex && <div className={styles.thumbProgress} />}
            </div>
          ))}
        </div>

        <div className={styles.bottomNav}>
          <div className={styles.paginationDots}>
            {items.map((_, index) => (
              <span
                key={index}
                className={`${styles.dot} ${index === activeIndex ? styles.activeDot : ''}`}
              />
            ))}
          </div>
          <div className={styles.arrows}>
            <button onClick={handlePrev} className={styles.arrow}>‚Üê</button>
            <button onClick={handleNext} className={styles.arrow}>‚Üí</button>
          </div>
        </div>
      </div>
    </section>
  );
}
</file>

<file path="src/app/_components/LightBoxGallery/LightBoxGallery.module.css">
.galleryWrapper {
    width: 100%;
    display: flex;
    justify-content: center;
    padding: 50px 0;
    background-color: transparent;
    padding-top: 50px;
    margin-bottom: 120px
}

.gallery {
    --size: 100px;
    display: grid;
    grid-template-columns: repeat(6, var(--size));
    grid-auto-rows: var(--size);
    gap: 10px;
    place-items: start center;
}

.gallery:has(.imageLink:hover) .imageLink:not(:hover) {
    filter: brightness(0.5) contrast(0.5);
}

.imageLink {
    grid-column: auto / span 2;
    width: calc(var(--size) * 2);
    height: calc(var(--size) * 2);
    position: relative;
    z-index: 0;
    transition: clip-path 0.25s, filter 0.45s, z-index 0.25s;
}

.imageLink:nth-child(5n - 1) {
    grid-column: 2 / span 2;
}

.image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    clip-path: path("M90,10 C100,0 100,0 110,10 190,90 190,90 190,90 200,100 200,100 190,110 190,110 110,190 110,190 100,200 100,200 90,190 90,190 10,110 10,110 0,100 0,100 10,90Z");
}

.imageLink:hover {
    z-index: 10;
}

.imageLink:hover .image {
    clip-path: path("M0,0 C0,0 200,0 200,0 200,0 200,100 200,100 200,100 200,200 200,200 200,200 100,200 100,200 100,200 100,200 0,200 0,200 0,100 0,100 0,100 0,100 0,100Z");
    transition: clip-path 0.25s, filter 0.25s;
}

.caption {
    display: flex;
    justify-content: center;
    align-items: center;
    position: absolute;
    bottom: 0px;
    text-align: center;
    color: var(--text-secondary);
    padding-top: 10px;
    background: linear-gradient(to top, #00000087 0%, #0000 100%);
    width: 100%;
    height: 30%;
    color: white;
    font-size: 16px;
    font-style: italic;

}

@media (max-width: 762px) {
    .galleryWrapper {
        margin-bottom: 0px;
    }

    .gallery {
        grid-template-columns: repeat(3, 1fr);
        grid-auto-rows: auto;
        gap: 8px;
        padding: 0 10px;
        width: 100%;
    }

    .imageLink,
    .imageLink:nth-child(5n - 1),
    .imageLink:nth-child(3n - 1) {
        grid-column: span 1 !important;
        width: 100%;
        height: auto;
        aspect-ratio: 1 / 1;
    }

    .imageLink:nth-child(n + 7) {
        display: none;
    }

    .image {
        clip-path: none !important;
        border-radius: 2px;
    }

    .imageLink:hover .image {
        clip-path: none !important;
        transform: scale(1.02);
    }
}

@media (min-width: 762px) {
    .caption {
        display: none;
    }
}
</file>

<file path="src/app/_components/Navbar/HamburgerButton.module.css">
.hamburger {
  position: relative;
  background: none;
  border: none;
  cursor: pointer;
  display: flex;
  flex-direction: column;
  justify-content: space-around;
  width: 2rem;
  height: 2rem;
  padding: 0;
  z-index: 10;
}

.hamburger:focus {
  outline: none;
}

.bar {
  width: 2rem;
  height: 0.25rem;
  background: var(--primary-color);
  border-radius: 10px;
  transition: all 0.3s linear;
  position: relative;
  transform-origin: 1px;
}

.smaller {
  height: 0.16rem;
}

.isOpen .bar:nth-child(1) {
  transform: rotate(45deg);
}

.isOpen .bar:nth-child(2) {
  opacity: 0;
  transform: translateX(20px);
}

.isOpen .bar:nth-child(3) {
  transform: rotate(-45deg);
}
</file>

<file path="src/app/_components/Navbar/HamburgerButton.tsx">
import React, { forwardRef } from 'react';
import styles from './HamburgerButton.module.css';

interface HamburgerButtonProps {
  isOpen: boolean;
  isSmaller: boolean;
  onClick: () => void;
  className?: string;
}

const HamburgerButton = forwardRef<HTMLButtonElement, HamburgerButtonProps>(
  ({ isOpen,isSmaller, onClick, className }, ref) => {
    const handleOnclick = (e: React.MouseEvent<HTMLButtonElement>) => {
      e.stopPropagation();
      onClick();
    };

    return (
      <button
        className={`${styles.hamburger} ${isOpen ? styles.isOpen : ''} ${className}`}
        onClick={handleOnclick}
        aria-label="Toggle menu"
        ref={ref}
      >
        <div className={`${styles.bar} ${isSmaller ? styles.smaller : ''}`}></div>
        <div className={`${styles.bar} ${isSmaller ? styles.smaller : ''}`}></div>
        <div className={`${styles.bar} ${isSmaller ? styles.smaller : ''}`}></div>
      </button>
    );
  }
);

HamburgerButton.displayName = 'HamburgerButton';

export default HamburgerButton;
</file>

<file path="src/app/_components/Navbar/Navbar.tsx">
'use client';

import { useState, useEffect, useRef } from 'react';
import Link from 'next/link';
import styles from './Navbar.module.css';
import Image from 'next/image';
import HamburgerButton from './HamburgerButton';

export default function Navbar({isSmaller}: {isSmaller: boolean}) {
    const [isMenuOpen, setIsMenuOpen] = useState(false);
    const mobileMenuRef = useRef<HTMLDivElement>(null);
    const hamburgerRef = useRef<HTMLButtonElement>(null);

    const toggleMenu = () => {
        setIsMenuOpen(!isMenuOpen);
    };

    const handleClickOutside = (event: MouseEvent) => {
        if (
            mobileMenuRef.current &&
            !mobileMenuRef.current.contains(event.target as Node) &&
            hamburgerRef.current &&
            !hamburgerRef.current.contains(event.target as Node)
        ) {
            setIsMenuOpen(false);
        }
    };
    const closeMobileMenu = () => setIsMenuOpen(false)

    useEffect(() => {
        console.log('isMenuOpen:', isMenuOpen);
        if (isMenuOpen) {
            window.addEventListener('mousedown', handleClickOutside);
        }

        return () => {
            window.removeEventListener('mousedown', handleClickOutside);
        };
    }, [isMenuOpen]);

    return (
        <nav className={styles.container+(isSmaller ? ' '+styles.smallerNavbar : '')}>
            <div className={styles.inner}>
                <Link className={styles.logoWrapper} href="/">
                    <Image
                        src="/assets/logo.webp" alt="logo"
                        fill
                        priority
                        className={styles.logoImage}
                    />
                </Link>
                <div className={styles.hamburgerContainer}>
                    <HamburgerButton
                        ref={hamburgerRef}
                        isOpen={isMenuOpen}
                        isSmaller={isSmaller}
                        onClick={toggleMenu}
                        className={styles.hamburger} />
                </div>
                <div className={styles.mobileMenuOuter + ' ' + (isMenuOpen ? styles.showMobileMenu : '')}>
                    <div className={styles.mobileMenuInner} ref={mobileMenuRef}>
                        <ul className={styles.navLinks}>
                            <li onClick={closeMobileMenu}><Link href="/">STRONA G≈Å√ìWNA</Link></li>
                            <li onClick={closeMobileMenu}><Link href="/#services">OFERTA</Link></li>
                             <li onClick={closeMobileMenu}><Link href="/#pricing">CENNIK</Link></li>
                            <li onClick={closeMobileMenu}><Link href="/gallery">GALERIA</Link></li>
                            <li onClick={closeMobileMenu}><Link href="/#attractions">KASZUBY</Link></li>
                            <li onClick={closeMobileMenu}><Link href="/#contact">KONTAKT</Link></li>
                            <li onClick={closeMobileMenu}><Link href="/booking">REZERWACJE</Link></li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>
    );
}
</file>

<file path="src/app/_components/QuantityPicker/QuantityPicker.module.css">
.container {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 0;
}

.label {
  font-weight: 500;
  color: #333;
  font-size: 0.95rem;
}

.controls {
  display: flex;
  align-items: center;
  gap: 12px;
  border: 1px solid #ddd;
  border-radius: 6px;
  padding: 6px 12px;
  min-width: 100px;
  justify-content: space-between;
}

.button {
  background: none;
  border: none;
  color: #007bff;
  font-size: 1.2rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  padding: 0 4px;
  transition: opacity 0.2s, color 0.2s;
}

.button:disabled {
  color: #ccc;
  cursor: not-allowed;
}

.value {
  font-weight: 600;
  color: #333;
  min-width: 20px;
  text-align: center;
}
</file>

<file path="src/app/_components/QuantityPicker/QuantityPicker.tsx">
'use client';

import styles from './QuantityPicker.module.css';

interface QuantityPickerProps {
    value: number;
    onIncrement: () => void;
    onDecrement: () => void;
    min?: number;
    max?: number;
}

export default function QuantityPicker({
    value,
    onIncrement,
    onDecrement,
    min = 0,
    max = 10
}: QuantityPickerProps) {
    return (
        <div className={styles.container}>
            <div className={styles.controls}>
                <button
                    type="button"
                    className={styles.button}
                    onClick={onDecrement}
                    disabled={value <= min}
                >
                    -
                </button>
                <span className={styles.value}>{value}</span>
                <button
                    type="button"
                    className={styles.button}
                    onClick={onIncrement}
                    disabled={value >= max}
                >
                    +
                </button>
            </div>
        </div>
    );
}
</file>

<file path="src/app/_components/QuantitySelector/QuantityPicker.module.css">
.container {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 0;
}

.label {
  font-weight: 500;
  color: #333;
  font-size: 0.95rem;
}

.controls {
  display: flex;
  align-items: center;
  gap: 12px;
  border: 1px solid #ddd;
  border-radius: 6px;
  padding: 6px 12px;
  min-width: 100px;
  justify-content: space-between;
}

.button {
  background: none;
  border: none;
  color: #007bff;
  font-size: 1.2rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  padding: 0 4px;
  transition: opacity 0.2s, color 0.2s;
}

.button:disabled {
  color: #ccc;
  cursor: not-allowed;
}

.value {
  color: #333;
  min-width: 20px;
  text-align: center;
}
</file>

<file path="src/app/_components/Services/Services.module.css">
.container {
    max-width: 1100px;
    margin: 0 auto;
    padding: 0 20px;
}

.header {
    text-align: center;
    margin-bottom: 50px;
}

.title {
    color: var(--text-main);
    margin-bottom: 30px;
}
.title:after{
    content: '';
    display: block;
    width: 60px;
    height: 3px;
    background-color: var(--accent-color);
    margin: 15px auto 0;
}

.introText {
    margin-bottom: 40px;
    align-items: center;
    text-align: center;
}

.equipment {
    text-align: left;
    background: white;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    margin-bottom: 40px;
}

.equipment h3 {
    margin-bottom: 1.2rem;
    border-bottom: 2px solid #e0e7e1;
    padding-bottom: 10px;
}

.equipmentList {
    list-style: none;
    padding: 0;
    display: grid;
    grid-template-columns: 1fr;
    gap: 12px;
}

.equipmentList li {
    position: relative;
    padding-left: 25px;
    color: #666;
}

.equipmentList li::before {
    content: "‚úì";
    position: absolute;
    left: 0;
    color: #4a7c59;
    font-weight: bold;
}

.grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 30px;
    scroll-margin-top: 70px;
}

.card {
    background: white;
    padding: 40px;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
}

.card h3 {
    margin-bottom: 1.2rem;
    border-bottom: 2px solid #e0e7e1;
    padding-bottom: 10px;
}

.priceGroup {
    margin-top: 20px;
}

.priceGroup h4 {
    margin-bottom: 10px;
}

.priceRow {
    display: flex;
    justify-content: space-between;
    padding: 10px 0;
    border-bottom: 1px solid #eee;
}

.note {
    margin: 20px 0;
    font-size: 13px;
    color: #777;
}

.features {
    list-style: none;
    padding: 0;
}

.features li {
    padding: 12px 0;
    border-bottom: 1px solid #eee;
    color: #555;
}

@media (min-width: 768px) {
    .title {
        margin-bottom: 50px;
    }

    .introText p{
        text-align: justify;
    }


    .equipmentList {
        grid-template-columns: 1fr 1fr;
    }
}
</file>

<file path="src/app/_components/Services/Services.tsx">
import styles from './Services.module.css';

interface PriceItem {
    description: string;
    amount: string;
}

export default function Services() {
    const weekdayRates: PriceItem[] = [
        { description: '2-3 osoby', amount: '300 z≈Ç' },
        { description: '4-5 os√≥b', amount: '400 z≈Ç' },
        { description: '6 os√≥b', amount: '500 z≈Ç' },
        { description: 'Dostawka', amount: '+50 z≈Ç' }
    ];

    const weekendRates: PriceItem[] = [
        { description: '2-3 osoby', amount: '400 z≈Ç' },
        { description: '4-5 os√≥b', amount: '500 z≈Ç' },
        { description: '6 os√≥b', amount: '600 z≈Ç' },
        { description: 'Dostawka', amount: '+50 z≈Ç' }
    ];

    return (
        <section id="services" className={styles.section}>
            <div className={styles.container}>
                <header className={styles.header}>
                    <h2 className={styles.title}>Nasza oferta</h2>
                    <div className={styles.introText}>
                        <p>
                            Oferujemy dwa przytulne domki o powierzchni 35 m¬≤ ka≈ºdy. Ka≈ºdy domek komfortowo mie≈õci 6 os√≥b
                            (z mo≈ºliwo≈õciƒÖ 2 dodatkowych dostawek). Czƒô≈õciƒÖ wsp√≥lnƒÖ dla obu obiekt√≥w jest zamkniƒôta altana,
                            wyposa≈ºona w 4-5 osobowƒÖ saunƒô infrared oraz jacuzzi ogrzewane drewnem (drewno wliczone w cenƒô), wraz z dwoma du≈ºymi biesiadnymi sto≈Çami.
                        </p>
                        <p>
                            Na tarasie ka≈ºdego domku znajduje siƒô grill oraz st√≥≈Ç. Do dyspozycji go≈õci oddajemy r√≥wnie≈º
                            plac zabaw dla dzieci wyposa≈ºony w hu≈õtawkƒô, trampolinƒô, zje≈ºd≈ºalniƒô oraz hamaki.
                            Wnƒôtrze ka≈ºdego domku obejmuje aneks kuchenny, ≈Çazienkƒô oraz dwa pokoje na poddaszu:
                            jeden z ≈Ç√≥≈ºkiem ma≈Ç≈ºe≈Ñskim, drugi z dwoma ≈Ç√≥≈ºkami pojedynczymi.
                        </p>
                    </div>

                    <div className={styles.equipment}>
                        <h3>Wyposa≈ºenie ka≈ºdego domku:</h3>
                        <ul className={styles.equipmentList}>
                            <li>Kuchenka indukcyjna z piekarnikiem</li>
                            <li>Lod√≥wka</li>
                            <li>Zmywarka</li>
                            <li>Zastawa kuchenna, garnki, patelnie, toster</li>
                            <li>Pralka</li>
                            <li>TV i WiFi</li>
                            <li>St√≥≈Ç dla 6 os√≥b i rozk≈Çadana 2-osobowa kanapa</li>
                            <li>Klimatyzacja</li>
                            <li>Suszarka do w≈Ços√≥w i ubra≈Ñ</li>
                            <li>Rƒôczniki</li>
                            <li>Kosmetyki i ≈õrodki higieniczne</li>
                            <li>Odkurzacz</li>
                            <li>Kawa i herbata</li>
                        </ul>
                    </div>
                </header>

                <div id="pricing" className={styles.grid}>
                    <div className={styles.card}>
                        <h3>Cennik za dobƒô:</h3>
                        <div className={styles.priceGroup}>
                            <h4>W tygodniu:</h4>
                            {weekdayRates.map((rate, index) => (
                                <div key={index} className={styles.priceRow}>
                                    <span>{rate.description}</span>
                                    <strong>{rate.amount}</strong>
                                </div>
                            ))}
                        </div>
                        <div className={styles.priceGroup}>
                            <h4>Weekendy:</h4>
                            {weekendRates.map((rate, index) => (
                                <div key={index} className={styles.priceRow}>
                                    <span>{rate.description}</span>
                                    <strong>{rate.amount}</strong>
                                </div>
                            ))}
                        </div>
                        <div className={styles.note}>* Dzieci do trzynastego roku ≈ºycia bezp≈Çatnie.</div>
                        <div className={styles.note}>* Cennik obowiƒÖzuje poza sezonem wysokim.</div>
                    </div>

                    <div className={styles.card}>
                        <h3>G≈Ç√≥wne atrakcje:</h3>
                        <ul className={styles.features}>
                            <li>Chata biesiadna z saunƒÖ i jacuzzi oraz dwoma du≈ºymi sto≈Çami</li>
                            <li>Sauna 4-5 osobowa Infrared</li>
                            <li>Jacuzzi ogrzewane drewnem (w cenie)</li>
                            <li>Pe≈Çne wyposa≈ºenie i klimatyzacja</li>
                            <li>Hamaki i strefa relaksu</li>
                            <li>Grill do dyspozycji</li>
                            <li>Plac zabaw dla dzieci</li>
                            <li>Trampolina</li>
                            <li>Miejsce na ognisko</li>
                            <li> Teren ogrodzony</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
    );
}
</file>

<file path="src/app/(root)/booking/page.module.css">
.container {
    width: 100%;
    max-width: 100%;
    margin: 0 auto;
    padding: 20px 15px; 
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: #333;
    min-height: 60vh;
}

.head h2 {
    text-align: center;
    color: #2c3e50;
    margin-bottom: 20px;
    font-size: 1.5rem; 
    line-height: 1.2;
}

.searchBox {
    background: #ffffff;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    padding: 15px;
    display: flex;
    flex-direction: column; 
    gap: 12px;
    align-items: stretch;
    position: relative;
    z-index: 10;
}

.gestsBox,
.dateBox {
    width: 100%; 
    position: relative;
}

.gests,
.date,
.cabins {
    background: #f8f9fa;
    border: 1px solid #e9ecef;
    border-radius: 8px;
    padding: 14px 15px; 
    cursor: pointer;
    font-weight: 500;
    color: #495057;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: space-between; 
    font-size: 1rem;
    min-height: 50px; 
}

.gests:hover,
.date:hover,
.cabins:hover {
    border-color: #3498db;
    background: #fff;
}

.iconSmall {
    color: #3498db;
    margin-right: 10px;
    font-size: 1.1rem;
}

.setGests,
.setDate,
.setCabins {
    position: absolute;
    top: 100%;
    left: 0;
    width: 100%; 
    background: white;
    border: 1px solid #eee;
    border-radius: 8px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
    padding: 15px;
    margin-top: 8px;
    display: none;
    z-index: 20;
    flex-direction: column;
    gap: 15px;
    box-sizing: border-box;
}

.expandedGests,
.expandedDate,
.expandedCabins {
    display: flex;
}

.pickerWrap {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 10px;
}

.label {
    font-size: 0.9rem;
    color: #555;
    font-weight: 600;
}

.info {
    font-size: 0.8rem;
    color: #888;
    font-style: italic;
    display: block;
    margin-top: 5px;
}

.buttOk {
    background: #2c3e50;
    color: white;
    border: none;
    padding: 12px; 
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
    font-size: 1rem;
    width: 100%; 
    margin-top: 5px;
}

.button {
    background: #27ae60;
    color: white;
    border: none;
    padding: 16px 30px;
    border-radius: 8px;
    font-size: 1.1rem;
    font-weight: bold;
    cursor: pointer;
    transition: background 0.2s;
    width: 100%; 
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 54px;
    margin-top: 5px;
}

.button:hover:not(:disabled) {
    background: #219150;
}

.button:disabled {
    background: #95a5a6;
    cursor: not-allowed;
    opacity: 0.7;
}

/* --- WYNIKI --- */
.resultsContainer {
    margin-top: 30px;
    min-height: 200px;
}

.loadingState,
.emptyState {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    justify-content: center;
    text-align: center;
    padding: 30px 20px;
    color: #7f8c8d;
    font-size: 1rem;
}

.emptyIcon {
    font-size: 3rem;
    color: #e74c3c;
    display: block;
}

.resultsGrid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 20px;
}

.resultsTitle {
    grid-column: 1 / -1;
    margin-bottom: 15px;
    color: #2c3e50;
    border-bottom: 2px solid #eee;
    padding-bottom: 10px;
    font-size: 1.2rem;
}

/* Karta Wyniku */
.resultCard {
    background: white;
    border: 1px solid #eef2f5;
    border-radius: 10px;
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    transition: transform 0.2s, box-shadow 0.2s;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.03);
    width: 100%;
    box-sizing: border-box;
}

.resultCard:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
    border-color: #3498db;
}

.cardHeader {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 8px;
}

.cardBadge {
    background: #3498db;
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.65rem;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.privacyBadge {
    background: #9b59b6;
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.65rem;
    font-weight: bold;
}

.cardTitle {
    margin: 0;
    font-size: 1.15rem;
    color: #2c3e50;
    line-height: 1.3;
}

.cardDesc {
    font-size: 0.9rem;
    color: #666;
    line-height: 1.5;
    margin: 0;
}

.cardDetails {
    font-size: 0.85rem;
    color: #888;
    border-top: 1px solid #f0f0f0;
    padding-top: 10px;
}

.cardPrice {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: auto;
    padding-top: 15px;
    border-top: 1px dashed #ddd;
}

.priceLabel {
    font-size: 0.9rem;
    color: #555;
}

.priceValue {
    font-size: 1.3rem;
    font-weight: bold;
    color: #27ae60;
}

.btnSelect {
    width: 100%;
    padding: 14px;
    background: #2c3e50;
    color: white;
    border: none;
    border-radius: 6px;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s;
    font-size: 1rem;
    margin-top: 10px;
}

.btnSelect:hover {
    background: #34495e;
}

.formOverlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: flex-end;
    z-index: 1000;
    padding: 0;
}

.bookingForm {
    background: white;
    padding: 25px 20px;
    border-radius: 16px 16px 0 0; 
    width: 100%;
    max-width: 500px;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
    animation: slideUp 0.3s ease-out;
    margin-bottom: 0;
}

@keyframes slideUp {
    from { transform: translateY(100%); }
    to { transform: translateY(0); }
}

.formHeader {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid #eee;
}

.formHeader h2 {
    margin: 0;
    font-size: 1.3rem;
    color: #2c3e50;
    text-align: left;
}

.closeBtn {
    background: #f1f1f1;
    border: none;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    font-size: 1.5rem;
    line-height: 1;
    cursor: pointer;
    color: #555;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
}

.closeBtn:hover {
    background: #e0e0e0;
    color: #000;
}

.summaryBox {
    background: #f8f9fa;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 20px;
    font-size: 0.9rem;
}

.summaryBox p {
    margin: 6px 0;
    line-height: 1.4;
}

.divider {
    border: 0;
    border-top: 1px solid #ddd;
    margin: 12px 0;
}

.totalPrice {
    font-size: 1.1rem;
    color: #27ae60;
    text-align: right;
    margin-top: 10px;
    font-weight: 700;
}

.dataForm {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.inputGroup {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.inputGroup span {
    font-size: 0.9rem;
    font-weight: 600;
    color: #555;
}

.inputGroup input {
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 1rem; 
    width: 100%;
    box-sizing: border-box;
    min-height: 44px;
}

.inputGroup input:focus {
    outline: none;
    border-color: #3498db;
    box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
}

.checkboxLabel {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    font-size: 0.9rem;
    color: #555;
    cursor: pointer;
    line-height: 1.4;
}

.checkboxLabel input {
    margin-top: 4px;
    width: 18px;
    height: 18px;
    flex-shrink: 0;
}

.formButtons {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-top: 15px;
}

.btnCancel {
    width: 100%;
    padding: 14px;
    background: #ecf0f1;
    color: #2c3e50;
    border: none;
    border-radius: 6px;
    font-weight: 600;
    cursor: pointer;
    font-size: 1rem;
}

.btnSubmit {
    width: 100%;
    padding: 14px;
    background: #27ae60;
    color: white;
    border: none;
    border-radius: 6px;
    font-weight: 600;
    cursor: pointer;
    font-size: 1rem;
    order: -1; 
    order: 2;
}

.btnCancel {
    order: 1;
}

.btnSubmit:hover {
    background: #219150;
}

.spinIcon {
    font-size: 2.5rem;
    color: #3498db;
    margin-bottom: 10px;
    display: block;
}

.doubleIcon {
    color: #9b59b6;
    margin-right: 5px;
}

.badgeDouble {
    background-color: #9b59b6;
}

.badgeSingle {
    background-color: #3498db;
}

.highlightInfo {
    color: #27ae60;
    font-weight: bold;
    font-size: 0.9rem;
    margin-top: 8px;
    display: block;
}

@media (min-width: 600px) {
    .container {
        padding: 40px 20px;
        max-width: 1000px;
    }

    .head h2 {
        font-size: 2rem;
        margin-bottom: 30px;
    }

    .searchBox {
        flex-direction: row; 
        align-items: flex-end;
        gap: 15px;
        padding: 20px;
    }

    .gestsBox,
    .dateBox {
        flex: 1;
        min-width: 200px;
    }

    .button {
        width: auto;
        min-width: 140px;
        margin-top: 0;
        padding: 14px 30px;
    }

    .setGests,
    .setDate,
    .setCabins {
        width: 320px;
        left: 0;
    }

    .buttOk {
        width: auto;
        align-self: flex-end;
    }

    .resultsGrid {
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 25px;
    }

    .formOverlay {
        align-items: center;
        padding: 20px;
    }

    .bookingForm {
        border-radius: 12px;
        margin-bottom: 0;
        animation: fadeIn 0.3s ease-out;
        max-height: 85vh;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: scale(0.95); }
        to { opacity: 1; transform: scale(1); }
    }

    .formButtons {
        flex-direction: row;
        gap: 10px;
    }

    .btnCancel, .btnSubmit {
        width: auto;
        flex: 1;
        order: unset;
    }
    
    .cardTitle {
        font-size: 1.2rem;
    }
    
    .priceValue {
        font-size: 1.4rem;
    }
}

@media (min-width: 900px) {
    .container {
        padding: 50px 30px;
    }
}
</file>

<file path="src/app/(root)/booking/page.tsx">
'use client'

import React, { useState, useRef } from 'react';
import { searchAction, SearchOption } from '@/actions/searchActions';
import QuantityPicker from '../../_components/QuantityPicker/QuantityPicker';
import CalendarPicker from '../../_components/CalendarPicker/CalendarPicker';
import { useClickOutside } from '@/hooks/useClickOutside';
import styles from "./page.module.css";
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';
import { faUsers, faSpinner, faExclamationCircle, faHouse } from '@fortawesome/free-solid-svg-icons';

interface BookingDates {
    start: string | null;
    end: string | null;
    count: number;
}

export default function BookingPage() {
    const [activeBox, setActiveBox] = useState<string | null>(null);
    const [adults, setAdults] = useState(2);
    const [children, setChildren] = useState(0);
    
    const [bookingDates, setBookingDates] = useState<BookingDates>({
        start: null,
        end: null,
        count: 0
    });
    
    const [isLoading, setIsLoading] = useState(false);
    const [searchResults, setSearchResults] = useState<SearchOption[]>([]);
    const [hasSearched, setHasSearched] = useState(false);
    const [selectedOption, setSelectedOption] = useState<SearchOption | null>(null);
    const [showForm, setShowForm] = useState(false);

    const guestsRef = useRef<HTMLDivElement>(null);
    const datesRef = useRef<HTMLDivElement>(null);

    useClickOutside(guestsRef, () => {
        if (activeBox === 'guests') setActiveBox(null);
    });

    useClickOutside(datesRef, () => {
        if (activeBox === 'dates') setActiveBox(null);
    });

    const totalGuests = adults + children;

    const toggleBox = (boxName: string) => {
        setActiveBox(activeBox === boxName ? null : boxName);
    };

    const closeAllBoxes = () => setActiveBox(null);

    const handleSearch = async () => {
        if (!bookingDates.start || !bookingDates.end || totalGuests === 0) return;

        setIsLoading(true);
        setSearchResults([]);
        setSelectedOption(null);
        setHasSearched(true);
        closeAllBoxes();

        try {
            const results = await searchAction({
                startDate: bookingDates.start,
                endDate: bookingDates.end,
                guests: totalGuests,
                extraBeds: 0
            });
            setSearchResults(results);
        } catch (error) {
            console.error("B≈ÇƒÖd wyszukiwania:", error);
            alert("WystƒÖpi≈Ç b≈ÇƒÖd podczas sprawdzania dostƒôpno≈õci.");
        } finally {
            setIsLoading(false);
        }
    };

    const handleSelectOption = (option: SearchOption) => {
        setSelectedOption(option);
        setShowForm(true);
    };

    const renderGuestsText = () => {
        if (totalGuests === 0) return 'Wybierz ilo≈õƒá os√≥b';
        const adultsText = adults === 1 ? '1 doros≈Çy' : `${adults} doros≈Çych`;
        const childrenText = children === 0 ? '' : (children === 1 ? ', 1 dziecko' : `, ${children} dzieci`);
        return `${adultsText}${childrenText}`;
    };

    const isSearchDisabled = totalGuests === 0 || !bookingDates.start || !bookingDates.end;

    return (
        <div className={styles.container}>
            <div className={styles.head}>
                <h2>Znajd≈∫ sw√≥j termin</h2>
            </div>

            <div className={styles.searchBox}>
                <div className={styles.gestsBox}>
                    <div className={styles.gests} onClick={() => toggleBox('guests')}>
                        <div style={{display: 'flex', alignItems: 'center'}}>
                            <FontAwesomeIcon icon={faUsers} className={styles.iconSmall} />
                            <span>{renderGuestsText()}</span>
                        </div>
                        {/* Ma≈Ça strza≈Çka wskazujƒÖca interaktywno≈õƒá */}
                        <span style={{fontSize: '0.8rem', color: '#aaa'}}>&#9662;</span>
                    </div>
                    
                    <div 
                        ref={guestsRef}
                        className={`${styles.setGests} ${activeBox === 'guests' ? styles.expandedGests : ''}`}
                    >
                        <div className={styles.pickerWrap}>
                            <span className={styles.label}>Doro≈õli:</span>
                            <QuantityPicker
                                onIncrement={() => setAdults(adults + 1)}
                                onDecrement={() => setAdults(adults > 0 ? adults - 1 : 0)}
                                value={adults}
                                min={0}
                                max={12}
                            />
                        </div>
                        <div className={styles.pickerWrap}>
                            <span className={styles.label}>Dzieci:</span>
                            <QuantityPicker
                                onIncrement={() => setChildren(children + 1)}
                                onDecrement={() => setChildren(children > 0 ? children - 1 : 0)}
                                value={children}
                                min={0}
                                max={12}
                            />
                        </div>
                        <span className={styles.info}>* Dzieci do lat 13 bezp≈Çatnie</span>
                        <button className={styles.buttOk} onClick={closeAllBoxes}>Gotowe</button>
                    </div>
                </div>

                <div className={styles.dateBox}>
                    <div className={styles.date} onClick={() => toggleBox('dates')}>
                        <div style={{display: 'flex', alignItems: 'center', justifyContent: 'space-between', width: '100%'}}>
                            <span>
                                {(bookingDates.start && bookingDates.end) 
                                    ? `${bookingDates.start} ‚Äî ${bookingDates.end}` 
                                    : 'Wybierz daty'}
                            </span>
                            <span style={{fontSize: '0.8rem', color: '#aaa'}}>&#9662;</span>
                        </div>
                    </div>
                    
                    <div 
                        ref={datesRef}
                        className={`${styles.setDate} ${activeBox === 'dates' ? styles.expandedDate : ''}`}
                    >
                        <CalendarPicker
                            unavailableDates={[]}
                            onDateChange={setBookingDates}
                        />
                        <button className={styles.buttOk} onClick={closeAllBoxes}>Gotowe</button>
                    </div>
                </div>

                <button
                    className={styles.button}
                    disabled={isSearchDisabled || isLoading}
                    onClick={handleSearch}
                >
                    {isLoading ? <FontAwesomeIcon icon={faSpinner} spin /> : 'Szukaj'}
                </button>
            </div>

            <div className={styles.resultsContainer}>
                {isLoading && (
                    <div className={styles.loadingState}>
                        <FontAwesomeIcon icon={faSpinner} spin className={styles.spinIcon} />
                        <p>Sprawdzam dostƒôpno≈õƒá domk√≥w...</p>
                    </div>
                )}

                {!isLoading && hasSearched && searchResults.length === 0 && (
                    <div className={styles.emptyState}>
                        <FontAwesomeIcon icon={faExclamationCircle} className={styles.emptyIcon} />
                        <h3>Brak wolnych termin√≥w</h3>
                        <p>Niestety dla wybranej liczby go≈õci i dat nie mamy dostƒôpnych domk√≥w.</p>
                        <p>Spr√≥buj zmieniƒá daty lub zmniejszyƒá liczbƒô os√≥b.</p>
                    </div>
                )}

                {!isLoading && searchResults.length > 0 && (
                    <div className={styles.resultsGrid}>
                        <h3 className={styles.resultsTitle}>
                            Dostƒôpne opcje ({searchResults.length})
                        </h3>
                        
                        {searchResults.map((option, index) => (
                            <div key={`${option.displayName}-${index}`} className={styles.resultCard}>
                                <div className={styles.cardHeader}>
                                    <span className={`${styles.cardBadge} ${option.type === 'double' ? styles.badgeDouble : styles.badgeSingle}`}>
                                        {option.type === 'double' ? 'CA≈ÅA POSESJA' : 'POJEDYNCZY DOMEK'}
                                    </span>
                                    {option.type === 'double' && (
                                        <span className={styles.privacyBadge}>Prywatny teren</span>
                                    )}
                                </div>
                                
                                <h4 className={styles.cardTitle}>
                                    {option.type === 'double' ? (
                                        <>
                                            <FontAwesomeIcon icon={faHouse} className={styles.doubleIcon} />
                                            &nbsp;{option.displayName}
                                        </>
                                    ) : option.displayName}
                                </h4>
                                
                                <p className={styles.cardDesc}>{option.description}</p>
                                
                                <div className={styles.cardDetails}>
                                    <span>Maks. {option.maxGuests} os√≥b</span>
                                </div>

                                <div className={styles.cardPrice}>
                                    <span className={styles.priceLabel}>Cena za ca≈Ço≈õƒá:</span>
                                    <span className={styles.priceValue}>{option.totalPrice} z≈Ç</span>
                                </div>

                                <button 
                                    className={styles.btnSelect}
                                    onClick={() => handleSelectOption(option)}
                                >
                                    Wybieram tƒô opcjƒô
                                </button>
                            </div>
                        ))}
                    </div>
                )}
            </div>

            {showForm && selectedOption && (
                <div className={styles.formOverlay} onClick={() => setShowForm(false)}>
                    <div className={styles.bookingForm} onClick={(e) => e.stopPropagation()}>
                        <div className={styles.formHeader}>
                            <h2>Podsumowanie</h2>
                            <button className={styles.closeBtn} onClick={() => setShowForm(false)}>√ó</button>
                        </div>
                        
                        <div className={styles.summaryBox}>
                            <p><strong>Obiekt:</strong> {selectedOption.displayName}</p>
                            <p><strong>Termin:</strong> {bookingDates.start} do {bookingDates.end}</p>
                            <p><strong>Go≈õcie:</strong> {totalGuests} os√≥b ({adults} dosp., {children} dz.)</p>
                            {selectedOption.type === 'double' && (
                                <p className={styles.highlightInfo}>üéâ Wynajmujesz ca≈Çy obiekt!</p>
                            )}
                            <hr className={styles.divider} />
                            <p className={styles.totalPrice}>Do zap≈Çaty: <strong>{selectedOption.totalPrice} z≈Ç</strong></p>
                        </div>

                        <form className={styles.dataForm} onSubmit={(e) => {
                            e.preventDefault();
                            alert("Tu nastƒÖpi przekierowanie do p≈Çatno≈õci (Stripe/Przelewy24).");
                        }}>
                            <label className={styles.inputGroup}>
                                <span>Imiƒô i Nazwisko</span>
                                <input type="text" name="name" required placeholder="np. Jan Kowalski" />
                            </label>
                            
                            <label className={styles.inputGroup}>
                                <span>Email</span>
                                <input type="email" name="email" required placeholder="jan@example.com" />
                            </label>
                            
                            <label className={styles.inputGroup}>
                                <span>Telefon</span>
                                <input type="tel" name="phone" required placeholder="+48 123 456 789" />
                            </label>

                            <label className={styles.checkboxLabel}>
                                <input type="checkbox" required />
                                <span>Akceptujƒô regulamin i politykƒô prywatno≈õci</span>
                            </label>

                            <div className={styles.formButtons}>
                                <button type="button" className={styles.btnCancel} onClick={() => setShowForm(false)}>Anuluj</button>
                                <button type="submit" className={styles.btnSubmit}>
                                    Przejd≈∫ do p≈Çatno≈õci
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            )}
        </div>
    );
}
</file>

<file path="src/app/admin/bookings/add/page.tsx">
'use client';

import { useEffect, useRef } from 'react';
import { useFormState, useFormStatus } from 'react-dom';
import styles from './page.module.css';
import { createManualBooking } from '@/actions/adminBookingActions';

const initialState = {
  message: '',
  success: false,
};

function SubmitButton() {
  const { pending } = useFormStatus();

  return (
    <button type="submit" className={styles.btnSubmit} disabled={pending}>
      {pending ? 'Zapisywanie...' : 'Zapisz Rezerwacjƒô'}
    </button>
  );
}

export default function AddBookingPage() {
  const [state, formAction] = useFormState(createManualBooking, initialState);
  const formRef = useRef<HTMLFormElement>(null);

  useEffect(() => {
    if (state.success) {
      alert(state.message); // Lub lepszy UI np. toast
      formRef.current?.reset();
    }
    if (!state.success && state.message) {
      alert(`B≈ÇƒÖd: ${state.message}`);
    }
  }, [state]);

  return (
    <div className={styles.container}>
      <header className={styles.header}>
        <h1>Dodaj NowƒÖ Rezerwacjƒô</h1>
        <p>Rƒôczne wprowadzenie rezerwacji (np. telefonicznej)</p>
      </header>

      <form ref={formRef} action={formAction} className={styles.formCard}>
        <div className={styles.sectionTitle}>Termin i Obiekt</div>
        
        <div className={styles.grid}>
          <div className={styles.inputGroup}>
            <label htmlFor="startDate">Data przyjazdu</label>
            <input id="startDate" type="date" required name="startDate" />
          </div>
          <div className={styles.inputGroup}>
            <label htmlFor="endDate">Data wyjazdu</label>
            <input id="endDate" type="date" required name="endDate" />
          </div>
          <div className={styles.inputGroup}>
            <label htmlFor="propertyId">Obiekt</label>
            <select id="propertyId" name="propertyId">
              <option value="cabin1">Domek 1 (Sosnowy)</option>
              <option value="cabin2">Domek 2 (Brzozowy)</option>
              <option value="both">Ca≈Ça posesja</option>
            </select>
          </div>
          <div className={styles.inputGroup}>
            <label htmlFor="numGuests">Liczba go≈õci</label>
            <input id="numGuests" name="numGuests" type="number" min="1" max="12" defaultValue="2" />
          </div>
        </div>

        <div className={styles.sectionTitle}>Dane Go≈õcia</div>
        
        <div className={styles.grid}>
          <div className={styles.inputGroup}>
            <label htmlFor="guestName">Imiƒô i Nazwisko</label>
            <input id="guestName" name="guestName" type="text" required placeholder="np. Jan Kowalski" />
          </div>
          <div className={styles.inputGroup}>
            <label htmlFor="guestEmail">Email</label>
            <input id="guestEmail" name="guestEmail" type="email" required placeholder="jan@example.com" />
          </div>
          <div className={styles.inputGroup}>
            <label htmlFor="guestPhone">Telefon</label>
            <input id="guestPhone" name="guestPhone" type="tel" required placeholder="+48 123 456 789" />
          </div>
          <div className={styles.inputGroup}>
            <label htmlFor="totalPrice">Cena ca≈Çkowita (PLN)</label>
            <input id="totalPrice" name="totalPrice" type="number" required placeholder="0.00" step="0.01" />
          </div>
        </div>

        <div className={styles.inputGroup}>
          <label htmlFor="internalNotes">Uwagi wewnƒôtrzne</label>
          <textarea id="internalNotes" name="internalNotes" rows={3} placeholder="Np. Go≈õƒá prosi o ≈Ç√≥≈ºeczko dla dziecka"></textarea>
        </div>

        <div className={styles.actions}>
          <button type="button" className={styles.btnCancel} onClick={() => formRef.current?.reset()}>Anuluj</button>
          <SubmitButton />
        </div>
      </form>
    </div>
  );
}
</file>

<file path="src/app/admin/bookings/calendar/page.module.css">
:root {
    --cal-color-primary: #2e7d32;
    /* --cal-color-primary-bg: #e8f5e9; */
     --cal-color-primary-bg: #ffffff;
    --cal-color-booked: #c62828;
    --cal-color-booked-bg: #ffebee;
    --cal-color-cleaning: #ef6c00;
    --cal-color-cleaning-bg: #fff3e0;
    --cal-color-blocked: #1565c0;
    --cal-color-blocked-bg: #e3f2fd;
    --cal-color-weekend-bg: #f1f1f1;
    --cal-color-text-dark: #333;
    --cal-color-text-light: #777;
    --cal-color-border: #ddd;
    --cal-color-header-bg: #f8f9fa;
    --cal-link-color: #1976d2;
    --cal-link-hover: #d32f2f;
}

.container {
    padding: 1rem;
    max-width: 100%;
    margin: 0 auto;
    font-family: var(--font-body), sans-serif;
    min-height: 85vh;
}

.headerControls {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    margin-bottom: 1rem;
    flex-wrap: wrap;
}

.selectInput {
    padding: 0.5rem 1rem;
    font-size: 1rem;
    border: 1px solid var(--cal-color-border);
    border-radius: 6px;
    background-color: white;
    cursor: pointer;
    min-width: 140px;
    outline: none;
    transition: border-color 0.2s;
}

.selectInput:focus {
    border-color: var(--cal-color-primary);
}

.monthTitle {
    font-size: 1.5rem;
    margin: 0;
    color: var(--cal-color-text-dark);
    min-width: 200px;
    text-align: center;
}

.tableWrapper {
    overflow-x: auto;
    overflow-y: auto;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    border: 1px solid var(--cal-color-border);
    position: relative;
    background: white;
}

.calendarTable {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    table-layout: fixed;
    font-size: 0.75rem;
    background: white;
}

.calendarTable th,
.calendarTable td {
    padding: 6px 4px;
    text-align: center;
    border-bottom: 1px solid #eee;
    border-right: 1px solid #f5f5f5;
    vertical-align: middle;
    white-space: nowrap;
}

.calendarTable th:last-child,
.calendarTable td:last-child {
    border-right: none;
}

.calendarTable th {
    background-color: var(--cal-color-header-bg);
    color: #444;
    font-weight: 700;
    font-size: 0.7rem;
    text-transform: uppercase;
    height: 40px;
    width: 100px;
}

.calendarTable th:first-child,
.calendarTable td:first-child {
    width: 100px;
    min-width: 100px;
}

.calendarTable th:not(:first-child),
.calendarTable td:not(:first-child) {
    width: 80px;
    min-width: 80px;
}

.stickyCol {
    position: sticky;
    left: 0;
    z-index: 10;
    background-color: #fafafa;
    border-right: 2px solid #ccc;
}

.calendarTable thead th.stickyCol {
    top: 0;
    left: 0;
    z-index: 30;
    background-color: var(--cal-color-header-bg);
}

.calendarTable thead th {
    position: sticky;
    top: 0;
    z-index: 20;
    background-color: var(--cal-color-header-bg);
    border-bottom: 2px solid #ccc;
}

.dateCell {
    font-weight: 700;
    color: var(--cal-color-text-dark);
    background-color: #fafafa;
    padding: 4px 2px;
}

.weekendCell {
    background-color: var(--cal-color-weekend-bg);
    color: var(--cal-color-text-dark);
}

.dateContent {
    display: flex;
    flex-direction: column;
    gap: 2px;
    line-height: 1.2;
}

.dateDay {
    font-size: 0.8rem;
}

.dateWeekday {
    font-size: 0.65rem;
    font-weight: 600;
    text-transform: uppercase;
    color: var(--cal-color-text-light);
}

.cell {
    transition: background-color 0.2s;
}

.free {
    background-color: var(--cal-color-primary-bg);
    color: var(--cal-color-primary);
    font-weight: 600;
    cursor: pointer;
}

.booked {
    background-color: var(--cal-color-booked-bg);
    color: var(--cal-color-booked);
    font-weight: 700;
    cursor: pointer;
}

.cleaning {
    background-color: var(--cal-color-cleaning-bg);
    color: var(--cal-color-cleaning);
    font-style: italic;
    cursor: pointer;
}

.blockedSys {
    background-color: var(--cal-color-blocked-bg);
    color: var(--cal-color-blocked);
    font-size: 0.7rem;
}

.statusText {
    line-height: 1.2;
    display: block;
}

.tooltipContainer {
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%) translateY(-5px);
    width: 240px;
    max-width: 90vw;
    z-index: 100;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease-in-out;
    pointer-events: none;
}

td:hover .tooltipContainer,
td:focus-within .tooltipContainer {
    opacity: 1;
    visibility: visible;
    transform: translateX(-50%) translateY(-2px);
}

.tooltip {
    background: white;
    border-radius: 6px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
    border: 1px solid #eaeaea;
    padding: 10px;
    font-size: 0.75rem;
    color: #333;
    line-height: 1.4;
    position: relative;
    overflow: hidden;
    text-align: left;
    pointer-events: auto;
}

.tooltip::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    margin-left: -5px;
    border-width: 5px;
    border-style: solid;
    border-color: white transparent transparent transparent;
}

.tooltipHeader {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
    padding-bottom: 6px;
    border-bottom: 1px solid #f0f0f0;
}

.guestNameText {
    margin: 0;
    font-size: 0.85rem;
    font-weight: 700;
    color: #111;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 60%;
}

.badge {
    background: #e8f5e9;
    color: #2e7d32;
    padding: 2px 6px;
    border-radius: 10px;
    font-size: 0.6rem;
    font-weight: 700;
    text-transform: uppercase;
    flex-shrink: 0;
}

.tooltipRow {
    display: flex;
    justify-content: space-between;
    margin-bottom: 4px;
    gap: 8px;
    align-items: flex-start;
}

.label {
    color: var(--cal-color-text-light);
    font-weight: 600;
    white-space: nowrap;
    flex-shrink: 0;
    font-size: 0.65rem;
}

.valueText {
    text-align: right;
    word-break: break-word;
    font-size: 0.7rem;
    color: #222;
    font-weight: 500;
    overflow-wrap: anywhere;
    line-height: 1.3;
}

.clickableLink {
    color: var(--cal-link-color);
    text-decoration: none;
    border-bottom: 1px dotted var(--cal-link-color);
    transition: color 0.2s;
    cursor: pointer;
}

.clickableLink:hover {
    color: var(--cal-link-hover);
    border-bottom-style: solid;
    text-decoration: none;
}

.priceValue {
    font-weight: 700;
    color: var(--cal-color-primary);
    font-size: 0.75rem;
    white-space: nowrap;
}

.contactValue {
    font-size: 0.65rem;
    color: #444;
    max-width: 130px;
    display: inline-block;
}

.tooltipSection {
    margin-top: 8px;
    padding-top: 8px;
    border-top: 1px dashed #eee;
}

.legend {
    display: flex;
    gap: 0.8rem;
    justify-content: center;
    flex-wrap: wrap;
    font-size: 0.7rem;
    color: #555;
    padding: 0.8rem 0 0 0;
}

.legend span {
    display: flex;
    align-items: center;
    gap: 0.4rem;
}

.dot {
    width: 9px;
    height: 9px;
    border-radius: 50%;
    display: inline-block;
    flex-shrink: 0;
}

.bookedDot {
    background-color: var(--cal-color-booked);
}

.cleaningDot {
    background-color: var(--cal-color-cleaning);
}

.blockedSysDot {
    background-color: var(--cal-color-blocked);
}

.freeDot {
    background-color: var(--cal-color-primary);
}

.navButton {
    background: white;
    border: 1px solid var(--cal-color-border);
    border-radius: 6px;
    width: 40px;
    height: 42px;
    /* Dopasowane do wysoko≈õci selecta */
    font-size: 1.5rem;
    line-height: 1;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--cal-color-text-dark);
    transition: all 0.2s;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    padding: 0;
    /* Reset paddingu */
}

.navButton:hover {
    background-color: var(--cal-color-header-bg);
    color: var(--cal-color-primary);
    border-color: var(--cal-color-primary);
    transform: translateY(-1px);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.navButton:active {
    transform: translateY(0);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

@media (max-width: 480px) {
    .headerControls {
        gap: 0.7rem;
    }

    .selectInput {
        min-width: 80px;
        font-size: 0.9rem;
        padding: 0.4rem;
    }

    .calendarTable {
        font-size: 0.65rem;
    }

    .calendarTable th:first-child,
    .calendarTable td:first-child {
        width: 80px;
        min-width: 80px;
    }

    .calendarTable th:not(:first-child),
    .calendarTable td:not(:first-child) {
        width: 70px;
        min-width: 70px;
    }

    .dateDay {
        font-size: 0.75rem;
    }

    .dateWeekday {
        font-size: 0.6rem;
    }

    .guestNameText {
        font-size: 0.8rem;
    }

    .legend {
        font-size: 0.65rem;
        gap: 0.5rem;
    }

    .dot {
        width: 8px;
        height: 8px;
    }

    .navButton {
        width: 36px;
        height: 38px;
        font-size: 1.2rem;
    }
}
</file>

<file path="src/app/admin/bookings/list/[id]/page.tsx">
import { getBookingById, deleteBooking } from '@/actions/adminBookingActions';
import { notFound, redirect } from 'next/navigation';
import EditBookingForm from './EditBookingForm';
import Link from 'next/link';
import styles from './page.module.css';

export default async function BookingDetailsPage({ params }: { params: { id: string } }) {
  const { id } = await params;
  const booking = await getBookingById(id);

  if (!booking) {
    notFound();
  }

  return (
    <div className={styles.container}>
      <header className={styles.header}>
        <Link href="/admin/bookings/list" className={styles.backButton}>
          ‚Üê Powr√≥t do listy
        </Link>
        <h1>Szczeg√≥≈Çy Rezerwacji</h1>
      </header>

      <div className={styles.grid}>
        <div className={styles.mainCard}>
          <h2 className={styles.cardTitle}>Edycja Danych</h2>
          <EditBookingForm initialData={booking} />
        </div>

        <div className={styles.sideCard}>
          <div className={styles.infoBlock}>
            <h3>Podsumowanie</h3>
            <div className={styles.infoRow}>
              <span>ID:</span>
              <code>{booking._id}</code>
            </div>
            <div className={styles.infoRow}>
              <span>Utworzono:</span>
              <span>{new Date(booking.createdAt).toLocaleString('pl-PL')}</span>
            </div>
            {booking.bookingType === 'shadow' && (
              <div className={styles.warningBox}>
                ‚ö†Ô∏è Jest to blokada systemowa (Shadow Booking).
              </div>
            )}
          </div>

          <div className={styles.actionsBlock}>
            <h3>Strefa Niebezpieczna</h3>
            <form action={async () => {
              'use server';
              const result = await deleteBooking(booking._id);
              if (result.success) {
                redirect('/admin/bookings/list');
              } else {
                console.error(result.message);
              }
            }}>
               <button type="submit" className={styles.deleteBtn}>
                 üóëÔ∏è Usu≈Ñ Rezerwacjƒô
               </button>
            </form>
            <p className={styles.deleteHint}>Usuniƒôcie rezerwacji zwolni termin w kalendarzu.</p>
          </div>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="src/app/admin/bookings/list/page.module.css">
.container {
  max-width: 1200px;
  margin: 0 auto;
}

.header {
  margin-bottom: 30px;
}

.headerTop {
  display: flex;
  flex-direction: column;
  gap: 15px;
  margin-bottom: 10px;
}

.backButton {
  display: inline-block;
  color: #64748b;
  text-decoration: none;
  font-weight: 600;
  font-size: 0.9rem;
  transition: color 0.2s;
  width: fit-content;
}

.backButton:hover {
  color: #2563eb;
}

.header h1 {
  font-size: 1.8rem;
  color: #1e293b;
  margin: 0;
}

.header p {
  color: #64748b;
  margin: 0;
}

.tableWrapper {
  background: white;
  border-radius: 12px;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  overflow-x: auto;
  border: 1px solid #e2e8f0;
}

.bookingsTable {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.9rem;
}

.bookingsTable th {
  text-align: left;
  padding: 16px;
  background: #f8fafc;
  color: #475569;
  font-weight: 600;
  border-bottom: 2px solid #e2e8f0;
  white-space: nowrap;
}

.bookingsTable td {
  padding: 16px;
  border-bottom: 1px solid #e2e8f0;
  color: #334155;
  vertical-align: middle;
}

.rowLink {
  cursor: pointer;
  transition: background-color 0.2s;
}

.rowLink:hover {
  background-color: #f1f5f9;
}

.guestCell {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.guestName {
  font-weight: 600;
  color: #1e293b;
}

.guestContact {
  font-size: 0.85rem;
  color: #64748b;
}

.centerCell {
  text-align: center;
}

.priceCell {
  font-weight: 700;
  color: #16a34a;
  white-space: nowrap;
}

.badge {
  padding: 4px 10px;
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: 700;
  text-transform: uppercase;
  display: inline-block;
}

.badgeConfirmed { background: #dcfce7; color: #166534; }
.badgeBlocked { background: #fee2e2; color: #991b1b; }
.badgeCancelled { background: #f1f5f9; color: #475569; }
.badgePending { background: #fef3c7; color: #92400e; }

.editBtn {
  background: #2563eb;
  color: white;
  padding: 6px 12px;
  border-radius: 6px;
  text-decoration: none;
  font-size: 0.85rem;
  font-weight: 600;
  transition: background 0.2s;
}

.editBtn:hover {
  background: #1d4ed8;
}

.emptyState {
  text-align: center;
  padding: 60px 20px;
  color: #64748b;
  background: white;
  border-radius: 12px;
  border: 1px dashed #cbd5e1;
}

@media (max-width: 768px) {
  .bookingsTable thead { display: none; }
  .bookingsTable tr {
    display: block;
    border-bottom: 1px solid #e2e8f0;
    padding: 15px 0;
  }
  .bookingsTable td {
    display: flex;
    align-items: center;
    padding: 8px 15px;
    border: none;
    text-align: right;
  }
  .bookingsTable td::before {
    content: attr(data-label);
    font-weight: 600;
    color: #64748b;
    text-transform: uppercase;
    font-size: 0.75rem;
    margin-right: 15px;
  }
  .rowLink { cursor: default; }
  .rowLink:hover { background: transparent; }
}
</file>

<file path="src/db/connection.ts">
import mongoose from 'mongoose';
import '@/db/models/Booking';
import '@/db/models/Property';
import '@/db/models/PriceConfig';
import '@/db/models/SystemConfig';

const MONGODB_URI = process.env.MONGODB_URI!;

if (!MONGODB_URI) {
  throw new Error('Please define the MONGODB_URI environment variable');
}

let cached = (global as any).mongoose;

if (!cached) {
  cached = (global as any).mongoose = { conn: null, promise: null };
}

async function dbConnect() {
  if (cached.conn) return cached.conn;

  if (!cached.promise) {
    cached.promise = mongoose.connect(MONGODB_URI, {
      dbName: 'wilczechatki',
    }).then((mongoose) => mongoose);
  }
  cached.conn = await cached.promise;
  return cached.conn;
}

export default dbConnect;
</file>

<file path="src/db/models/Property.ts">
import mongoose, { Schema, Document } from 'mongoose';

export interface IProperty extends Document {
  name: string;
  description?: string;
  baseCapacity: number;
  maxCapacityWithExtra: number;
  isActive: boolean;
}

const PropertySchema = new Schema<IProperty>({
  name: { 
    type: String, 
    required: true,
    trim: true
  },
  description: { 
    type: String, 
    trim: true 
  },
  baseCapacity: { 
    type: Number, 
    required: true, 
    default: 4 
  },
  maxCapacityWithExtra: { 
    type: Number, 
    required: true, 
    default: 6 
  },
  isActive: { 
    type: Boolean, 
    default: true 
  }
}, { timestamps: true });

export default mongoose.models.Property || mongoose.model<IProperty>('Property', PropertySchema);
</file>

<file path="src/hooks/useClickOutside.ts">
import { useEffect, RefObject } from 'react';

type Event = MouseEvent | TouchEvent;

export const useClickOutside = <T extends HTMLElement = HTMLElement>(
  ref: RefObject<T| null>,
  handler: () => void
) => {
  useEffect(() => {
    const listener = (event: Event) => {
      const el = ref?.current;
      
      if (!el || el.contains(event.target as Node)) {
        return;
      }

      handler();
    };

    document.addEventListener('mousedown', listener);
    document.addEventListener('touchstart', listener);

    return () => {
      document.removeEventListener('mousedown', listener);
      document.removeEventListener('touchstart', listener);
    };
  }, [ref, handler]);
};
</file>

<file path="src/utils/calculatePrice.ts">
import dbConnect from '@/db/connection';
import PriceConfig from '@/db/models/PriceConfig';

interface PriceBreakdown {
  nightlyPrices: { date: string; price: number; type: 'weekday' | 'weekend'; seasonName?: string }[];
  totalPrice: number;
  extraBedsTotal: number;
  summary: string;
}

export async function calculateDynamicPrice(
  startDate: string,
  endDate: string,
  totalGuests: number,
  extraBedsCount: number
): Promise<PriceBreakdown> {
  await dbConnect();

  const config = await PriceConfig.findById('main');
  
  if (!config) {
    throw new Error("Konfiguracja cen nie zosta≈Ça znaleziona w bazie danych.");
  }

  const start = new Date(startDate);
  const end = new Date(endDate);
  const nightlyPrices: PriceBreakdown['nightlyPrices'] = [];
  let totalPrice = 0;

  for (let d = new Date(start); d < end; d.setDate(d.getDate() + 1)) {
    const currentDay = d.getDay();
    const isWeekend = currentDay === 5 || currentDay === 6;
    
    const activeSeason = config.seasons.find(s => 
      s.isActive && 
      d >= s.startDate && 
      d <= s.endDate
    );

    const ratesSource = activeSeason ? activeSeason : config.baseRates;
    const extraBedPrice = activeSeason?.extraBedPrice ?? config.baseRates.extraBedPrice;

    const tier = ratesSource[isWeekend ? 'weekend' : 'weekday'].find(r => 
      totalGuests >= r.minGuests && totalGuests <= r.maxGuests
    ) || ratesSource[isWeekend ? 'weekend' : 'weekday'][ratesSource[isWeekend ? 'weekend' : 'weekday'].length - 1];

    const nightPrice = tier.price + (extraBedsCount * extraBedPrice);

    nightlyPrices.push({
      date: d.toISOString().split('T')[0],
      price: nightPrice,
      type: isWeekend ? 'weekend' : 'weekday',
      seasonName: activeSeason?.name
    });

    totalPrice += nightPrice;
  }

  return {
    nightlyPrices,
    totalPrice,
    extraBedsTotal: extraBedsCount * (activeSeason?.extraBedPrice ?? config.baseRates.extraBedPrice) * getNightsCount(start, end),
    summary: `${getNightsCount(start, end)} nocleg√≥w, ${totalGuests} go≈õci, ${extraBedsCount} dostawek`
  };
}

function getNightsCount(start: Date, end: Date): number {
  const diffTime = Math.abs(end.getTime() - start.getTime());
  return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
}
</file>

<file path="src/actions/searchActions.ts">
'use server'

import dbConnect from '@/db/connection';
import Property, { IProperty } from '@/db/models/Property';
import Booking from '@/db/models/Booking';
import PriceConfig, { IPriceConfig, ISeason } from '@/db/models/PriceConfig';
import SystemConfig from '@/db/models/SystemConfig';
import { Types } from 'mongoose';

export interface SearchOption {
  type: 'single' | 'double';
  propertyIds: string[];
  displayName: string;
  totalPrice: number;
  maxGuests: number;
  description: string;
  available: boolean;
}

interface SearchParams {
  startDate: string;
  endDate: string;
  guests: number;
  extraBeds?: number;
}

async function calculateTotalPrice(
  startDate: string,
  endDate: string,
  guests: number,
  extraBeds: number,
  isDouble: boolean = false
): Promise<number> {
  await dbConnect();
  const config = await PriceConfig.findById('main');
  if (!config) return 0;

  const start = new Date(startDate);
  const end = new Date(endDate);
  let total = 0;

  const guestsPerCabin = isDouble ? Math.ceil(guests / 2) : guests;
  const extraBedsPerCabin = isDouble ? Math.ceil(extraBeds / 2) : extraBeds;

  for (let d = new Date(start); d < end; d.setDate(d.getDate() + 1)) {
    const day = d.getDay();
    const isWeekend = (day === 5 || day === 6);
    
    const activeSeason = config.seasons.find((s: ISeason) => 
      s.isActive && d >= s.startDate && d <= s.endDate
    );

    const ratesSource = activeSeason || config.baseRates;
    const bedPrice = activeSeason?.extraBedPrice ?? config.baseRates.extraBedPrice;

    const tierKey = isWeekend ? 'weekend' : 'weekday';
    const tier = ratesSource[tierKey].find(r => 
      guestsPerCabin >= r.minGuests && guestsPerCabin <= r.maxGuests
    ) || ratesSource[tierKey][ratesSource[tierKey].length - 1];

    const nightPrice = tier.price + (extraBedsPerCabin * bedPrice);
    total += isDouble ? nightPrice * 2 : nightPrice;
  }

  return total;
}

export async function searchAction({ 
  startDate, 
  endDate, 
  guests, 
  extraBeds = 0 
}: SearchParams): Promise<SearchOption[]> {
  try {
    await dbConnect();

    const start = new Date(startDate);
    const end = new Date(endDate);

    let sysConfig = await SystemConfig.findById('main');
    
    if (!sysConfig) {
      sysConfig = { autoBlockOtherCabins: true } as any; 
    }
    
    const isAutoBlockEnabled = sysConfig.autoBlockOtherCabins;

    const properties = await Property.find({ isActive: true });
    if (properties.length === 0) return [];

    const propertyIds = properties.map(p => p._id.toString());

    const conflictingBookings = await Booking.find({
      propertyId: { $in: propertyIds.map(id => new Types.ObjectId(id)) },
      status: { $in: ['confirmed', 'blocked'] },
      startDate: { $lte: end },
      endDate: { $gte: start }
    }).select('propertyId');

    const bookedPropertyIds = new Set(
      conflictingBookings.map(b => b.propertyId.toString())
    );

    const options: SearchOption[] = [];

    for (const prop of properties) {
      const isBooked = bookedPropertyIds.has(prop._id.toString());
      
      if (!isBooked) {
        const price = await calculateTotalPrice(startDate, endDate, guests, extraBeds, false);
        
        options.push({
          type: 'single',
          propertyIds: [prop._id.toString()],
          displayName: prop.name,
          totalPrice: price,
          maxGuests: prop.baseCapacity + (prop.maxCapacityWithExtra - prop.baseCapacity),
          description: isAutoBlockEnabled 
            ? "Wynajem pojedynczego domku. Przy tej rezerwacji drugi domek zostanie automatycznie zablokowany." 
            : "Wynajem pojedynczego domku. Drugi domek mo≈ºe byƒá wynajmowany niezale≈ºnie.",
          available: true
        });
      }
    }

    const allFree = properties.every(p => !bookedPropertyIds.has(p._id.toString()));

    if (allFree && properties.length > 1) {
      const price = await calculateTotalPrice(startDate, endDate, guests, extraBeds, true);
      
      options.push({
        type: 'double',
        propertyIds: properties.map(p => p._id.toString()),
        displayName: "Ca≈Ça Posesja (Wszystkie domki)",
        totalPrice: price,
        maxGuests: properties.reduce((sum, p) => sum + p.baseCapacity, 0),
        description: isAutoBlockEnabled
          ? "Maksymalna prywatno≈õƒá. Rezerwacja ca≈Çej posesji blokuje mo≈ºliwo≈õƒá wynajmu pojedynczych domk√≥w."
          : "Maksymalna prywatno≈õƒá. Wynajem wszystkich dostƒôpnych domk√≥w w jednej transakcji.",
        available: true
      });
    }

    return options.sort((a, b) => {
      if (a.type === 'double') return -1;
      if (b.type === 'double') return 1;
      return b.totalPrice - a.totalPrice;
    });

  } catch (error) {
    console.error("B≈ÇƒÖd wyszukiwania dostƒôpno≈õci:", error);
    throw new Error("Nie uda≈Ço siƒô pobraƒá dostƒôpnych termin√≥w.");
  }
}
</file>

<file path="src/app/_components/Navbar/Navbar.module.css">
.container {
    position: relative;
    display: flex;
    align-items: center;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    width: 100%;
    background-color: var(--bg-white);
    height: 80px;
    transition: height 0.3s ease;
    opacity: 1;
    transition: opacity var(--transition);
}

.inner {
    max-width: 1200px;
    margin: 0 auto;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 20px;
}

.smallerNavbar {
    height: 60px;
    opacity: .97;
    background-color: rgba(255, 255, 255, 0.7);
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
}

.logoWrapper {
    display: inline-block;
    position: relative;
    height: 90%;
    width: 75px;
    overflow: hidden;
    transition: height 0.3s ease, width 0.3s ease;

}

.logoImage {
    object-fit: contain;
    object-position: left;
}

.hamburgerContainer {
    position: relative;
    top: 0;
    right: 0;
    z-index: 30;
}

.mobileMenuOuter {
    justify-content: center;
    display: flex;
    align-items: center;
    position: absolute;
    top: 0;
    right: 0;
    width: 0%;
    height: 0px;
    z-index: 20;
    border-radius: 5px;
    overflow: hidden;
    transition: width var(--transition), height var(--transition), opacity var(--transition);
    opacity: 0;
    padding: 6px 12px;
}

.mobileMenuInner {
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 10px;
    overflow: hidden;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.97);
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(18.8px);
    -webkit-backdrop-filter: blur(18.8px);
    border: 1px solid rgba(255, 255, 255, 0.44);
}

.showMobileMenu {
    width: 100%;
    height: 500px;
    opacity: 1;
}

.navLinks {
    font-family: var(--font-display);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    width: 300px;
    gap: 30px;
    list-style: none;
    padding: 10px;
}

.navLinks li {
    opacity: 0;
    transform: translateY(-20px);
    transition: opacity 0.4s ease, transform 0.4s ease;
}

.showMobileMenu .navLinks li {
    opacity: 1;
    transform: translateY(0);
}

.showMobileMenu .navLinks li:nth-child(1) {
    transition-delay: 0.2s;
}

.showMobileMenu .navLinks li:nth-child(2) {
    transition-delay: 0.3s;
}

.showMobileMenu .navLinks li:nth-child(3) {
    transition-delay: 0.4s;
}

.showMobileMenu .navLinks li:nth-child(4) {
    transition-delay: 0.5s;
}

.showMobileMenu .navLinks li:nth-child(5) {
    transition-delay: 0.6s;
}

.showMobileMenu .navLinks li:nth-child(6) {
    transition-delay: 0.7s;
}

.showMobileMenu .navLinks li:nth-child(7) {
    transition-delay: 0.8s;
}

.navLinks a {
    font-size: 18px;
    font-weight: 600;
    letter-spacing: 1px;
    color: var(--primary-color);
    transition: color var(--transition);
    text-decoration: none;
}

.navLinks a:hover {
    color: var(--accent-color);
}

@media screen and (min-width: 1024px) {
    .hamburgerContainer {
        display: none;
    }

    .mobileMenuOuter {
        flex: 1;
        position: static;
        width: auto;
        height: auto;
        opacity: 1;
        padding: 0;
        margin-left: auto;
    }

    .mobileMenuInner {
        background: transparent;
        box-shadow: none;
        border: none;
        backdrop-filter: none;
        -webkit-backdrop-filter: none;
        padding: 0;
        justify-content: flex-end;
    }

    .showMobileMenu {
        height: auto;
        opacity: 1;
        transform: none;
    }

    .navLinks {
        flex-direction: row;
        width: auto;
        padding: 0;
    }

    .navLinks li {
        opacity: 1;
        transform: none;
        transition: none;
    }

    .navLinks a {
        font-size: 16px;
    }
}
</file>

<file path="src/app/admin/layout.tsx">
'use client';

import { useState, useEffect } from 'react';
import Link from 'next/link';
import { usePathname } from 'next/navigation';
import styles from './admin.module.css';

export default function AdminLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  const pathname = usePathname();
  const [isBookingsOpen, setIsBookingsOpen] = useState(false);
  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);

  const isBookingsActive = pathname?.startsWith('/admin/bookings');
  const isPropertiesActive = pathname === '/admin/properties' || pathname?.startsWith('/admin/properties/');
  const isPricesActive = pathname === '/admin/prices' || pathname?.startsWith('/admin/prices/');
  const isSettingsActive = pathname === '/admin/settings';
  const isDevActive = pathname === '/admin/dev';

  const toggleBookings = () => setIsBookingsOpen(!isBookingsOpen);

  const handleMenuLinkClick = () => {
    if (isMobileMenuOpen) {
      closeMobileMenu();
    }
  };

  const openMobileMenu = () => {
    document.body.classList.add('mobile-menu-open');
    setIsMobileMenuOpen(true);
  };

  const closeMobileMenu = () => {
    document.body.classList.remove('mobile-menu-open');
    setIsMobileMenuOpen(false);
  };

  useEffect(() => {
    if (isBookingsActive) {
      setIsBookingsOpen(true);
    }
    return () => {
      document.body.classList.remove('mobile-menu-open');
    };
  }, [isBookingsActive]);

  const getLinkClassName = (path: string, isActive: boolean, isSubLink: boolean = false) => {
    let className = isSubLink ? `${styles.subLink}` : `${styles.navLink}`;
    if (isActive) className += ` ${styles.active}`;
    return className;
  };

  const getStaticLinkClassName = (isActive: boolean) => {
    let className = `${styles.navLinkStatic}`;
    if (isActive) className += ` ${styles.active}`;
    return className;
  };

  return (
    <div className={styles.adminLayout}>
      <div 
        className={`${styles.mobileOverlay} ${isMobileMenuOpen ? styles.visible : ''}`}
        onClick={closeMobileMenu}
      ></div>

      <button 
        className={styles.mobileToggle} 
        onClick={openMobileMenu}
      >
        ‚ò∞ Menu
      </button>

      <aside className={`${styles.adminSidebar} ${isMobileMenuOpen ? styles.mobileOpen : ''}`}>
        <div className={styles.sidebarHeader}>
          <h2>Panel Adminia</h2>
        </div>
        
        <nav className={styles.sidebarNav}>
          <div>
            <div className={styles.navGroupTitle}>ZarzƒÖdzanie</div>
            
            <div>
              <div 
                className={getLinkClassName('', isBookingsActive)}
                onClick={toggleBookings}
                style={{ justifyContent: 'space-between' }}
              >
                <div style={{display: 'flex', alignItems: 'center', gap: '12px'}}>
                  <span className={styles.navIcon}>üìÖ</span>
                  <span>Rezerwacje</span>
                </div>
                <span>{isBookingsOpen ? '‚ñ≤' : '‚ñº'}</span>
              </div>

              <div className={`${styles.submenu} ${isBookingsOpen ? styles.open : ''}`}>
                <Link 
                  href="/admin/bookings/add" 
                  className={getLinkClassName('/admin/bookings/add', pathname === '/admin/bookings/add', true)}
                  onClick={handleMenuLinkClick}
                >
                  ‚ûï Dodaj NowƒÖ
                </Link>
                <Link 
                  href="/admin/bookings/calendar" 
                  className={getLinkClassName('/admin/bookings/calendar', pathname === '/admin/bookings/calendar', true)}
                  onClick={handleMenuLinkClick}
                >
                  üóìÔ∏è Kalendarz
                </Link>
                <Link 
                  href="/admin/bookings/list" 
                  className={getLinkClassName('/admin/bookings/list', pathname === '/admin/bookings/list', true)}
                  onClick={handleMenuLinkClick}
                >
                  üìã Lista Rezerwacji
                </Link>
              </div>
            </div>

            <Link 
              href="/admin/properties" 
              className={getStaticLinkClassName(isPropertiesActive)}
              onClick={handleMenuLinkClick}
            >
              <span className={styles.navIcon}>üè†</span>
              <span>Domki</span>
            </Link>

            <Link 
              href="/admin/prices" 
              className={getStaticLinkClassName(isPricesActive)}
              onClick={handleMenuLinkClick}
            >
              <span className={styles.navIcon}>üí∞</span>
              <span>Ceny</span>
            </Link>
          </div>

          <div>
            <div className={styles.navGroupTitle}>Konfiguracja</div>
            <Link 
              href="/admin/settings" 
              className={getLinkClassName('/admin/settings', isSettingsActive)}
              onClick={handleMenuLinkClick}
            >
              <span className={styles.navIcon}>‚öôÔ∏è</span>
              Ustawienia Systemu
            </Link>
          </div>

          <div>
            <div className={styles.navGroupTitle}>Narzƒôdzia</div>
            <Link 
              href="/admin/dev" 
              className={getLinkClassName('/admin/dev', isDevActive)}
              onClick={handleMenuLinkClick}
            >
              <span className={styles.navIcon}>üíª</span>
              Dev / Debug
            </Link>
          </div>
        </nav>

        <div className={styles.sidebarFooter}>
          <Link href="/" className={styles.navLink} style={{marginBottom: '10px'}} onClick={handleMenuLinkClick}>
            <span className={styles.navIcon}>üè†</span>
            Wr√≥ƒá na stronƒô
          </Link>
          <button className={styles.btnLogout} onClick={() => alert('Wylogowanie (do implementacji)')}>
            Wyloguj siƒô
          </button>
        </div>
      </aside>

      <main className={styles.adminContent}>
        {children}
      </main>
    </div>
  );
}
</file>

<file path="src/db/models/Booking.ts">
import mongoose, { Schema, Document } from 'mongoose';

export interface IBooking extends Document {
  propertyId: mongoose.Types.ObjectId;
  guestName?: string;
  guestEmail?: string;
  guestPhone?: string;
  startDate: Date;
  endDate: Date;
  totalPrice: number;
  numberOfGuests?: number;
  extraBedsCount?: number;
  status: 'confirmed' | 'blocked' | 'cancelled' | 'pending';
  bookingType: 'real' | 'shadow';
  linkedBookingId?: mongoose.Types.ObjectId;
  paymentId?: string;
}

const BookingSchema = new Schema<IBooking>({
  propertyId: { 
    type: Schema.Types.ObjectId, 
    ref: 'Property', 
    required: true 
  },
  guestName: { type: String },
  guestEmail: { type: String },
  guestPhone: { type: String },
  startDate: { type: Date, required: true },
  endDate: { type: Date, required: true },
  totalPrice: { type: Number, required: true, default: 0 },
  numberOfGuests: { type: Number, default: 0 },
  extraBedsCount: { type: Number, default: 0 },
  status: { 
    type: String, 
    enum: ['confirmed', 'blocked', 'cancelled', 'pending'], 
    default: 'pending' 
  },
  bookingType: {
    type: String,
    enum: ['real', 'shadow'],
    default: 'real'
  },
  linkedBookingId: { type: Schema.Types.ObjectId, ref: 'Booking' },
  paymentId: { type: String }
}, { timestamps: true });

BookingSchema.index({ propertyId: 1, startDate: 1, endDate: 1 });
BookingSchema.index({ status: 1 });
BookingSchema.index({ bookingType: 1 });

export default mongoose.models.Booking || mongoose.model<IBooking>('Booking', BookingSchema);
</file>

<file path="src/actions/seed.ts">
'use server'

import dbConnect from '@/db/connection';
import Property from '@/db/models/Property';
import Booking from '@/db/models/Booking';
import PriceConfig from '@/db/models/PriceConfig';
import SystemConfig from '@/db/models/SystemConfig';
import mongoose from 'mongoose';
import { ClientSession } from 'mongoose';

async function ensureConnected() {
    await dbConnect();
    if (mongoose.connection.readyState !== 1) {
        throw new Error('Nie uda≈Ço siƒô nawiƒÖzaƒá po≈ÇƒÖczenia z bazƒÖ danych.');
    }
}

export async function seedProperties(session?: ClientSession) {
    try {
        await ensureConnected();
        
        if (!session) {
            await Property.deleteMany({});
        }

        const data = [
            {
                name: "Chatka A (Wilcza)",
                slug: "chatka-a",
                description: "Przytulny domek z kominkiem, idealny dla par i ma≈Çych rodzin.",
                baseCapacity: 6,
                maxCapacityWithExtra: 8,
                images: ["/images/chatka-a-1.jpg"],
                isActive: true
            },
            {
                name: "Chatka B (Le≈õna)",
                slug: "chatka-b",
                description: "Domek z widokiem na las, wyposa≈ºony w saunƒô.",
                baseCapacity: 6,
                maxCapacityWithExtra: 8,
                images: ["/images/chatka-b-1.jpg"],
                isActive: true
            }
        ];

        const properties = session 
            ? await Property.insertMany(data, { session })
            : await Property.insertMany(data);

        return {
            success: true,
            message: `Utworzono ${properties.length} domki.`
        };
    } catch (error: any) {
        console.error("B≈ÇƒÖd seedowania domk√≥w:", error);
        return { success: false, error: error.message };
    }
}

export async function seedSystemConfig(session?: ClientSession) {
    try {
        await ensureConnected();
        
        if (!session) {
            await SystemConfig.deleteMany({});
        }

        const data = [{
            _id: 'main',
            autoBlockOtherCabins: true,
            maxGuestsPerCabin: 6,
            childrenFreeAgeLimit: 13
        }];

        if (session) {
            await SystemConfig.insertMany(data, { session });
        } else {
            await SystemConfig.insertMany(data);
        }

        return {
            success: true,
            message: `Konfiguracja systemu zaktualizowana.`
        };
    } catch (error: any) {
        return { success: false, error: error.message };
    }
}

export async function seedPriceConfig(session?: ClientSession) {
    try {
        await ensureConnected();
        
        if (!session) {
            await PriceConfig.deleteMany({});
        }

        const data = [{
            _id: 'main',
            baseRates: {
                weekday: [
                    { minGuests: 2, maxGuests: 3, price: 300 },
                    { minGuests: 4, maxGuests: 5, price: 400 },
                    { minGuests: 6, maxGuests: 10, price: 500 }
                ],
                weekend: [
                    { minGuests: 2, maxGuests: 3, price: 400 },
                    { minGuests: 4, maxGuests: 5, price: 500 },
                    { minGuests: 6, maxGuests: 10, price: 600 }
                ],
                extraBedPrice: 50,
                childrenFreeAgeLimit: 13
            },
            seasons: [
                {
                    name: "Wakacje 2026",
                    startDate: new Date("2026-07-01"),
                    endDate: new Date("2026-08-31"),
                    weekday: [
                        { minGuests: 2, maxGuests: 3, price: 450 },
                        { minGuests: 4, maxGuests: 5, price: 600 },
                        { minGuests: 6, maxGuests: 10, price: 800 }
                    ],
                    weekend: [
                        { minGuests: 2, maxGuests: 3, price: 550 },
                        { minGuests: 4, maxGuests: 5, price: 700 },
                        { minGuests: 6, maxGuests: 10, price: 900 }
                    ],
                    extraBedPrice: 70,
                    isActive: true
                }
            ]
        }];

        if (session) {
            await PriceConfig.insertMany(data, { session });
        } else {
            await PriceConfig.insertMany(data);
        }

        return {
            success: true,
            message: "Konfiguracja cenowa zosta≈Ça zapisana."
        };
    } catch (error: any) {
        console.error("B≈ÇƒÖd seedowania cen:", error);
        return { success: false, error: error.message };
    }
}

export async function seedBookings(session?: ClientSession) {
    try {
        await ensureConnected();

        const props = session 
            ? await Property.find({ isActive: true }).session(session)
            : await Property.find({ isActive: true });

        if (props.length < 2) {
            return { success: false, error: "Najpierw uruchom seedProperties()." };
        }

        const cabinA = props.find(p => p.slug === 'chatka-a');
        const cabinB = props.find(p => p.slug === 'chatka-b');

        if (!cabinA || !cabinB) {
            return { success: false, error: "Nie znaleziono domk√≥w." };
        }

        if (!session) {
            await Booking.deleteMany({});
        }

        const data = [
            {
                propertyId: cabinA._id,
                guestName: "Rafa≈Ç Testowy",
                guestEmail: "rafal@example.com",
                guestPhone: "123456789",
                startDate: new Date("2026-03-10"),
                endDate: new Date("2026-03-15"),
                totalPrice: 1500,
                numberOfGuests: 3,
                extraBedsCount: 0,
                status: 'confirmed',
                bookingType: 'real',
                paymentId: "PAY_SINGLE_001"
            },
            {
                propertyId: cabinA._id,
                guestName: "Marek Nowak",
                guestEmail: "marek@example.com",
                guestPhone: "987654321",
                startDate: new Date("2026-06-20"),
                endDate: new Date("2026-06-27"),
                totalPrice: 3500,
                numberOfGuests: 5,
                extraBedsCount: 1,
                status: 'confirmed',
                bookingType: 'real',
                paymentId: "PAY_DOUBLE_002"
            },
            {
                propertyId: cabinB._id,
                guestName: "Marek Nowak",
                guestEmail: "marek@example.com",
                guestPhone: "987654321",
                startDate: new Date("2026-06-20"),
                endDate: new Date("2026-06-27"),
                totalPrice: 3500,
                numberOfGuests: 5,
                extraBedsCount: 1,
                status: 'confirmed',
                bookingType: 'real',
                paymentId: "PAY_DOUBLE_002"
            },
            {
                propertyId: cabinB._id,
                guestName: "Anna Wi≈õniewska",
                guestEmail: "anna@example.com",
                guestPhone: "555666777",
                startDate: new Date("2026-07-01"),
                endDate: new Date("2026-07-05"),
                totalPrice: 2000,
                numberOfGuests: 4,
                extraBedsCount: 0,
                status: 'confirmed',
                bookingType: 'real',
                paymentId: "PAY_SHADOW_003"
            },
            {
                propertyId: cabinA._id,
                guestName: "SYSTEM BLOCK",
                guestEmail: "system@local",
                guestPhone: "",
                startDate: new Date("2026-07-01"),
                endDate: new Date("2026-07-05"),
                totalPrice: 0,
                numberOfGuests: 0,
                extraBedsCount: 0,
                status: 'blocked',
                bookingType: 'shadow',
                linkedBookingId: null,
                paymentId: null
            }
        ];

        const inserted = session 
            ? await Booking.insertMany(data, { session })
            : await Booking.insertMany(data);

        return {
            success: true,
            message: `Dodano ${inserted.length} rezerwacji.`
        };

    } catch (error: any) {
        console.error("B≈ÇƒÖd seedowania rezerwacji:", error);
        return { success: false, error: error.message };
    }
}

export async function seedAllData() {
    await ensureConnected();

    const session = await mongoose.startSession();
    session.startTransaction();

    try {

        await Property.deleteMany({}, { session });
        await Booking.deleteMany({}, { session });
        await PriceConfig.deleteMany({}, { session });
        await SystemConfig.deleteMany({}, { session });
        await seedProperties(session);
        await seedSystemConfig(session);
        await seedPriceConfig(session);
        
        await seedBookings(session);

        await session.commitTransaction();
        return { success: true, message: "Baza zosta≈Ça zresetowana i zasiana wszystkimi danymi!" };

    } catch (error: any) {
        await session.abortTransaction();
        console.error("B≈ÇƒÖd seedowania:", error);
        return { success: false, error: error.message };
    } finally {
        session.endSession();
    }
}

export async function clearAllData() {
    await ensureConnected();

    const session = await mongoose.startSession();
    session.startTransaction();

    try {
        await Property.deleteMany({}, { session });
        await Booking.deleteMany({}, { session });
        await PriceConfig.deleteMany({}, { session });
        await SystemConfig.deleteMany({}, { session });

        await session.commitTransaction();
        return { success: true, message: "Wszystkie kolekcje zosta≈Çy pomy≈õlnie wyczyszczone!" };

    } catch (error: any) {
        await session.abortTransaction();
        console.error("B≈ÇƒÖd czyszczenia bazy:", error);
        return { success: false, error: error.message };
    } finally {
        session.endSession();
    }
}
</file>

<file path="src/app/_components/CalendarPicker/ClendarPicker.css">
@font-face {
    font-family: 'Material Symbols Outlined';
    font-style: normal;
    font-weight: 100 700;
    src: url(https://fonts.gstatic.com/s/materialsymbolsoutlined/v136/kJEhBvYX7BgnkSrUwT8OhrdQw4oELdPIeeII9v6oFsI.woff2) format('woff2');
}

.calendar {
    font-size: 12px; 
    width: 100%;
    max-width: 36em; 
    text-align: center;
    box-sizing: border-box;
}

.navigation {
    display: flex;
    justify-content: space-between;
    height: 2.75em;
    color: #4a4949;
    margin-bottom: 1em;
}

.navigation__arrow, 
.navigation__current-month {
    padding: 0.3em;
    margin: auto;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.2s ease;
}

.navigation__current-month {
    margin: 0 0.3em;
    font-size: 1.1em;
    font-weight: bold;
}

.navigation__arrow:hover, 
.navigation__current-month:hover {
    background-color: rgb(231, 231, 231);
}

.week-days {
    display: flex;
}

.week-days__names {
    padding: 0.3em;
    flex: 0 0 14.28%;
    text-transform: uppercase;
    text-decoration: underline dotted;
    color: #565656;
    font-size: 0.9em;
}

.month-container {
    width: 100%;
    display: flex;
    flex-wrap: wrap;
}

.day {
    padding: 1.2em 0;
    flex: 0 0 14.28%;
    cursor: pointer;
    background-color: white;
    border: solid 1px white;
    border-radius: 0.2em;
    color: #4a4949;
    user-select: none;
    box-shadow: 0.2em 0.2em 0.4em 0px #d2d2d280;
    z-index: 2;
    font-size: 1.1em;
    transition: all 0.2s ease;
}

.day:not(.day__reserved):not(.day__past):hover {
    background-color: #8d8c8c !important;
    color: white !important;
}

.day__blank {
    padding: 0.6em;
    flex: 0 0 14.28%;
}

.day__today {
    outline: 0.125em dotted red;
    outline-offset: -0.2em;
}

.day__past,
.day__past.day__sunday,
.day__past.day__saturday {
    color: #d3d3d3 !important;
    cursor: default;
}

.day__reserved {
    color: gray;
    opacity: 0.5;
    position: relative;
    pointer-events: none;
}

.day__reserved::before,
.day__reserved::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 15%;
    width: 70%;
    height: 1px;
    background-color: red;
}

.day__reserved::before { transform: rotate(45deg); }
.day__reserved::after { transform: rotate(-45deg); }

.day__sunday, 
.day__saturday {
    color: #d10000;
}

.day__weekend {
    background-color: #fcfcfc;
}

.day__selected-as-start,
.day__selected-as-end,
.day__selected-between,
.day__hovered {
    background-color: #ffe299 !important;
    color: white !important;
}

.day__selected-between:hover, 
.day__selected-as-start:hover, 
.day__selected-as-end:hover {
    background-color: #f0c96e !important;
}

.material-symbols-outlined {
    font-family: 'Material Symbols Outlined';
    font-weight: normal;
    font-style: normal;
    font-size: 1.5em;
    line-height: 1;
    display: inline-block;
}
</file>

<file path="src/db/models/PriceConfig.ts">
import mongoose, { Schema, Document } from 'mongoose';

export interface IRateTier {
  minGuests: number;
  maxGuests: number;
  price: number;
}

export interface IBaseRates {
  weekday: IRateTier[];
  weekend: IRateTier[];
  extraBedPrice: number;
  childrenFreeAgeLimit: number;
}

export interface ISeason {
  name: string;
  startDate: Date;
  endDate: Date;
  weekday: IRateTier[];
  weekend: IRateTier[];
  extraBedPrice?: number;
  isActive: boolean;
}

export interface IPriceConfig extends Document {
  _id: string;
  baseRates: IBaseRates;
  seasons: ISeason[];
  updatedAt: Date;
}

const RateTierSchema = new Schema<IRateTier>({
  minGuests: { type: Number, required: true },
  maxGuests: { type: Number, required: true },
  price: { type: Number, required: true, min: 0 }
}, { _id: false });

const BaseRatesSchema = new Schema<IBaseRates>({
  weekday: { type: [RateTierSchema], required: true },
  weekend: { type: [RateTierSchema], required: true },
  extraBedPrice: { type: Number, default: 50, min: 0 },
  childrenFreeAgeLimit: { type: Number, default: 13 }
}, { _id: false });

const SeasonSchema = new Schema<ISeason>({
  name: { type: String, required: true },
  startDate: { type: Date, required: true },
  endDate: { type: Date, required: true },
  weekday: { type: [RateTierSchema], required: true },
  weekend: { type: [RateTierSchema], required: true },
  extraBedPrice: { type: Number, min: 0 },
  isActive: { type: Boolean, default: true }
}, { _id: false });

const PriceConfigSchema = new Schema<IPriceConfig>({
  _id: { type: String, default: 'main' },
  baseRates: { 
    type: BaseRatesSchema, 
    required: true,
    default: {
      weekday: [
        { minGuests: 2, maxGuests: 3, price: 300 },
        { minGuests: 4, maxGuests: 5, price: 400 },
        { minGuests: 6, maxGuests: 10, price: 500 }
      ],
      weekend: [
        { minGuests: 2, maxGuests: 3, price: 400 },
        { minGuests: 4, maxGuests: 5, price: 500 },
        { minGuests: 6, maxGuests: 10, price: 600 }
      ],
      extraBedPrice: 50,
      childrenFreeAgeLimit: 13
    }
  },
  seasons: { type: [SeasonSchema], default: [] }
}, {
  timestamps: true,
  versionKey: false
});

export default mongoose.models.PriceConfig || mongoose.model<IPriceConfig>('PriceConfig', PriceConfigSchema);
</file>

<file path="src/app/layout.tsx">
import { Sansita, PT_Serif, Mulish } from "next/font/google";
import type { Metadata } from 'next';
import '@/app/globals.css';

import { config } from '@fortawesome/fontawesome-svg-core';
import '@fortawesome/fontawesome-svg-core/styles.css';
config.autoAddCss = false;

const sansita = Sansita({ 
    subsets: ["latin", "latin-ext"],
    variable: "--font-sansita",
    weight: '400'
});

const ptSerif = PT_Serif({ 
    subsets: ["latin", "latin-ext"], 
    variable: "--font-pt-serif",
    weight: ['400', '700'],
    style: ['normal', 'italic']
});

const mulish = Mulish({ 
    subsets: ["latin", "latin-ext"], 
    variable: "--font-mulish",
    weight: ['300', '400', '600', '700']
});

export const metadata: Metadata = {
    title: 'Wilcze Chatki - Domki na Kaszubach',
    description: 'Komfortowe domki z saunƒÖ i jacuzzi w Szumlesiu Kr√≥lewskim',
};

export default function RootLayout({
    children,
}: {
    children: React.ReactNode;
}) {
    return (
        <html lang="pl">
            <body className={`${sansita.variable} ${ptSerif.variable} ${mulish.variable}`}>
                {children}
            </body>
        </html>
    );
}
</file>

<file path="src/app/globals.css">
:root {
    --primary-color: #262a10;
    --accent-color: #c9b363;
    --secondary-color: #f4f1ea;
    --text-main: #142a1d;
    --text-light: #ffffff;
    --bg-white: #ffffff;
    --action-color: #c3a846;
    --error-color: #c0392b;
    --section-bg-light: #f9f9f9;
    --section-bg-dark: #eeeeee;
    --transition: 0.3s ease-in-out;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
}

html {
    scroll-behavior: smooth;
    touch-action: manipulation;
    -webkit-text-size-adjust: 100%;
}

body {
    --font-display: var(--font-sansita), sans-serif;
    --font-heading: var(--font-pt-serif), serif;
    --font-body: var(--font-mulish), sans-serif;

    margin-top: 100px;
    color: var(--text-main);
    background-color: var(--bg-white);
    font-family: var(--font-body);
    font-weight: 300;
    line-height: 1.6;
    font-size: clamp(1rem, 0.95rem + 0.25vw, 1.2rem);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    touch-action: manipulation;
}

section {
    padding: 60px 20px;
    scroll-margin-top: 40px;
}

section:nth-child(odd) {
    background-color: var(--section-bg-dark);
}

section:nth-child(even) {
    background-color: var(--section-bg-light);
}

h1 {
    font-family: var(--font-display);
    font-weight: 800;
    line-height: 1.1;
    font-size: clamp(2.9rem, 7.5vw, 4.5rem);
    color: var(--text-light);
    text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.7);
    letter-spacing: normal;
    margin: 0;
}

h2, h3, h4 {
    font-family: var(--font-heading);
    font-weight: 400;
    letter-spacing: normal;
    font-style: oblique;
}

h2 {
    font-size: clamp(1.8rem, 3.3vw, 2.4rem);
    line-height: 1.2;
}

h3 {
    font-size: clamp(1.5rem, 2.5vw, 2.2rem);
    line-height: 1.3;
}

h4 {
    font-size: clamp(1.25rem, 2.5vw, 1.75rem);
    line-height: 1.4;
}

p {
    color: #555;
    font-size: 1.05rem;
    line-height: 1.8;
    margin-bottom: 1rem;
}

li, label {
    font-family: var(--font-body);
    font-weight: 300;
    line-height: 1.6;
}

button, a, nav {
    font-family: var(--font-body);
    text-decoration: none;
}
</file>

</files>
